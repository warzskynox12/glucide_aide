function DC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function vS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ag={exports:{}},Gu={},lg={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI;function OC(){if(LI)return Le;LI=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,V={};function k(F,J,Se){this.props=F,this.context=J,this.refs=V,this.updater=Se||A}k.prototype.isReactComponent={},k.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Y(){}Y.prototype=k.prototype;function q(F,J,Se){this.props=F,this.context=J,this.refs=V,this.updater=Se||A}var K=q.prototype=new Y;K.constructor=q,D(K,k.prototype),K.isPureReactComponent=!0;var ne=Array.isArray,he=Object.prototype.hasOwnProperty,ue={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function R(F,J,Se){var De,Ve={},$e=null,Ke=null;if(J!=null)for(De in J.ref!==void 0&&(Ke=J.ref),J.key!==void 0&&($e=""+J.key),J)he.call(J,De)&&!b.hasOwnProperty(De)&&(Ve[De]=J[De]);var Qe=arguments.length-2;if(Qe===1)Ve.children=Se;else if(1<Qe){for(var tt=Array(Qe),zt=0;zt<Qe;zt++)tt[zt]=arguments[zt+2];Ve.children=tt}if(F&&F.defaultProps)for(De in Qe=F.defaultProps,Qe)Ve[De]===void 0&&(Ve[De]=Qe[De]);return{$$typeof:n,type:F,key:$e,ref:Ke,props:Ve,_owner:ue.current}}function C(F,J){return{$$typeof:n,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function x(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Se){return J[Se]})}var L=/\/+/g;function S(F,J){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):J.toString(36)}function Re(F,J,Se,De,Ve){var $e=typeof F;($e==="undefined"||$e==="boolean")&&(F=null);var Ke=!1;if(F===null)Ke=!0;else switch($e){case"string":case"number":Ke=!0;break;case"object":switch(F.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=F,Ve=Ve(Ke),F=De===""?"."+S(Ke,0):De,ne(Ve)?(Se="",F!=null&&(Se=F.replace(L,"$&/")+"/"),Re(Ve,J,Se,"",function(zt){return zt})):Ve!=null&&(N(Ve)&&(Ve=C(Ve,Se+(!Ve.key||Ke&&Ke.key===Ve.key?"":(""+Ve.key).replace(L,"$&/")+"/")+F)),J.push(Ve)),1;if(Ke=0,De=De===""?".":De+":",ne(F))for(var Qe=0;Qe<F.length;Qe++){$e=F[Qe];var tt=De+S($e,Qe);Ke+=Re($e,J,Se,tt,Ve)}else if(tt=E(F),typeof tt=="function")for(F=tt.call(F),Qe=0;!($e=F.next()).done;)$e=$e.value,tt=De+S($e,Qe++),Ke+=Re($e,J,Se,tt,Ve);else if($e==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ke}function Te(F,J,Se){if(F==null)return F;var De=[],Ve=0;return Re(F,De,"","",function($e){return J.call(Se,$e,Ve++)}),De}function St(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(Se){(F._status===0||F._status===-1)&&(F._status=1,F._result=Se)},function(Se){(F._status===0||F._status===-1)&&(F._status=2,F._result=Se)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var Me={current:null},ae={transition:null},we={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ue};function de(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:Te,forEach:function(F,J,Se){Te(F,function(){J.apply(this,arguments)},Se)},count:function(F){var J=0;return Te(F,function(){J++}),J},toArray:function(F){return Te(F,function(J){return J})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Le.Component=k,Le.Fragment=t,Le.Profiler=i,Le.PureComponent=q,Le.StrictMode=r,Le.Suspense=h,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Le.act=de,Le.cloneElement=function(F,J,Se){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var De=D({},F.props),Ve=F.key,$e=F.ref,Ke=F._owner;if(J!=null){if(J.ref!==void 0&&($e=J.ref,Ke=ue.current),J.key!==void 0&&(Ve=""+J.key),F.type&&F.type.defaultProps)var Qe=F.type.defaultProps;for(tt in J)he.call(J,tt)&&!b.hasOwnProperty(tt)&&(De[tt]=J[tt]===void 0&&Qe!==void 0?Qe[tt]:J[tt])}var tt=arguments.length-2;if(tt===1)De.children=Se;else if(1<tt){Qe=Array(tt);for(var zt=0;zt<tt;zt++)Qe[zt]=arguments[zt+2];De.children=Qe}return{$$typeof:n,type:F.type,key:Ve,ref:$e,props:De,_owner:Ke}},Le.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Le.createElement=R,Le.createFactory=function(F){var J=R.bind(null,F);return J.type=F,J},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:c,render:F}},Le.isValidElement=N,Le.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:St}},Le.memo=function(F,J){return{$$typeof:p,type:F,compare:J===void 0?null:J}},Le.startTransition=function(F){var J=ae.transition;ae.transition={};try{F()}finally{ae.transition=J}},Le.unstable_act=de,Le.useCallback=function(F,J){return Me.current.useCallback(F,J)},Le.useContext=function(F){return Me.current.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F){return Me.current.useDeferredValue(F)},Le.useEffect=function(F,J){return Me.current.useEffect(F,J)},Le.useId=function(){return Me.current.useId()},Le.useImperativeHandle=function(F,J,Se){return Me.current.useImperativeHandle(F,J,Se)},Le.useInsertionEffect=function(F,J){return Me.current.useInsertionEffect(F,J)},Le.useLayoutEffect=function(F,J){return Me.current.useLayoutEffect(F,J)},Le.useMemo=function(F,J){return Me.current.useMemo(F,J)},Le.useReducer=function(F,J,Se){return Me.current.useReducer(F,J,Se)},Le.useRef=function(F){return Me.current.useRef(F)},Le.useState=function(F){return Me.current.useState(F)},Le.useSyncExternalStore=function(F,J,Se){return Me.current.useSyncExternalStore(F,J,Se)},Le.useTransition=function(){return Me.current.useTransition()},Le.version="18.3.1",Le}var MI;function N_(){return MI||(MI=1,lg.exports=OC()),lg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI;function VC(){if(UI)return Gu;UI=1;var n=N_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var y,v={},E=null,A=null;p!==void 0&&(E=""+p),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(A=h.ref);for(y in h)r.call(h,y)&&!o.hasOwnProperty(y)&&(v[y]=h[y]);if(c&&c.defaultProps)for(y in h=c.defaultProps,h)v[y]===void 0&&(v[y]=h[y]);return{$$typeof:e,type:c,key:E,ref:A,props:v,_owner:i.current}}return Gu.Fragment=t,Gu.jsx=l,Gu.jsxs=l,Gu}var FI;function LC(){return FI||(FI=1,ag.exports=VC()),ag.exports}var U=LC(),Q=N_();const wS=vS(Q),MC=DC({__proto__:null,default:wS},[Q]);var Lh={},ug={exports:{}},Dn={},cg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI;function UC(){return BI||(BI=1,function(n){function e(ae,we){var de=ae.length;ae.push(we);e:for(;0<de;){var F=de-1>>>1,J=ae[F];if(0<i(J,we))ae[F]=we,ae[de]=J,de=F;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var we=ae[0],de=ae.pop();if(de!==we){ae[0]=de;e:for(var F=0,J=ae.length,Se=J>>>1;F<Se;){var De=2*(F+1)-1,Ve=ae[De],$e=De+1,Ke=ae[$e];if(0>i(Ve,de))$e<J&&0>i(Ke,Ve)?(ae[F]=Ke,ae[$e]=de,F=$e):(ae[F]=Ve,ae[De]=de,F=De);else if($e<J&&0>i(Ke,de))ae[F]=Ke,ae[$e]=de,F=$e;else break e}}return we}function i(ae,we){var de=ae.sortIndex-we.sortIndex;return de!==0?de:ae.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],y=1,v=null,E=3,A=!1,D=!1,V=!1,k=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ae){for(var we=t(p);we!==null;){if(we.callback===null)r(p);else if(we.startTime<=ae)r(p),we.sortIndex=we.expirationTime,e(h,we);else break;we=t(p)}}function ne(ae){if(V=!1,K(ae),!D)if(t(h)!==null)D=!0,St(he);else{var we=t(p);we!==null&&Me(ne,we.startTime-ae)}}function he(ae,we){D=!1,V&&(V=!1,Y(R),R=-1),A=!0;var de=E;try{for(K(we),v=t(h);v!==null&&(!(v.expirationTime>we)||ae&&!x());){var F=v.callback;if(typeof F=="function"){v.callback=null,E=v.priorityLevel;var J=F(v.expirationTime<=we);we=n.unstable_now(),typeof J=="function"?v.callback=J:v===t(h)&&r(h),K(we)}else r(h);v=t(h)}if(v!==null)var Se=!0;else{var De=t(p);De!==null&&Me(ne,De.startTime-we),Se=!1}return Se}finally{v=null,E=de,A=!1}}var ue=!1,b=null,R=-1,C=5,N=-1;function x(){return!(n.unstable_now()-N<C)}function L(){if(b!==null){var ae=n.unstable_now();N=ae;var we=!0;try{we=b(!0,ae)}finally{we?S():(ue=!1,b=null)}}else ue=!1}var S;if(typeof q=="function")S=function(){q(L)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Te=Re.port2;Re.port1.onmessage=L,S=function(){Te.postMessage(null)}}else S=function(){k(L,0)};function St(ae){b=ae,ue||(ue=!0,S())}function Me(ae,we){R=k(function(){ae(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){D||A||(D=!0,St(he))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ae){switch(E){case 1:case 2:case 3:var we=3;break;default:we=E}var de=E;E=we;try{return ae()}finally{E=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,we){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var de=E;E=ae;try{return we()}finally{E=de}},n.unstable_scheduleCallback=function(ae,we,de){var F=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?F+de:F):de=F,ae){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=de+J,ae={id:y++,callback:we,priorityLevel:ae,startTime:de,expirationTime:J,sortIndex:-1},de>F?(ae.sortIndex=de,e(p,ae),t(h)===null&&ae===t(p)&&(V?(Y(R),R=-1):V=!0,Me(ne,de-F))):(ae.sortIndex=J,e(h,ae),D||A||(D=!0,St(he))),ae},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(ae){var we=E;return function(){var de=E;E=we;try{return ae.apply(this,arguments)}finally{E=de}}}}(dg)),dg}var jI;function FC(){return jI||(jI=1,cg.exports=UC()),cg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function BC(){if($I)return Dn;$I=1;var n=N_(),e=FC();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function E(s){return h.call(v,s)?!0:h.call(y,s)?!1:p.test(s)?v[s]=!0:(y[s]=!0,!1)}function A(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,a,u,f){if(a===null||typeof a>"u"||A(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function V(s,a,u,f,m,_,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=_,this.removeEmptyString=I}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){k[s]=new V(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];k[a]=new V(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){k[s]=new V(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){k[s]=new V(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){k[s]=new V(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){k[s]=new V(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){k[s]=new V(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){k[s]=new V(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){k[s]=new V(s,5,!1,s.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function q(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(Y,q);k[a]=new V(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(Y,q);k[a]=new V(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(Y,q);k[a]=new V(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){k[s]=new V(s,1,!1,s.toLowerCase(),null,!1,!1)}),k.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){k[s]=new V(s,1,!1,s.toLowerCase(),null,!0,!0)});function K(s,a,u,f){var m=k.hasOwnProperty(a)?k[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(D(a,u,m,f)&&(u=null),f||m===null?E(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),ue=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),St=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),ae=Symbol.iterator;function we(s){return s===null||typeof s!="object"?null:(s=ae&&s[ae]||s["@@iterator"],typeof s=="function"?s:null)}var de=Object.assign,F;function J(s){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var Se=!1;function De(s,a){if(!s||Se)return"";Se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var f=W}Reflect.construct(s,[],a)}else{try{a.call()}catch(W){f=W}s.call(a.prototype)}else{try{throw Error()}catch(W){f=W}s()}}catch(W){if(W&&f&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),_=f.stack.split(`
`),I=m.length-1,P=_.length-1;1<=I&&0<=P&&m[I]!==_[P];)P--;for(;1<=I&&0<=P;I--,P--)if(m[I]!==_[P]){if(I!==1||P!==1)do if(I--,P--,0>P||m[I]!==_[P]){var O=`
`+m[I].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=I&&0<=P);break}}}finally{Se=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?J(s):""}function Ve(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=De(s.type,!1),s;case 11:return s=De(s.type.render,!1),s;case 1:return s=De(s.type,!0),s;default:return""}}function $e(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case ue:return"Portal";case C:return"Profiler";case R:return"StrictMode";case S:return"Suspense";case Re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case x:return(s.displayName||"Context")+".Consumer";case N:return(s._context.displayName||"Context")+".Provider";case L:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Te:return a=s.displayName||null,a!==null?a:$e(s.type)||"Memo";case St:a=s._payload,s=s._init;try{return $e(s(a))}catch{}}return null}function Ke(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Qe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tt(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zt(s){var a=tt(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(I){f=""+I,_.call(this,I)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zr(s){s._valueTracker||(s._valueTracker=zt(s))}function ta(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=tt(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function Li(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Bs(s,a){var u=a.checked;return de({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function na(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Qe(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Xl(s,a){a=a.checked,a!=null&&K(s,"checked",a,!1)}function Zl(s,a){Xl(s,a);var u=Qe(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?ra(s,a.type,u):a.hasOwnProperty("defaultValue")&&ra(s,a.type,Qe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Id(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function ra(s,a,u){(a!=="number"||Li(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var ei=Array.isArray;function ti(s,a,u,f){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&f&&(s[u].defaultSelected=!0)}else{for(u=""+Qe(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function eu(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ia(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ei(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Qe(u)}}function sa(s,a){var u=Qe(a.value),f=Qe(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function tu(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Vt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Vt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ni,nu=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,m)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ni=ni||document.createElement("div"),ni.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ni.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Mi(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$s=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(s){$s.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),js[a]=js[s]})});function ru(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||js.hasOwnProperty(s)&&js[s]?(""+a).trim():a+"px"}function iu(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=ru(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,m):s[u]=m}}var su=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ou(s,a){if(a){if(su[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function au(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zs=null;function oa(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var aa=null,Yn=null,Cr=null;function la(s){if(s=Nu(s)){if(typeof aa!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Yd(a),aa(s.stateNode,s.type,a))}}function br(s){Yn?Cr?Cr.push(s):Cr=[s]:Yn=s}function lu(){if(Yn){var s=Yn,a=Cr;if(Cr=Yn=null,la(s),a)for(s=0;s<a.length;s++)la(a[s])}}function qs(s,a){return s(a)}function uu(){}var ri=!1;function cu(s,a,u){if(ri)return s(a,u);ri=!0;try{return qs(s,a,u)}finally{ri=!1,(Yn!==null||Cr!==null)&&(uu(),lu())}}function Rt(s,a){var u=s.stateNode;if(u===null)return null;var f=Yd(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ua=!1;if(c)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){ua=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{ua=!1}function Ws(s,a,u,f,m,_,I,P,O){var W=Array.prototype.slice.call(arguments,3);try{a.apply(u,W)}catch(te){this.onError(te)}}var Gs=!1,ca=null,dr=!1,du=null,Vp={onError:function(s){Gs=!0,ca=s}};function da(s,a,u,f,m,_,I,P,O){Gs=!1,ca=null,Ws.apply(Vp,arguments)}function Ed(s,a,u,f,m,_,I,P,O){if(da.apply(this,arguments),Gs){if(Gs){var W=ca;Gs=!1,ca=null}else throw Error(t(198));dr||(dr=!0,du=W)}}function hr(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Hs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function fr(s){if(hr(s)!==s)throw Error(t(188))}function Td(s){var a=s.alternate;if(!a){if(a=hr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return fr(m),s;if(_===f)return fr(m),a;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=_;else{for(var I=!1,P=m.child;P;){if(P===u){I=!0,u=m,f=_;break}if(P===f){I=!0,f=m,u=_;break}P=P.sibling}if(!I){for(P=_.child;P;){if(P===u){I=!0,u=_,f=m;break}if(P===f){I=!0,f=_,u=m;break}P=P.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function hu(s){return s=Td(s),s!==null?ha(s):null}function ha(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ha(s);if(a!==null)return a;s=s.sibling}return null}var fa=e.unstable_scheduleCallback,fu=e.unstable_cancelCallback,Sd=e.unstable_shouldYield,Lp=e.unstable_requestPaint,nt=e.unstable_now,Rd=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,Ui=e.unstable_UserBlockingPriority,Xn=e.unstable_NormalPriority,pu=e.unstable_LowPriority,Ad=e.unstable_IdlePriority,Qs=null,jn=null;function Pd(s){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Qs,s,void 0,(s.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Cd,mu=Math.log,kd=Math.LN2;function Cd(s){return s>>>=0,s===0?32:31-(mu(s)/kd|0)|0}var pa=64,ma=4194304;function Fi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Js(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,_=s.pingedLanes,I=u&268435455;if(I!==0){var P=I&~m;P!==0?f=Fi(P):(_&=I,_!==0&&(f=Fi(_)))}else I=u&~m,I!==0?f=Fi(I):_!==0&&(f=Fi(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,_=a&-a,m>=_||m===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-pn(a),m=1<<u,f|=s[u],a&=~m;return f}function Mp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,_=s.pendingLanes;0<_;){var I=31-pn(_),P=1<<I,O=m[I];O===-1?((P&u)===0||(P&f)!==0)&&(m[I]=Mp(P,a)):O<=a&&(s.expiredLanes|=P),_&=~P}}function $n(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ys(){var s=pa;return pa<<=1,(pa&4194240)===0&&(pa=64),s}function Bi(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function ji(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-pn(a),s[a]=u}function et(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-pn(u),_=1<<m;a[m]=0,f[m]=-1,s[m]=-1,u&=~_}}function $i(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-pn(u),m=1<<f;m&a|s[f]&a&&(s[f]|=a),u&=~m}}var je=0;function zi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var bd,ga,Nd,xd,Dd,gu=!1,Nr=[],Yt=null,pr=null,mr=null,qi=new Map,Zn=new Map,xr=[],Up="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Od(s,a){switch(s){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":qi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(a.pointerId)}}function An(s,a,u,f,m,_){return s===null||s.nativeEvent!==_?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},a!==null&&(a=Nu(a),a!==null&&ga(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function Fp(s,a,u,f,m){switch(a){case"focusin":return Yt=An(Yt,s,a,u,f,m),!0;case"dragenter":return pr=An(pr,s,a,u,f,m),!0;case"mouseover":return mr=An(mr,s,a,u,f,m),!0;case"pointerover":var _=m.pointerId;return qi.set(_,An(qi.get(_)||null,s,a,u,f,m)),!0;case"gotpointercapture":return _=m.pointerId,Zn.set(_,An(Zn.get(_)||null,s,a,u,f,m)),!0}return!1}function Vd(s){var a=no(s.target);if(a!==null){var u=hr(a);if(u!==null){if(a=u.tag,a===13){if(a=Hs(u),a!==null){s.blockedOn=a,Dd(s.priority,function(){Nd(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function si(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=_a(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);zs=f,u.target.dispatchEvent(f),zs=null}else return a=Nu(u),a!==null&&ga(a),s.blockedOn=u,!1;a.shift()}return!0}function Xs(s,a,u){si(s)&&u.delete(a)}function Ld(){gu=!1,Yt!==null&&si(Yt)&&(Yt=null),pr!==null&&si(pr)&&(pr=null),mr!==null&&si(mr)&&(mr=null),qi.forEach(Xs),Zn.forEach(Xs)}function gr(s,a){s.blockedOn===a&&(s.blockedOn=null,gu||(gu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ld)))}function _r(s){function a(m){return gr(m,s)}if(0<Nr.length){gr(Nr[0],s);for(var u=1;u<Nr.length;u++){var f=Nr[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Yt!==null&&gr(Yt,s),pr!==null&&gr(pr,s),mr!==null&&gr(mr,s),qi.forEach(a),Zn.forEach(a),u=0;u<xr.length;u++)f=xr[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<xr.length&&(u=xr[0],u.blockedOn===null);)Vd(u),u.blockedOn===null&&xr.shift()}var oi=ne.ReactCurrentBatchConfig,Wi=!0;function ut(s,a,u,f){var m=je,_=oi.transition;oi.transition=null;try{je=1,_u(s,a,u,f)}finally{je=m,oi.transition=_}}function Bp(s,a,u,f){var m=je,_=oi.transition;oi.transition=null;try{je=4,_u(s,a,u,f)}finally{je=m,oi.transition=_}}function _u(s,a,u,f){if(Wi){var m=_a(s,a,u,f);if(m===null)Yp(s,a,f,Zs,u),Od(s,f);else if(Fp(m,s,a,u,f))f.stopPropagation();else if(Od(s,f),a&4&&-1<Up.indexOf(s)){for(;m!==null;){var _=Nu(m);if(_!==null&&bd(_),_=_a(s,a,u,f),_===null&&Yp(s,a,f,Zs,u),_===m)break;m=_}m!==null&&f.stopPropagation()}else Yp(s,a,f,null,u)}}var Zs=null;function _a(s,a,u,f){if(Zs=null,s=oa(f),s=no(s),s!==null)if(a=hr(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Hs(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Zs=s,null}function yu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rd()){case Ks:return 1;case Ui:return 4;case Xn:case pu:return 16;case Ad:return 536870912;default:return 16}default:return 16}}var zn=null,ya=null,Pn=null;function vu(){if(Pn)return Pn;var s,a=ya,u=a.length,f,m="value"in zn?zn.value:zn.textContent,_=m.length;for(s=0;s<u&&a[s]===m[s];s++);var I=u-s;for(f=1;f<=I&&a[u-f]===m[_-f];f++);return Pn=m.slice(s,1<f?1-f:void 0)}function va(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Dr(){return!0}function wu(){return!1}function Xt(s){function a(u,f,m,_,I){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(u=s[P],this[P]=u?u(_):_[P]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Dr:wu,this.isPropagationStopped=wu,this}return de(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),a}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Xt(yr),Or=de({},yr,{view:0,detail:0}),jp=Xt(Or),Ia,ai,Gi,eo=de({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gi&&(Gi&&s.type==="mousemove"?(Ia=s.screenX-Gi.screenX,ai=s.screenY-Gi.screenY):ai=Ia=0,Gi=s),Ia)},movementY:function(s){return"movementY"in s?s.movementY:ai}}),Ea=Xt(eo),Iu=de({},eo,{dataTransfer:0}),Md=Xt(Iu),Ta=de({},Or,{relatedTarget:0}),Sa=Xt(Ta),Ud=de({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),li=Xt(Ud),Fd=de({},yr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Bd=Xt(Fd),jd=de({},yr,{data:0}),Eu=Xt(jd),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$d={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=$d[s])?!!a[s]:!1}function Vr(){return zd}var d=de({},Or,{key:function(s){if(s.key){var a=Ra[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=va(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(s){return s.type==="keypress"?va(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?va(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),g=Xt(d),w=de({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Xt(w),B=de({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),H=Xt(B),oe=de({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ye=Xt(oe),Mt=de({},eo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Xt(Mt),qt=[9,13,27,32],bt=c&&"CompositionEvent"in window,er=null;c&&"documentMode"in document&&(er=document.documentMode);var qn=c&&"TextEvent"in window&&!er,to=c&&(!bt||er&&8<er&&11>=er),Aa=" ",bv=!1;function Nv(s,a){switch(s){case"keyup":return qt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pa=!1;function bk(s,a){switch(s){case"compositionend":return xv(a);case"keypress":return a.which!==32?null:(bv=!0,Aa);case"textInput":return s=a.data,s===Aa&&bv?null:s;default:return null}}function Nk(s,a){if(Pa)return s==="compositionend"||!bt&&Nv(s,a)?(s=vu(),Pn=ya=zn=null,Pa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return to&&a.locale!=="ko"?null:a.data;default:return null}}var xk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!xk[s.type]:a==="textarea"}function Ov(s,a,u,f){br(f),a=Kd(a,"onChange"),0<a.length&&(u=new wa("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Tu=null,Su=null;function Dk(s){Xv(s,0)}function qd(s){var a=xa(s);if(ta(a))return s}function Ok(s,a){if(s==="change")return a}var Vv=!1;if(c){var $p;if(c){var zp="oninput"in document;if(!zp){var Lv=document.createElement("div");Lv.setAttribute("oninput","return;"),zp=typeof Lv.oninput=="function"}$p=zp}else $p=!1;Vv=$p&&(!document.documentMode||9<document.documentMode)}function Mv(){Tu&&(Tu.detachEvent("onpropertychange",Uv),Su=Tu=null)}function Uv(s){if(s.propertyName==="value"&&qd(Su)){var a=[];Ov(a,Su,s,oa(s)),cu(Dk,a)}}function Vk(s,a,u){s==="focusin"?(Mv(),Tu=a,Su=u,Tu.attachEvent("onpropertychange",Uv)):s==="focusout"&&Mv()}function Lk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qd(Su)}function Mk(s,a){if(s==="click")return qd(a)}function Uk(s,a){if(s==="input"||s==="change")return qd(a)}function Fk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var vr=typeof Object.is=="function"?Object.is:Fk;function Ru(s,a){if(vr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!vr(s[m],a[m]))return!1}return!0}function Fv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bv(s,a){var u=Fv(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Fv(u)}}function jv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?jv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function $v(){for(var s=window,a=Li();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Li(s.document)}return a}function qp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Bk(s){var a=$v(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&jv(u.ownerDocument.documentElement,u)){if(f!==null&&qp(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!s.extend&&_>f&&(m=f,f=_,_=m),m=Bv(u,_);var I=Bv(u,f);m&&I&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==I.node||s.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),_>f?(s.addRange(a),s.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var jk=c&&"documentMode"in document&&11>=document.documentMode,ka=null,Wp=null,Au=null,Gp=!1;function zv(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Gp||ka==null||ka!==Li(f)||(f=ka,"selectionStart"in f&&qp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Au&&Ru(Au,f)||(Au=f,f=Kd(Wp,"onSelect"),0<f.length&&(a=new wa("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=ka)))}function Wd(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ca={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},Hp={},qv={};c&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Gd(s){if(Hp[s])return Hp[s];if(!Ca[s])return s;var a=Ca[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in qv)return Hp[s]=a[u];return s}var Wv=Gd("animationend"),Gv=Gd("animationiteration"),Hv=Gd("animationstart"),Kv=Gd("transitionend"),Qv=new Map,Jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(s,a){Qv.set(s,a),o(a,[s])}for(var Kp=0;Kp<Jv.length;Kp++){var Qp=Jv[Kp],$k=Qp.toLowerCase(),zk=Qp[0].toUpperCase()+Qp.slice(1);Hi($k,"on"+zk)}Hi(Wv,"onAnimationEnd"),Hi(Gv,"onAnimationIteration"),Hi(Hv,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(Kv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pu));function Yv(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,Ed(f,a,void 0,s),s.currentTarget=null}function Xv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],m=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var I=f.length-1;0<=I;I--){var P=f[I],O=P.instance,W=P.currentTarget;if(P=P.listener,O!==_&&m.isPropagationStopped())break e;Yv(m,P,W),_=O}else for(I=0;I<f.length;I++){if(P=f[I],O=P.instance,W=P.currentTarget,P=P.listener,O!==_&&m.isPropagationStopped())break e;Yv(m,P,W),_=O}}}if(dr)throw s=du,dr=!1,du=null,s}function st(s,a){var u=a[rm];u===void 0&&(u=a[rm]=new Set);var f=s+"__bubble";u.has(f)||(Zv(a,s,2,!1),u.add(f))}function Jp(s,a,u){var f=0;a&&(f|=4),Zv(u,s,f,a)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function ku(s){if(!s[Hd]){s[Hd]=!0,r.forEach(function(u){u!=="selectionchange"&&(qk.has(u)||Jp(u,!1,s),Jp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Hd]||(a[Hd]=!0,Jp("selectionchange",!1,a))}}function Zv(s,a,u,f){switch(yu(a)){case 1:var m=ut;break;case 4:m=Bp;break;default:m=_u}u=m.bind(null,a,u,s),m=void 0,!ua||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function Yp(s,a,u,f,m){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var P=f.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(I===4)for(I=f.return;I!==null;){var O=I.tag;if((O===3||O===4)&&(O=I.stateNode.containerInfo,O===m||O.nodeType===8&&O.parentNode===m))return;I=I.return}for(;P!==null;){if(I=no(P),I===null)return;if(O=I.tag,O===5||O===6){f=_=I;continue e}P=P.parentNode}}f=f.return}cu(function(){var W=_,te=oa(u),re=[];e:{var Z=Qv.get(s);if(Z!==void 0){var fe=wa,_e=s;switch(s){case"keypress":if(va(u)===0)break e;case"keydown":case"keyup":fe=g;break;case"focusin":_e="focus",fe=Sa;break;case"focusout":_e="blur",fe=Sa;break;case"beforeblur":case"afterblur":fe=Sa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Ea;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=H;break;case Wv:case Gv:case Hv:fe=li;break;case Kv:fe=Ye;break;case"scroll":fe=jp;break;case"wheel":fe=ze;break;case"copy":case"cut":case"paste":fe=Bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=T}var ye=(a&4)!==0,At=!ye&&s==="scroll",j=ye?Z!==null?Z+"Capture":null:Z;ye=[];for(var M=W,z;M!==null;){z=M;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,j!==null&&(se=Rt(M,j),se!=null&&ye.push(Cu(M,se,z)))),At)break;M=M.return}0<ye.length&&(Z=new fe(Z,_e,null,u,te),re.push({event:Z,listeners:ye}))}}if((a&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",Z&&u!==zs&&(_e=u.relatedTarget||u.fromElement)&&(no(_e)||_e[ui]))break e;if((fe||Z)&&(Z=te.window===te?te:(Z=te.ownerDocument)?Z.defaultView||Z.parentWindow:window,fe?(_e=u.relatedTarget||u.toElement,fe=W,_e=_e?no(_e):null,_e!==null&&(At=hr(_e),_e!==At||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(fe=null,_e=W),fe!==_e)){if(ye=Ea,se="onMouseLeave",j="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(ye=T,se="onPointerLeave",j="onPointerEnter",M="pointer"),At=fe==null?Z:xa(fe),z=_e==null?Z:xa(_e),Z=new ye(se,M+"leave",fe,u,te),Z.target=At,Z.relatedTarget=z,se=null,no(te)===W&&(ye=new ye(j,M+"enter",_e,u,te),ye.target=z,ye.relatedTarget=At,se=ye),At=se,fe&&_e)t:{for(ye=fe,j=_e,M=0,z=ye;z;z=ba(z))M++;for(z=0,se=j;se;se=ba(se))z++;for(;0<M-z;)ye=ba(ye),M--;for(;0<z-M;)j=ba(j),z--;for(;M--;){if(ye===j||j!==null&&ye===j.alternate)break t;ye=ba(ye),j=ba(j)}ye=null}else ye=null;fe!==null&&ew(re,Z,fe,ye,!1),_e!==null&&At!==null&&ew(re,At,_e,ye,!0)}}e:{if(Z=W?xa(W):window,fe=Z.nodeName&&Z.nodeName.toLowerCase(),fe==="select"||fe==="input"&&Z.type==="file")var Ie=Ok;else if(Dv(Z))if(Vv)Ie=Uk;else{Ie=Lk;var Ae=Vk}else(fe=Z.nodeName)&&fe.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(Ie=Mk);if(Ie&&(Ie=Ie(s,W))){Ov(re,Ie,u,te);break e}Ae&&Ae(s,Z,W),s==="focusout"&&(Ae=Z._wrapperState)&&Ae.controlled&&Z.type==="number"&&ra(Z,"number",Z.value)}switch(Ae=W?xa(W):window,s){case"focusin":(Dv(Ae)||Ae.contentEditable==="true")&&(ka=Ae,Wp=W,Au=null);break;case"focusout":Au=Wp=ka=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,zv(re,u,te);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":zv(re,u,te)}var Pe;if(bt)e:{switch(s){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Pa?Nv(s,u)&&(ke="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(ke="onCompositionStart");ke&&(to&&u.locale!=="ko"&&(Pa||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Pa&&(Pe=vu()):(zn=te,ya="value"in zn?zn.value:zn.textContent,Pa=!0)),Ae=Kd(W,ke),0<Ae.length&&(ke=new Eu(ke,s,null,u,te),re.push({event:ke,listeners:Ae}),Pe?ke.data=Pe:(Pe=xv(u),Pe!==null&&(ke.data=Pe)))),(Pe=qn?bk(s,u):Nk(s,u))&&(W=Kd(W,"onBeforeInput"),0<W.length&&(te=new Eu("onBeforeInput","beforeinput",null,u,te),re.push({event:te,listeners:W}),te.data=Pe))}Xv(re,a)})}function Cu(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Kd(s,a){for(var u=a+"Capture",f=[];s!==null;){var m=s,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=Rt(s,u),_!=null&&f.unshift(Cu(s,_,m)),_=Rt(s,a),_!=null&&f.push(Cu(s,_,m))),s=s.return}return f}function ba(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ew(s,a,u,f,m){for(var _=a._reactName,I=[];u!==null&&u!==f;){var P=u,O=P.alternate,W=P.stateNode;if(O!==null&&O===f)break;P.tag===5&&W!==null&&(P=W,m?(O=Rt(u,_),O!=null&&I.unshift(Cu(u,O,P))):m||(O=Rt(u,_),O!=null&&I.push(Cu(u,O,P)))),u=u.return}I.length!==0&&s.push({event:a,listeners:I})}var Wk=/\r\n?/g,Gk=/\u0000|\uFFFD/g;function tw(s){return(typeof s=="string"?s:""+s).replace(Wk,`
`).replace(Gk,"")}function Qd(s,a,u){if(a=tw(a),tw(s)!==a&&u)throw Error(t(425))}function Jd(){}var Xp=null,Zp=null;function em(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,Hk=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,Kk=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(s){return nw.resolve(null).then(s).catch(Qk)}:tm;function Qk(s){setTimeout(function(){throw s})}function nm(s,a){var u=a,f=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){s.removeChild(m),_r(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);_r(a)}function Ki(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function rw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Na=Math.random().toString(36).slice(2),Lr="__reactFiber$"+Na,bu="__reactProps$"+Na,ui="__reactContainer$"+Na,rm="__reactEvents$"+Na,Jk="__reactListeners$"+Na,Yk="__reactHandles$"+Na;function no(s){var a=s[Lr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[ui]||u[Lr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=rw(s);s!==null;){if(u=s[Lr])return u;s=rw(s)}return a}s=u,u=s.parentNode}return null}function Nu(s){return s=s[Lr]||s[ui],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function xa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Yd(s){return s[bu]||null}var im=[],Da=-1;function Qi(s){return{current:s}}function ot(s){0>Da||(s.current=im[Da],im[Da]=null,Da--)}function rt(s,a){Da++,im[Da]=s.current,s.current=a}var Ji={},an=Qi(Ji),kn=Qi(!1),ro=Ji;function Oa(s,a){var u=s.type.contextTypes;if(!u)return Ji;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=a[_];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function Cn(s){return s=s.childContextTypes,s!=null}function Xd(){ot(kn),ot(an)}function iw(s,a,u){if(an.current!==Ji)throw Error(t(168));rt(an,a),rt(kn,u)}function sw(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,Ke(s)||"Unknown",m));return de({},u,f)}function Zd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ji,ro=an.current,rt(an,s),rt(kn,kn.current),!0}function ow(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=sw(s,a,ro),f.__reactInternalMemoizedMergedChildContext=s,ot(kn),ot(an),rt(an,s)):ot(kn),rt(kn,u)}var ci=null,eh=!1,sm=!1;function aw(s){ci===null?ci=[s]:ci.push(s)}function Xk(s){eh=!0,aw(s)}function Yi(){if(!sm&&ci!==null){sm=!0;var s=0,a=je;try{var u=ci;for(je=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}ci=null,eh=!1}catch(m){throw ci!==null&&(ci=ci.slice(s+1)),fa(Ks,Yi),m}finally{je=a,sm=!1}}return null}var Va=[],La=0,th=null,nh=0,tr=[],nr=0,io=null,di=1,hi="";function so(s,a){Va[La++]=nh,Va[La++]=th,th=s,nh=a}function lw(s,a,u){tr[nr++]=di,tr[nr++]=hi,tr[nr++]=io,io=s;var f=di;s=hi;var m=32-pn(f)-1;f&=~(1<<m),u+=1;var _=32-pn(a)+m;if(30<_){var I=m-m%5;_=(f&(1<<I)-1).toString(32),f>>=I,m-=I,di=1<<32-pn(a)+m|u<<m|f,hi=_+s}else di=1<<_|u<<m|f,hi=s}function om(s){s.return!==null&&(so(s,1),lw(s,1,0))}function am(s){for(;s===th;)th=Va[--La],Va[La]=null,nh=Va[--La],Va[La]=null;for(;s===io;)io=tr[--nr],tr[nr]=null,hi=tr[--nr],tr[nr]=null,di=tr[--nr],tr[nr]=null}var Wn=null,Gn=null,ct=!1,wr=null;function uw(s,a){var u=or(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function cw(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Wn=s,Gn=Ki(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Wn=s,Gn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=io!==null?{id:di,overflow:hi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=or(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Wn=s,Gn=null,!0):!1;default:return!1}}function lm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function um(s){if(ct){var a=Gn;if(a){var u=a;if(!cw(s,a)){if(lm(s))throw Error(t(418));a=Ki(u.nextSibling);var f=Wn;a&&cw(s,a)?uw(f,u):(s.flags=s.flags&-4097|2,ct=!1,Wn=s)}}else{if(lm(s))throw Error(t(418));s.flags=s.flags&-4097|2,ct=!1,Wn=s}}}function dw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Wn=s}function rh(s){if(s!==Wn)return!1;if(!ct)return dw(s),ct=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!em(s.type,s.memoizedProps)),a&&(a=Gn)){if(lm(s))throw hw(),Error(t(418));for(;a;)uw(s,a),a=Ki(a.nextSibling)}if(dw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Gn=Ki(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Gn=null}}else Gn=Wn?Ki(s.stateNode.nextSibling):null;return!0}function hw(){for(var s=Gn;s;)s=Ki(s.nextSibling)}function Ma(){Gn=Wn=null,ct=!1}function cm(s){wr===null?wr=[s]:wr.push(s)}var Zk=ne.ReactCurrentBatchConfig;function xu(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var m=f,_=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(I){var P=m.refs;I===null?delete P[_]:P[_]=I},a._stringRef=_,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function ih(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function fw(s){var a=s._init;return a(s._payload)}function pw(s){function a(j,M){if(s){var z=j.deletions;z===null?(j.deletions=[M],j.flags|=16):z.push(M)}}function u(j,M){if(!s)return null;for(;M!==null;)a(j,M),M=M.sibling;return null}function f(j,M){for(j=new Map;M!==null;)M.key!==null?j.set(M.key,M):j.set(M.index,M),M=M.sibling;return j}function m(j,M){return j=ss(j,M),j.index=0,j.sibling=null,j}function _(j,M,z){return j.index=z,s?(z=j.alternate,z!==null?(z=z.index,z<M?(j.flags|=2,M):z):(j.flags|=2,M)):(j.flags|=1048576,M)}function I(j){return s&&j.alternate===null&&(j.flags|=2),j}function P(j,M,z,se){return M===null||M.tag!==6?(M=tg(z,j.mode,se),M.return=j,M):(M=m(M,z),M.return=j,M)}function O(j,M,z,se){var Ie=z.type;return Ie===b?te(j,M,z.props.children,se,z.key):M!==null&&(M.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===St&&fw(Ie)===M.type)?(se=m(M,z.props),se.ref=xu(j,M,z),se.return=j,se):(se=kh(z.type,z.key,z.props,null,j.mode,se),se.ref=xu(j,M,z),se.return=j,se)}function W(j,M,z,se){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=ng(z,j.mode,se),M.return=j,M):(M=m(M,z.children||[]),M.return=j,M)}function te(j,M,z,se,Ie){return M===null||M.tag!==7?(M=po(z,j.mode,se,Ie),M.return=j,M):(M=m(M,z),M.return=j,M)}function re(j,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return M=tg(""+M,j.mode,z),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case he:return z=kh(M.type,M.key,M.props,null,j.mode,z),z.ref=xu(j,null,M),z.return=j,z;case ue:return M=ng(M,j.mode,z),M.return=j,M;case St:var se=M._init;return re(j,se(M._payload),z)}if(ei(M)||we(M))return M=po(M,j.mode,z,null),M.return=j,M;ih(j,M)}return null}function Z(j,M,z,se){var Ie=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ie!==null?null:P(j,M,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case he:return z.key===Ie?O(j,M,z,se):null;case ue:return z.key===Ie?W(j,M,z,se):null;case St:return Ie=z._init,Z(j,M,Ie(z._payload),se)}if(ei(z)||we(z))return Ie!==null?null:te(j,M,z,se,null);ih(j,z)}return null}function fe(j,M,z,se,Ie){if(typeof se=="string"&&se!==""||typeof se=="number")return j=j.get(z)||null,P(M,j,""+se,Ie);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case he:return j=j.get(se.key===null?z:se.key)||null,O(M,j,se,Ie);case ue:return j=j.get(se.key===null?z:se.key)||null,W(M,j,se,Ie);case St:var Ae=se._init;return fe(j,M,z,Ae(se._payload),Ie)}if(ei(se)||we(se))return j=j.get(z)||null,te(M,j,se,Ie,null);ih(M,se)}return null}function _e(j,M,z,se){for(var Ie=null,Ae=null,Pe=M,ke=M=0,Ht=null;Pe!==null&&ke<z.length;ke++){Pe.index>ke?(Ht=Pe,Pe=null):Ht=Pe.sibling;var Ge=Z(j,Pe,z[ke],se);if(Ge===null){Pe===null&&(Pe=Ht);break}s&&Pe&&Ge.alternate===null&&a(j,Pe),M=_(Ge,M,ke),Ae===null?Ie=Ge:Ae.sibling=Ge,Ae=Ge,Pe=Ht}if(ke===z.length)return u(j,Pe),ct&&so(j,ke),Ie;if(Pe===null){for(;ke<z.length;ke++)Pe=re(j,z[ke],se),Pe!==null&&(M=_(Pe,M,ke),Ae===null?Ie=Pe:Ae.sibling=Pe,Ae=Pe);return ct&&so(j,ke),Ie}for(Pe=f(j,Pe);ke<z.length;ke++)Ht=fe(Pe,j,ke,z[ke],se),Ht!==null&&(s&&Ht.alternate!==null&&Pe.delete(Ht.key===null?ke:Ht.key),M=_(Ht,M,ke),Ae===null?Ie=Ht:Ae.sibling=Ht,Ae=Ht);return s&&Pe.forEach(function(os){return a(j,os)}),ct&&so(j,ke),Ie}function ye(j,M,z,se){var Ie=we(z);if(typeof Ie!="function")throw Error(t(150));if(z=Ie.call(z),z==null)throw Error(t(151));for(var Ae=Ie=null,Pe=M,ke=M=0,Ht=null,Ge=z.next();Pe!==null&&!Ge.done;ke++,Ge=z.next()){Pe.index>ke?(Ht=Pe,Pe=null):Ht=Pe.sibling;var os=Z(j,Pe,Ge.value,se);if(os===null){Pe===null&&(Pe=Ht);break}s&&Pe&&os.alternate===null&&a(j,Pe),M=_(os,M,ke),Ae===null?Ie=os:Ae.sibling=os,Ae=os,Pe=Ht}if(Ge.done)return u(j,Pe),ct&&so(j,ke),Ie;if(Pe===null){for(;!Ge.done;ke++,Ge=z.next())Ge=re(j,Ge.value,se),Ge!==null&&(M=_(Ge,M,ke),Ae===null?Ie=Ge:Ae.sibling=Ge,Ae=Ge);return ct&&so(j,ke),Ie}for(Pe=f(j,Pe);!Ge.done;ke++,Ge=z.next())Ge=fe(Pe,j,ke,Ge.value,se),Ge!==null&&(s&&Ge.alternate!==null&&Pe.delete(Ge.key===null?ke:Ge.key),M=_(Ge,M,ke),Ae===null?Ie=Ge:Ae.sibling=Ge,Ae=Ge);return s&&Pe.forEach(function(xC){return a(j,xC)}),ct&&so(j,ke),Ie}function At(j,M,z,se){if(typeof z=="object"&&z!==null&&z.type===b&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case he:e:{for(var Ie=z.key,Ae=M;Ae!==null;){if(Ae.key===Ie){if(Ie=z.type,Ie===b){if(Ae.tag===7){u(j,Ae.sibling),M=m(Ae,z.props.children),M.return=j,j=M;break e}}else if(Ae.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===St&&fw(Ie)===Ae.type){u(j,Ae.sibling),M=m(Ae,z.props),M.ref=xu(j,Ae,z),M.return=j,j=M;break e}u(j,Ae);break}else a(j,Ae);Ae=Ae.sibling}z.type===b?(M=po(z.props.children,j.mode,se,z.key),M.return=j,j=M):(se=kh(z.type,z.key,z.props,null,j.mode,se),se.ref=xu(j,M,z),se.return=j,j=se)}return I(j);case ue:e:{for(Ae=z.key;M!==null;){if(M.key===Ae)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){u(j,M.sibling),M=m(M,z.children||[]),M.return=j,j=M;break e}else{u(j,M);break}else a(j,M);M=M.sibling}M=ng(z,j.mode,se),M.return=j,j=M}return I(j);case St:return Ae=z._init,At(j,M,Ae(z._payload),se)}if(ei(z))return _e(j,M,z,se);if(we(z))return ye(j,M,z,se);ih(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,M!==null&&M.tag===6?(u(j,M.sibling),M=m(M,z),M.return=j,j=M):(u(j,M),M=tg(z,j.mode,se),M.return=j,j=M),I(j)):u(j,M)}return At}var Ua=pw(!0),mw=pw(!1),sh=Qi(null),oh=null,Fa=null,dm=null;function hm(){dm=Fa=oh=null}function fm(s){var a=sh.current;ot(sh),s._currentValue=a}function pm(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function Ba(s,a){oh=s,dm=Fa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(bn=!0),s.firstContext=null)}function rr(s){var a=s._currentValue;if(dm!==s)if(s={context:s,memoizedValue:a,next:null},Fa===null){if(oh===null)throw Error(t(308));Fa=s,oh.dependencies={lanes:0,firstContext:s}}else Fa=Fa.next=s;return a}var oo=null;function mm(s){oo===null?oo=[s]:oo.push(s)}function gw(s,a,u,f){var m=a.interleaved;return m===null?(u.next=u,mm(a)):(u.next=m.next,m.next=u),a.interleaved=u,fi(s,f)}function fi(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Xi=!1;function gm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _w(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function pi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Zi(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,fi(s,u)}return m=f.interleaved,m===null?(a.next=a,mm(f)):(a.next=m.next,m.next=a),f.interleaved=a,fi(s,u)}function ah(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,$i(s,u)}}function yw(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=I:_=_.next=I,u=u.next}while(u!==null);_===null?m=_=a:_=_.next=a}else m=_=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function lh(s,a,u,f){var m=s.updateQueue;Xi=!1;var _=m.firstBaseUpdate,I=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var O=P,W=O.next;O.next=null,I===null?_=W:I.next=W,I=O;var te=s.alternate;te!==null&&(te=te.updateQueue,P=te.lastBaseUpdate,P!==I&&(P===null?te.firstBaseUpdate=W:P.next=W,te.lastBaseUpdate=O))}if(_!==null){var re=m.baseState;I=0,te=W=O=null,P=_;do{var Z=P.lane,fe=P.eventTime;if((f&Z)===Z){te!==null&&(te=te.next={eventTime:fe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var _e=s,ye=P;switch(Z=a,fe=u,ye.tag){case 1:if(_e=ye.payload,typeof _e=="function"){re=_e.call(fe,re,Z);break e}re=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=ye.payload,Z=typeof _e=="function"?_e.call(fe,re,Z):_e,Z==null)break e;re=de({},re,Z);break e;case 2:Xi=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,Z=m.effects,Z===null?m.effects=[P]:Z.push(P))}else fe={eventTime:fe,lane:Z,tag:P.tag,payload:P.payload,callback:P.callback,next:null},te===null?(W=te=fe,O=re):te=te.next=fe,I|=Z;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;Z=P,P=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);if(te===null&&(O=re),m.baseState=O,m.firstBaseUpdate=W,m.lastBaseUpdate=te,a=m.shared.interleaved,a!==null){m=a;do I|=m.lane,m=m.next;while(m!==a)}else _===null&&(m.shared.lanes=0);uo|=I,s.lanes=I,s.memoizedState=re}}function vw(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Du={},Mr=Qi(Du),Ou=Qi(Du),Vu=Qi(Du);function ao(s){if(s===Du)throw Error(t(174));return s}function _m(s,a){switch(rt(Vu,a),rt(Ou,s),rt(Mr,Du),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Lt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Lt(a,s)}ot(Mr),rt(Mr,a)}function ja(){ot(Mr),ot(Ou),ot(Vu)}function ww(s){ao(Vu.current);var a=ao(Mr.current),u=Lt(a,s.type);a!==u&&(rt(Ou,s),rt(Mr,u))}function ym(s){Ou.current===s&&(ot(Mr),ot(Ou))}var mt=Qi(0);function uh(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var vm=[];function wm(){for(var s=0;s<vm.length;s++)vm[s]._workInProgressVersionPrimary=null;vm.length=0}var ch=ne.ReactCurrentDispatcher,Im=ne.ReactCurrentBatchConfig,lo=0,gt=null,Ut=null,Wt=null,dh=!1,Lu=!1,Mu=0,eC=0;function ln(){throw Error(t(321))}function Em(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!vr(s[u],a[u]))return!1;return!0}function Tm(s,a,u,f,m,_){if(lo=_,gt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ch.current=s===null||s.memoizedState===null?iC:sC,s=u(f,m),Lu){_=0;do{if(Lu=!1,Mu=0,25<=_)throw Error(t(301));_+=1,Wt=Ut=null,a.updateQueue=null,ch.current=oC,s=u(f,m)}while(Lu)}if(ch.current=ph,a=Ut!==null&&Ut.next!==null,lo=0,Wt=Ut=gt=null,dh=!1,a)throw Error(t(300));return s}function Sm(){var s=Mu!==0;return Mu=0,s}function Ur(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?gt.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function ir(){if(Ut===null){var s=gt.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var a=Wt===null?gt.memoizedState:Wt.next;if(a!==null)Wt=a,Ut=s;else{if(s===null)throw Error(t(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Wt===null?gt.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function Uu(s,a){return typeof a=="function"?a(s):a}function Rm(s){var a=ir(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=Ut,m=f.baseQueue,_=u.pending;if(_!==null){if(m!==null){var I=m.next;m.next=_.next,_.next=I}f.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,f=f.baseState;var P=I=null,O=null,W=_;do{var te=W.lane;if((lo&te)===te)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),f=W.hasEagerState?W.eagerState:s(f,W.action);else{var re={lane:te,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(P=O=re,I=f):O=O.next=re,gt.lanes|=te,uo|=te}W=W.next}while(W!==null&&W!==_);O===null?I=f:O.next=P,vr(f,a.memoizedState)||(bn=!0),a.memoizedState=f,a.baseState=I,a.baseQueue=O,u.lastRenderedState=f}if(s=u.interleaved,s!==null){m=s;do _=m.lane,gt.lanes|=_,uo|=_,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Am(s){var a=ir(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,m=u.pending,_=a.memoizedState;if(m!==null){u.pending=null;var I=m=m.next;do _=s(_,I.action),I=I.next;while(I!==m);vr(_,a.memoizedState)||(bn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,f]}function Iw(){}function Ew(s,a){var u=gt,f=ir(),m=a(),_=!vr(f.memoizedState,m);if(_&&(f.memoizedState=m,bn=!0),f=f.queue,Pm(Rw.bind(null,u,f,s),[s]),f.getSnapshot!==a||_||Wt!==null&&Wt.memoizedState.tag&1){if(u.flags|=2048,Fu(9,Sw.bind(null,u,f,m,a),void 0,null),Gt===null)throw Error(t(349));(lo&30)!==0||Tw(u,a,m)}return m}function Tw(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Sw(s,a,u,f){a.value=u,a.getSnapshot=f,Aw(a)&&Pw(s)}function Rw(s,a,u){return u(function(){Aw(a)&&Pw(s)})}function Aw(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!vr(s,u)}catch{return!0}}function Pw(s){var a=fi(s,1);a!==null&&Sr(a,s,1,-1)}function kw(s){var a=Ur();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:s},a.queue=s,s=s.dispatch=rC.bind(null,gt,s),[a.memoizedState,s]}function Fu(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=gt.updateQueue,a===null?(a={lastEffect:null,stores:null},gt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function Cw(){return ir().memoizedState}function hh(s,a,u,f){var m=Ur();gt.flags|=s,m.memoizedState=Fu(1|a,u,void 0,f===void 0?null:f)}function fh(s,a,u,f){var m=ir();f=f===void 0?null:f;var _=void 0;if(Ut!==null){var I=Ut.memoizedState;if(_=I.destroy,f!==null&&Em(f,I.deps)){m.memoizedState=Fu(a,u,_,f);return}}gt.flags|=s,m.memoizedState=Fu(1|a,u,_,f)}function bw(s,a){return hh(8390656,8,s,a)}function Pm(s,a){return fh(2048,8,s,a)}function Nw(s,a){return fh(4,2,s,a)}function xw(s,a){return fh(4,4,s,a)}function Dw(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ow(s,a,u){return u=u!=null?u.concat([s]):null,fh(4,4,Dw.bind(null,a,s),u)}function km(){}function Vw(s,a){var u=ir();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Em(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function Lw(s,a){var u=ir();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Em(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function Mw(s,a,u){return(lo&21)===0?(s.baseState&&(s.baseState=!1,bn=!0),s.memoizedState=u):(vr(u,a)||(u=Ys(),gt.lanes|=u,uo|=u,s.baseState=!0),a)}function tC(s,a){var u=je;je=u!==0&&4>u?u:4,s(!0);var f=Im.transition;Im.transition={};try{s(!1),a()}finally{je=u,Im.transition=f}}function Uw(){return ir().memoizedState}function nC(s,a,u){var f=rs(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Fw(s))Bw(a,u);else if(u=gw(s,a,u,f),u!==null){var m=_n();Sr(u,s,f,m),jw(u,a,f)}}function rC(s,a,u){var f=rs(s),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fw(s))Bw(a,m);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var I=a.lastRenderedState,P=_(I,u);if(m.hasEagerState=!0,m.eagerState=P,vr(P,I)){var O=a.interleaved;O===null?(m.next=m,mm(a)):(m.next=O.next,O.next=m),a.interleaved=m;return}}catch{}finally{}u=gw(s,a,m,f),u!==null&&(m=_n(),Sr(u,s,f,m),jw(u,a,f))}}function Fw(s){var a=s.alternate;return s===gt||a!==null&&a===gt}function Bw(s,a){Lu=dh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function jw(s,a,u){if((u&4194240)!==0){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,$i(s,u)}}var ph={readContext:rr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},iC={readContext:rr,useCallback:function(s,a){return Ur().memoizedState=[s,a===void 0?null:a],s},useContext:rr,useEffect:bw,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,hh(4194308,4,Dw.bind(null,a,s),u)},useLayoutEffect:function(s,a){return hh(4194308,4,s,a)},useInsertionEffect:function(s,a){return hh(4,2,s,a)},useMemo:function(s,a){var u=Ur();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=Ur();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=nC.bind(null,gt,s),[f.memoizedState,s]},useRef:function(s){var a=Ur();return s={current:s},a.memoizedState=s},useState:kw,useDebugValue:km,useDeferredValue:function(s){return Ur().memoizedState=s},useTransition:function(){var s=kw(!1),a=s[0];return s=tC.bind(null,s[1]),Ur().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=gt,m=Ur();if(ct){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Gt===null)throw Error(t(349));(lo&30)!==0||Tw(f,a,u)}m.memoizedState=u;var _={value:u,getSnapshot:a};return m.queue=_,bw(Rw.bind(null,f,_,s),[s]),f.flags|=2048,Fu(9,Sw.bind(null,f,_,u,a),void 0,null),u},useId:function(){var s=Ur(),a=Gt.identifierPrefix;if(ct){var u=hi,f=di;u=(f&~(1<<32-pn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Mu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=eC++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},sC={readContext:rr,useCallback:Vw,useContext:rr,useEffect:Pm,useImperativeHandle:Ow,useInsertionEffect:Nw,useLayoutEffect:xw,useMemo:Lw,useReducer:Rm,useRef:Cw,useState:function(){return Rm(Uu)},useDebugValue:km,useDeferredValue:function(s){var a=ir();return Mw(a,Ut.memoizedState,s)},useTransition:function(){var s=Rm(Uu)[0],a=ir().memoizedState;return[s,a]},useMutableSource:Iw,useSyncExternalStore:Ew,useId:Uw,unstable_isNewReconciler:!1},oC={readContext:rr,useCallback:Vw,useContext:rr,useEffect:Pm,useImperativeHandle:Ow,useInsertionEffect:Nw,useLayoutEffect:xw,useMemo:Lw,useReducer:Am,useRef:Cw,useState:function(){return Am(Uu)},useDebugValue:km,useDeferredValue:function(s){var a=ir();return Ut===null?a.memoizedState=s:Mw(a,Ut.memoizedState,s)},useTransition:function(){var s=Am(Uu)[0],a=ir().memoizedState;return[s,a]},useMutableSource:Iw,useSyncExternalStore:Ew,useId:Uw,unstable_isNewReconciler:!1};function Ir(s,a){if(s&&s.defaultProps){a=de({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function Cm(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:de({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var mh={isMounted:function(s){return(s=s._reactInternals)?hr(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=_n(),m=rs(s),_=pi(f,m);_.payload=a,u!=null&&(_.callback=u),a=Zi(s,_,m),a!==null&&(Sr(a,s,m,f),ah(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=_n(),m=rs(s),_=pi(f,m);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=Zi(s,_,m),a!==null&&(Sr(a,s,m,f),ah(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=_n(),f=rs(s),m=pi(u,f);m.tag=2,a!=null&&(m.callback=a),a=Zi(s,m,f),a!==null&&(Sr(a,s,f,u),ah(a,s,f))}};function $w(s,a,u,f,m,_,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,_,I):a.prototype&&a.prototype.isPureReactComponent?!Ru(u,f)||!Ru(m,_):!0}function zw(s,a,u){var f=!1,m=Ji,_=a.contextType;return typeof _=="object"&&_!==null?_=rr(_):(m=Cn(a)?ro:an.current,f=a.contextTypes,_=(f=f!=null)?Oa(s,m):Ji),a=new a(u,_),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=mh,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=_),a}function qw(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&mh.enqueueReplaceState(a,a.state,null)}function bm(s,a,u,f){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},gm(s);var _=a.contextType;typeof _=="object"&&_!==null?m.context=rr(_):(_=Cn(a)?ro:an.current,m.context=Oa(s,_)),m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Cm(s,a,_,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&mh.enqueueReplaceState(m,m.state,null),lh(s,u,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function $a(s,a){try{var u="",f=a;do u+=Ve(f),f=f.return;while(f);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:a,stack:m,digest:null}}function Nm(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function xm(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var aC=typeof WeakMap=="function"?WeakMap:Map;function Ww(s,a,u){u=pi(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Eh||(Eh=!0,Hm=f),xm(s,a)},u}function Gw(s,a,u){u=pi(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){xm(s,a)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){xm(s,a),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function Hw(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new aC;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),s=IC.bind(null,s,a,u),a.then(s,s))}function Kw(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Qw(s,a,u,f,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=pi(-1,1),a.tag=2,Zi(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var lC=ne.ReactCurrentOwner,bn=!1;function gn(s,a,u,f){a.child=s===null?mw(a,null,u,f):Ua(a,s.child,u,f)}function Jw(s,a,u,f,m){u=u.render;var _=a.ref;return Ba(a,m),f=Tm(s,a,u,f,_,m),u=Sm(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,mi(s,a,m)):(ct&&u&&om(a),a.flags|=1,gn(s,a,f,m),a.child)}function Yw(s,a,u,f,m){if(s===null){var _=u.type;return typeof _=="function"&&!eg(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,Xw(s,a,_,f,m)):(s=kh(u.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(_=s.child,(s.lanes&m)===0){var I=_.memoizedProps;if(u=u.compare,u=u!==null?u:Ru,u(I,f)&&s.ref===a.ref)return mi(s,a,m)}return a.flags|=1,s=ss(_,f),s.ref=a.ref,s.return=a,a.child=s}function Xw(s,a,u,f,m){if(s!==null){var _=s.memoizedProps;if(Ru(_,f)&&s.ref===a.ref)if(bn=!1,a.pendingProps=f=_,(s.lanes&m)!==0)(s.flags&131072)!==0&&(bn=!0);else return a.lanes=s.lanes,mi(s,a,m)}return Dm(s,a,u,f,m)}function Zw(s,a,u){var f=a.pendingProps,m=f.children,_=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(qa,Hn),Hn|=u;else{if((u&1073741824)===0)return s=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,rt(qa,Hn),Hn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,rt(qa,Hn),Hn|=f}else _!==null?(f=_.baseLanes|u,a.memoizedState=null):f=u,rt(qa,Hn),Hn|=f;return gn(s,a,m,u),a.child}function eI(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Dm(s,a,u,f,m){var _=Cn(u)?ro:an.current;return _=Oa(a,_),Ba(a,m),u=Tm(s,a,u,f,_,m),f=Sm(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,mi(s,a,m)):(ct&&f&&om(a),a.flags|=1,gn(s,a,u,m),a.child)}function tI(s,a,u,f,m){if(Cn(u)){var _=!0;Zd(a)}else _=!1;if(Ba(a,m),a.stateNode===null)_h(s,a),zw(a,u,f),bm(a,u,f,m),f=!0;else if(s===null){var I=a.stateNode,P=a.memoizedProps;I.props=P;var O=I.context,W=u.contextType;typeof W=="object"&&W!==null?W=rr(W):(W=Cn(u)?ro:an.current,W=Oa(a,W));var te=u.getDerivedStateFromProps,re=typeof te=="function"||typeof I.getSnapshotBeforeUpdate=="function";re||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(P!==f||O!==W)&&qw(a,I,f,W),Xi=!1;var Z=a.memoizedState;I.state=Z,lh(a,f,I,m),O=a.memoizedState,P!==f||Z!==O||kn.current||Xi?(typeof te=="function"&&(Cm(a,u,te,f),O=a.memoizedState),(P=Xi||$w(a,u,P,f,Z,O,W))?(re||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=O),I.props=f,I.state=O,I.context=W,f=P):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{I=a.stateNode,_w(s,a),P=a.memoizedProps,W=a.type===a.elementType?P:Ir(a.type,P),I.props=W,re=a.pendingProps,Z=I.context,O=u.contextType,typeof O=="object"&&O!==null?O=rr(O):(O=Cn(u)?ro:an.current,O=Oa(a,O));var fe=u.getDerivedStateFromProps;(te=typeof fe=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(P!==re||Z!==O)&&qw(a,I,f,O),Xi=!1,Z=a.memoizedState,I.state=Z,lh(a,f,I,m);var _e=a.memoizedState;P!==re||Z!==_e||kn.current||Xi?(typeof fe=="function"&&(Cm(a,u,fe,f),_e=a.memoizedState),(W=Xi||$w(a,u,W,f,Z,_e,O)||!1)?(te||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(f,_e,O),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(f,_e,O)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||P===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=_e),I.props=f,I.state=_e,I.context=O,f=W):(typeof I.componentDidUpdate!="function"||P===s.memoizedProps&&Z===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Z===s.memoizedState||(a.flags|=1024),f=!1)}return Om(s,a,u,f,_,m)}function Om(s,a,u,f,m,_){eI(s,a);var I=(a.flags&128)!==0;if(!f&&!I)return m&&ow(a,u,!1),mi(s,a,_);f=a.stateNode,lC.current=a;var P=I&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&I?(a.child=Ua(a,s.child,null,_),a.child=Ua(a,null,P,_)):gn(s,a,P,_),a.memoizedState=f.state,m&&ow(a,u,!0),a.child}function nI(s){var a=s.stateNode;a.pendingContext?iw(s,a.pendingContext,a.pendingContext!==a.context):a.context&&iw(s,a.context,!1),_m(s,a.containerInfo)}function rI(s,a,u,f,m){return Ma(),cm(m),a.flags|=256,gn(s,a,u,f),a.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Lm(s){return{baseLanes:s,cachePool:null,transitions:null}}function iI(s,a,u){var f=a.pendingProps,m=mt.current,_=!1,I=(a.flags&128)!==0,P;if((P=I)||(P=s!==null&&s.memoizedState===null?!1:(m&2)!==0),P?(_=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),rt(mt,m&1),s===null)return um(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=f.children,s=f.fallback,_?(f=a.mode,_=a.child,I={mode:"hidden",children:I},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=I):_=Ch(I,f,0,null),s=po(s,f,u,null),_.return=a,s.return=a,_.sibling=s,a.child=_,a.child.memoizedState=Lm(u),a.memoizedState=Vm,s):Mm(a,I));if(m=s.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return uC(s,a,I,f,P,m,u);if(_){_=f.fallback,I=a.mode,m=s.child,P=m.sibling;var O={mode:"hidden",children:f.children};return(I&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=O,a.deletions=null):(f=ss(m,O),f.subtreeFlags=m.subtreeFlags&14680064),P!==null?_=ss(P,_):(_=po(_,I,u,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,I=s.child.memoizedState,I=I===null?Lm(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=s.childLanes&~u,a.memoizedState=Vm,f}return _=s.child,s=_.sibling,f=ss(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function Mm(s,a){return a=Ch({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function gh(s,a,u,f){return f!==null&&cm(f),Ua(a,s.child,null,u),s=Mm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function uC(s,a,u,f,m,_,I){if(u)return a.flags&256?(a.flags&=-257,f=Nm(Error(t(422))),gh(s,a,I,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(_=f.fallback,m=a.mode,f=Ch({mode:"visible",children:f.children},m,0,null),_=po(_,m,I,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Ua(a,s.child,null,I),a.child.memoizedState=Lm(I),a.memoizedState=Vm,_);if((a.mode&1)===0)return gh(s,a,I,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var P=f.dgst;return f=P,_=Error(t(419)),f=Nm(_,f,void 0),gh(s,a,I,f)}if(P=(I&s.childLanes)!==0,bn||P){if(f=Gt,f!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|I))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,fi(s,m),Sr(f,s,m,-1))}return Zm(),f=Nm(Error(t(421))),gh(s,a,I,f)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=EC.bind(null,s),m._reactRetry=a,null):(s=_.treeContext,Gn=Ki(m.nextSibling),Wn=a,ct=!0,wr=null,s!==null&&(tr[nr++]=di,tr[nr++]=hi,tr[nr++]=io,di=s.id,hi=s.overflow,io=a),a=Mm(a,f.children),a.flags|=4096,a)}function sI(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),pm(s.return,a,u)}function Um(s,a,u,f,m){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=m)}function oI(s,a,u){var f=a.pendingProps,m=f.revealOrder,_=f.tail;if(gn(s,a,f.children,u),f=mt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sI(s,u,a);else if(s.tag===19)sI(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(rt(mt,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&uh(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Um(a,!1,m,u,_);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&uh(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Um(a,!0,u,null,_);break;case"together":Um(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _h(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function mi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),uo|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=ss(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ss(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function cC(s,a,u){switch(a.tag){case 3:nI(a),Ma();break;case 5:ww(a);break;case 1:Cn(a.type)&&Zd(a);break;case 4:_m(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;rt(sh,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(rt(mt,mt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?iI(s,a,u):(rt(mt,mt.current&1),s=mi(s,a,u),s!==null?s.sibling:null);rt(mt,mt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(s.flags&128)!==0){if(f)return oI(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(mt,mt.current),f)break;return null;case 22:case 23:return a.lanes=0,Zw(s,a,u)}return mi(s,a,u)}var aI,Fm,lI,uI;aI=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Fm=function(){},lI=function(s,a,u,f){var m=s.memoizedProps;if(m!==f){s=a.stateNode,ao(Mr.current);var _=null;switch(u){case"input":m=Bs(s,m),f=Bs(s,f),_=[];break;case"select":m=de({},m,{value:void 0}),f=de({},f,{value:void 0}),_=[];break;case"textarea":m=eu(s,m),f=eu(s,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Jd)}ou(u,f);var I;u=null;for(W in m)if(!f.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var P=m[W];for(I in P)P.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?_||(_=[]):(_=_||[]).push(W,null));for(W in f){var O=f[W];if(P=m?.[W],f.hasOwnProperty(W)&&O!==P&&(O!=null||P!=null))if(W==="style")if(P){for(I in P)!P.hasOwnProperty(I)||O&&O.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in O)O.hasOwnProperty(I)&&P[I]!==O[I]&&(u||(u={}),u[I]=O[I])}else u||(_||(_=[]),_.push(W,u)),u=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,P=P?P.__html:void 0,O!=null&&P!==O&&(_=_||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(_=_||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&st("scroll",s),_||P===O||(_=[])):(_=_||[]).push(W,O))}u&&(_=_||[]).push("style",u);var W=_;(a.updateQueue=W)&&(a.flags|=4)}},uI=function(s,a,u,f){u!==f&&(a.flags|=4)};function Bu(s,a){if(!ct)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function un(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function dC(s,a,u){var f=a.pendingProps;switch(am(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(a),null;case 1:return Cn(a.type)&&Xd(),un(a),null;case 3:return f=a.stateNode,ja(),ot(kn),ot(an),wm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(rh(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,wr!==null&&(Jm(wr),wr=null))),Fm(s,a),un(a),null;case 5:ym(a);var m=ao(Vu.current);if(u=a.type,s!==null&&a.stateNode!=null)lI(s,a,u,f,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return un(a),null}if(s=ao(Mr.current),rh(a)){f=a.stateNode,u=a.type;var _=a.memoizedProps;switch(f[Lr]=a,f[bu]=_,s=(a.mode&1)!==0,u){case"dialog":st("cancel",f),st("close",f);break;case"iframe":case"object":case"embed":st("load",f);break;case"video":case"audio":for(m=0;m<Pu.length;m++)st(Pu[m],f);break;case"source":st("error",f);break;case"img":case"image":case"link":st("error",f),st("load",f);break;case"details":st("toggle",f);break;case"input":na(f,_),st("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},st("invalid",f);break;case"textarea":ia(f,_),st("invalid",f)}ou(u,_),m=null;for(var I in _)if(_.hasOwnProperty(I)){var P=_[I];I==="children"?typeof P=="string"?f.textContent!==P&&(_.suppressHydrationWarning!==!0&&Qd(f.textContent,P,s),m=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(_.suppressHydrationWarning!==!0&&Qd(f.textContent,P,s),m=["children",""+P]):i.hasOwnProperty(I)&&P!=null&&I==="onScroll"&&st("scroll",f)}switch(u){case"input":Zr(f),Id(f,_,!0);break;case"textarea":Zr(f),tu(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Jd)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Vt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=I.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=I.createElement(u,{is:f.is}):(s=I.createElement(u),u==="select"&&(I=s,f.multiple?I.multiple=!0:f.size&&(I.size=f.size))):s=I.createElementNS(s,u),s[Lr]=a,s[bu]=f,aI(s,a,!1,!1),a.stateNode=s;e:{switch(I=au(u,f),u){case"dialog":st("cancel",s),st("close",s),m=f;break;case"iframe":case"object":case"embed":st("load",s),m=f;break;case"video":case"audio":for(m=0;m<Pu.length;m++)st(Pu[m],s);m=f;break;case"source":st("error",s),m=f;break;case"img":case"image":case"link":st("error",s),st("load",s),m=f;break;case"details":st("toggle",s),m=f;break;case"input":na(s,f),m=Bs(s,f),st("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=de({},f,{value:void 0}),st("invalid",s);break;case"textarea":ia(s,f),m=eu(s,f),st("invalid",s);break;default:m=f}ou(u,m),P=m;for(_ in P)if(P.hasOwnProperty(_)){var O=P[_];_==="style"?iu(s,O):_==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&nu(s,O)):_==="children"?typeof O=="string"?(u!=="textarea"||O!=="")&&Mi(s,O):typeof O=="number"&&Mi(s,""+O):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?O!=null&&_==="onScroll"&&st("scroll",s):O!=null&&K(s,_,O,I))}switch(u){case"input":Zr(s),Id(s,f,!1);break;case"textarea":Zr(s),tu(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Qe(f.value));break;case"select":s.multiple=!!f.multiple,_=f.value,_!=null?ti(s,!!f.multiple,_,!1):f.defaultValue!=null&&ti(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Jd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return un(a),null;case 6:if(s&&a.stateNode!=null)uI(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=ao(Vu.current),ao(Mr.current),rh(a)){if(f=a.stateNode,u=a.memoizedProps,f[Lr]=a,(_=f.nodeValue!==u)&&(s=Wn,s!==null))switch(s.tag){case 3:Qd(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Qd(f.nodeValue,u,(s.mode&1)!==0)}_&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Lr]=a,a.stateNode=f}return un(a),null;case 13:if(ot(mt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ct&&Gn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)hw(),Ma(),a.flags|=98560,_=!1;else if(_=rh(a),f!==null&&f.dehydrated!==null){if(s===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Lr]=a}else Ma(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;un(a),_=!1}else wr!==null&&(Jm(wr),wr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(mt.current&1)!==0?Ft===0&&(Ft=3):Zm())),a.updateQueue!==null&&(a.flags|=4),un(a),null);case 4:return ja(),Fm(s,a),s===null&&ku(a.stateNode.containerInfo),un(a),null;case 10:return fm(a.type._context),un(a),null;case 17:return Cn(a.type)&&Xd(),un(a),null;case 19:if(ot(mt),_=a.memoizedState,_===null)return un(a),null;if(f=(a.flags&128)!==0,I=_.rendering,I===null)if(f)Bu(_,!1);else{if(Ft!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(I=uh(s),I!==null){for(a.flags|=128,Bu(_,!1),f=I.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)_=u,s=f,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,s=I.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return rt(mt,mt.current&1|2),a.child}s=s.sibling}_.tail!==null&&nt()>Wa&&(a.flags|=128,f=!0,Bu(_,!1),a.lanes=4194304)}else{if(!f)if(s=uh(I),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Bu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!ct)return un(a),null}else 2*nt()-_.renderingStartTime>Wa&&u!==1073741824&&(a.flags|=128,f=!0,Bu(_,!1),a.lanes=4194304);_.isBackwards?(I.sibling=a.child,a.child=I):(u=_.last,u!==null?u.sibling=I:a.child=I,_.last=I)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=nt(),a.sibling=null,u=mt.current,rt(mt,f?u&1|2:u&1),a):(un(a),null);case 22:case 23:return Xm(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Hn&1073741824)!==0&&(un(a),a.subtreeFlags&6&&(a.flags|=8192)):un(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function hC(s,a){switch(am(a),a.tag){case 1:return Cn(a.type)&&Xd(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ja(),ot(kn),ot(an),wm(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return ym(a),null;case 13:if(ot(mt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ma()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ot(mt),null;case 4:return ja(),null;case 10:return fm(a.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var yh=!1,cn=!1,fC=typeof WeakSet=="function"?WeakSet:Set,ge=null;function za(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){vt(s,a,f)}else u.current=null}function Bm(s,a,u){try{u()}catch(f){vt(s,a,f)}}var cI=!1;function pC(s,a){if(Xp=Wi,s=$v(),qp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var I=0,P=-1,O=-1,W=0,te=0,re=s,Z=null;t:for(;;){for(var fe;re!==u||m!==0&&re.nodeType!==3||(P=I+m),re!==_||f!==0&&re.nodeType!==3||(O=I+f),re.nodeType===3&&(I+=re.nodeValue.length),(fe=re.firstChild)!==null;)Z=re,re=fe;for(;;){if(re===s)break t;if(Z===u&&++W===m&&(P=I),Z===_&&++te===f&&(O=I),(fe=re.nextSibling)!==null)break;re=Z,Z=re.parentNode}re=fe}u=P===-1||O===-1?null:{start:P,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zp={focusedElem:s,selectionRange:u},Wi=!1,ge=a;ge!==null;)if(a=ge,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ge=s;else for(;ge!==null;){a=ge;try{var _e=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var ye=_e.memoizedProps,At=_e.memoizedState,j=a.stateNode,M=j.getSnapshotBeforeUpdate(a.elementType===a.type?ye:Ir(a.type,ye),At);j.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){vt(a,a.return,se)}if(s=a.sibling,s!==null){s.return=a.return,ge=s;break}ge=a.return}return _e=cI,cI=!1,_e}function ju(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var _=m.destroy;m.destroy=void 0,_!==void 0&&Bm(a,u,_)}m=m.next}while(m!==f)}}function vh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function jm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function dI(s){var a=s.alternate;a!==null&&(s.alternate=null,dI(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Lr],delete a[bu],delete a[rm],delete a[Jk],delete a[Yk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function hI(s){return s.tag===5||s.tag===3||s.tag===4}function fI(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hI(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $m(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Jd));else if(f!==4&&(s=s.child,s!==null))for($m(s,a,u),s=s.sibling;s!==null;)$m(s,a,u),s=s.sibling}function zm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(zm(s,a,u),s=s.sibling;s!==null;)zm(s,a,u),s=s.sibling}var Zt=null,Er=!1;function es(s,a,u){for(u=u.child;u!==null;)pI(s,a,u),u=u.sibling}function pI(s,a,u){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Qs,u)}catch{}switch(u.tag){case 5:cn||za(u,a);case 6:var f=Zt,m=Er;Zt=null,es(s,a,u),Zt=f,Er=m,Zt!==null&&(Er?(s=Zt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Zt.removeChild(u.stateNode));break;case 18:Zt!==null&&(Er?(s=Zt,u=u.stateNode,s.nodeType===8?nm(s.parentNode,u):s.nodeType===1&&nm(s,u),_r(s)):nm(Zt,u.stateNode));break;case 4:f=Zt,m=Er,Zt=u.stateNode.containerInfo,Er=!0,es(s,a,u),Zt=f,Er=m;break;case 0:case 11:case 14:case 15:if(!cn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,I=_.destroy;_=_.tag,I!==void 0&&((_&2)!==0||(_&4)!==0)&&Bm(u,a,I),m=m.next}while(m!==f)}es(s,a,u);break;case 1:if(!cn&&(za(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(P){vt(u,a,P)}es(s,a,u);break;case 21:es(s,a,u);break;case 22:u.mode&1?(cn=(f=cn)||u.memoizedState!==null,es(s,a,u),cn=f):es(s,a,u);break;default:es(s,a,u)}}function mI(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new fC),a.forEach(function(f){var m=TC.bind(null,s,f);u.has(f)||(u.add(f),f.then(m,m))})}}function Tr(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var _=s,I=a,P=I;e:for(;P!==null;){switch(P.tag){case 5:Zt=P.stateNode,Er=!1;break e;case 3:Zt=P.stateNode.containerInfo,Er=!0;break e;case 4:Zt=P.stateNode.containerInfo,Er=!0;break e}P=P.return}if(Zt===null)throw Error(t(160));pI(_,I,m),Zt=null,Er=!1;var O=m.alternate;O!==null&&(O.return=null),m.return=null}catch(W){vt(m,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)gI(a,s),a=a.sibling}function gI(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Tr(a,s),Fr(s),f&4){try{ju(3,s,s.return),vh(3,s)}catch(ye){vt(s,s.return,ye)}try{ju(5,s,s.return)}catch(ye){vt(s,s.return,ye)}}break;case 1:Tr(a,s),Fr(s),f&512&&u!==null&&za(u,u.return);break;case 5:if(Tr(a,s),Fr(s),f&512&&u!==null&&za(u,u.return),s.flags&32){var m=s.stateNode;try{Mi(m,"")}catch(ye){vt(s,s.return,ye)}}if(f&4&&(m=s.stateNode,m!=null)){var _=s.memoizedProps,I=u!==null?u.memoizedProps:_,P=s.type,O=s.updateQueue;if(s.updateQueue=null,O!==null)try{P==="input"&&_.type==="radio"&&_.name!=null&&Xl(m,_),au(P,I);var W=au(P,_);for(I=0;I<O.length;I+=2){var te=O[I],re=O[I+1];te==="style"?iu(m,re):te==="dangerouslySetInnerHTML"?nu(m,re):te==="children"?Mi(m,re):K(m,te,re,W)}switch(P){case"input":Zl(m,_);break;case"textarea":sa(m,_);break;case"select":var Z=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var fe=_.value;fe!=null?ti(m,!!_.multiple,fe,!1):Z!==!!_.multiple&&(_.defaultValue!=null?ti(m,!!_.multiple,_.defaultValue,!0):ti(m,!!_.multiple,_.multiple?[]:"",!1))}m[bu]=_}catch(ye){vt(s,s.return,ye)}}break;case 6:if(Tr(a,s),Fr(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,_=s.memoizedProps;try{m.nodeValue=_}catch(ye){vt(s,s.return,ye)}}break;case 3:if(Tr(a,s),Fr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{_r(a.containerInfo)}catch(ye){vt(s,s.return,ye)}break;case 4:Tr(a,s),Fr(s);break;case 13:Tr(a,s),Fr(s),m=s.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Gm=nt())),f&4&&mI(s);break;case 22:if(te=u!==null&&u.memoizedState!==null,s.mode&1?(cn=(W=cn)||te,Tr(a,s),cn=W):Tr(a,s),Fr(s),f&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!te&&(s.mode&1)!==0)for(ge=s,te=s.child;te!==null;){for(re=ge=te;ge!==null;){switch(Z=ge,fe=Z.child,Z.tag){case 0:case 11:case 14:case 15:ju(4,Z,Z.return);break;case 1:za(Z,Z.return);var _e=Z.stateNode;if(typeof _e.componentWillUnmount=="function"){f=Z,u=Z.return;try{a=f,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(ye){vt(f,u,ye)}}break;case 5:za(Z,Z.return);break;case 22:if(Z.memoizedState!==null){vI(re);continue}}fe!==null?(fe.return=Z,ge=fe):vI(re)}te=te.sibling}e:for(te=null,re=s;;){if(re.tag===5){if(te===null){te=re;try{m=re.stateNode,W?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(P=re.stateNode,O=re.memoizedProps.style,I=O!=null&&O.hasOwnProperty("display")?O.display:null,P.style.display=ru("display",I))}catch(ye){vt(s,s.return,ye)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=W?"":re.memoizedProps}catch(ye){vt(s,s.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===s)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===s)break e;for(;re.sibling===null;){if(re.return===null||re.return===s)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Tr(a,s),Fr(s),f&4&&mI(s);break;case 21:break;default:Tr(a,s),Fr(s)}}function Fr(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(hI(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Mi(m,""),f.flags&=-33);var _=fI(s);zm(s,_,m);break;case 3:case 4:var I=f.stateNode.containerInfo,P=fI(s);$m(s,P,I);break;default:throw Error(t(161))}}catch(O){vt(s,s.return,O)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function mC(s,a,u){ge=s,_I(s)}function _I(s,a,u){for(var f=(s.mode&1)!==0;ge!==null;){var m=ge,_=m.child;if(m.tag===22&&f){var I=m.memoizedState!==null||yh;if(!I){var P=m.alternate,O=P!==null&&P.memoizedState!==null||cn;P=yh;var W=cn;if(yh=I,(cn=O)&&!W)for(ge=m;ge!==null;)I=ge,O=I.child,I.tag===22&&I.memoizedState!==null?wI(m):O!==null?(O.return=I,ge=O):wI(m);for(;_!==null;)ge=_,_I(_),_=_.sibling;ge=m,yh=P,cn=W}yI(s)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,ge=_):yI(s)}}function yI(s){for(;ge!==null;){var a=ge;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:cn||vh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!cn)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:Ir(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&vw(a,_,f);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}vw(a,I,u)}break;case 5:var P=a.stateNode;if(u===null&&a.flags&4){u=P;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&u.focus();break;case"img":O.src&&(u.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var te=W.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&_r(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}cn||a.flags&512&&jm(a)}catch(Z){vt(a,a.return,Z)}}if(a===s){ge=null;break}if(u=a.sibling,u!==null){u.return=a.return,ge=u;break}ge=a.return}}function vI(s){for(;ge!==null;){var a=ge;if(a===s){ge=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ge=u;break}ge=a.return}}function wI(s){for(;ge!==null;){var a=ge;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{vh(4,a)}catch(O){vt(a,u,O)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(O){vt(a,m,O)}}var _=a.return;try{jm(a)}catch(O){vt(a,_,O)}break;case 5:var I=a.return;try{jm(a)}catch(O){vt(a,I,O)}}}catch(O){vt(a,a.return,O)}if(a===s){ge=null;break}var P=a.sibling;if(P!==null){P.return=a.return,ge=P;break}ge=a.return}}var gC=Math.ceil,wh=ne.ReactCurrentDispatcher,qm=ne.ReactCurrentOwner,sr=ne.ReactCurrentBatchConfig,We=0,Gt=null,Nt=null,en=0,Hn=0,qa=Qi(0),Ft=0,$u=null,uo=0,Ih=0,Wm=0,zu=null,Nn=null,Gm=0,Wa=1/0,gi=null,Eh=!1,Hm=null,ts=null,Th=!1,ns=null,Sh=0,qu=0,Km=null,Rh=-1,Ah=0;function _n(){return(We&6)!==0?nt():Rh!==-1?Rh:Rh=nt()}function rs(s){return(s.mode&1)===0?1:(We&2)!==0&&en!==0?en&-en:Zk.transition!==null?(Ah===0&&(Ah=Ys()),Ah):(s=je,s!==0||(s=window.event,s=s===void 0?16:yu(s.type)),s)}function Sr(s,a,u,f){if(50<qu)throw qu=0,Km=null,Error(t(185));ji(s,u,f),((We&2)===0||s!==Gt)&&(s===Gt&&((We&2)===0&&(Ih|=u),Ft===4&&is(s,en)),xn(s,f),u===1&&We===0&&(a.mode&1)===0&&(Wa=nt()+500,eh&&Yi()))}function xn(s,a){var u=s.callbackNode;ii(s,a);var f=Js(s,s===Gt?en:0);if(f===0)u!==null&&fu(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&fu(u),a===1)s.tag===0?Xk(EI.bind(null,s)):aw(EI.bind(null,s)),Kk(function(){(We&6)===0&&Yi()}),u=null;else{switch(zi(f)){case 1:u=Ks;break;case 4:u=Ui;break;case 16:u=Xn;break;case 536870912:u=Ad;break;default:u=Xn}u=bI(u,II.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function II(s,a){if(Rh=-1,Ah=0,(We&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Ga()&&s.callbackNode!==u)return null;var f=Js(s,s===Gt?en:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||a)a=Ph(s,f);else{a=f;var m=We;We|=2;var _=SI();(Gt!==s||en!==a)&&(gi=null,Wa=nt()+500,ho(s,a));do try{vC();break}catch(P){TI(s,P)}while(!0);hm(),wh.current=_,We=m,Nt!==null?a=0:(Gt=null,en=0,a=Ft)}if(a!==0){if(a===2&&(m=$n(s),m!==0&&(f=m,a=Qm(s,m))),a===1)throw u=$u,ho(s,0),is(s,f),xn(s,nt()),u;if(a===6)is(s,f);else{if(m=s.current.alternate,(f&30)===0&&!_C(m)&&(a=Ph(s,f),a===2&&(_=$n(s),_!==0&&(f=_,a=Qm(s,_))),a===1))throw u=$u,ho(s,0),is(s,f),xn(s,nt()),u;switch(s.finishedWork=m,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:fo(s,Nn,gi);break;case 3:if(is(s,f),(f&130023424)===f&&(a=Gm+500-nt(),10<a)){if(Js(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){_n(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=tm(fo.bind(null,s,Nn,gi),a);break}fo(s,Nn,gi);break;case 4:if(is(s,f),(f&4194240)===f)break;for(a=s.eventTimes,m=-1;0<f;){var I=31-pn(f);_=1<<I,I=a[I],I>m&&(m=I),f&=~_}if(f=m,f=nt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*gC(f/1960))-f,10<f){s.timeoutHandle=tm(fo.bind(null,s,Nn,gi),f);break}fo(s,Nn,gi);break;case 5:fo(s,Nn,gi);break;default:throw Error(t(329))}}}return xn(s,nt()),s.callbackNode===u?II.bind(null,s):null}function Qm(s,a){var u=zu;return s.current.memoizedState.isDehydrated&&(ho(s,a).flags|=256),s=Ph(s,a),s!==2&&(a=Nn,Nn=u,a!==null&&Jm(a)),s}function Jm(s){Nn===null?Nn=s:Nn.push.apply(Nn,s)}function _C(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],_=m.getSnapshot;m=m.value;try{if(!vr(_(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function is(s,a){for(a&=~Wm,a&=~Ih,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-pn(a),f=1<<u;s[u]=-1,a&=~f}}function EI(s){if((We&6)!==0)throw Error(t(327));Ga();var a=Js(s,0);if((a&1)===0)return xn(s,nt()),null;var u=Ph(s,a);if(s.tag!==0&&u===2){var f=$n(s);f!==0&&(a=f,u=Qm(s,f))}if(u===1)throw u=$u,ho(s,0),is(s,a),xn(s,nt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,fo(s,Nn,gi),xn(s,nt()),null}function Ym(s,a){var u=We;We|=1;try{return s(a)}finally{We=u,We===0&&(Wa=nt()+500,eh&&Yi())}}function co(s){ns!==null&&ns.tag===0&&(We&6)===0&&Ga();var a=We;We|=1;var u=sr.transition,f=je;try{if(sr.transition=null,je=1,s)return s()}finally{je=f,sr.transition=u,We=a,(We&6)===0&&Yi()}}function Xm(){Hn=qa.current,ot(qa)}function ho(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,Hk(u)),Nt!==null)for(u=Nt.return;u!==null;){var f=u;switch(am(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Xd();break;case 3:ja(),ot(kn),ot(an),wm();break;case 5:ym(f);break;case 4:ja();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:fm(f.type._context);break;case 22:case 23:Xm()}u=u.return}if(Gt=s,Nt=s=ss(s.current,null),en=Hn=a,Ft=0,$u=null,Wm=Ih=uo=0,Nn=zu=null,oo!==null){for(a=0;a<oo.length;a++)if(u=oo[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,_=u.pending;if(_!==null){var I=_.next;_.next=m,f.next=I}u.pending=f}oo=null}return s}function TI(s,a){do{var u=Nt;try{if(hm(),ch.current=ph,dh){for(var f=gt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}dh=!1}if(lo=0,Wt=Ut=gt=null,Lu=!1,Mu=0,qm.current=null,u===null||u.return===null){Ft=1,$u=a,Nt=null;break}e:{var _=s,I=u.return,P=u,O=a;if(a=en,P.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,te=P,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var Z=te.alternate;Z?(te.updateQueue=Z.updateQueue,te.memoizedState=Z.memoizedState,te.lanes=Z.lanes):(te.updateQueue=null,te.memoizedState=null)}var fe=Kw(I);if(fe!==null){fe.flags&=-257,Qw(fe,I,P,_,a),fe.mode&1&&Hw(_,W,a),a=fe,O=W;var _e=a.updateQueue;if(_e===null){var ye=new Set;ye.add(O),a.updateQueue=ye}else _e.add(O);break e}else{if((a&1)===0){Hw(_,W,a),Zm();break e}O=Error(t(426))}}else if(ct&&P.mode&1){var At=Kw(I);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),Qw(At,I,P,_,a),cm($a(O,P));break e}}_=O=$a(O,P),Ft!==4&&(Ft=2),zu===null?zu=[_]:zu.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var j=Ww(_,O,a);yw(_,j);break e;case 1:P=O;var M=_.type,z=_.stateNode;if((_.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ts===null||!ts.has(z)))){_.flags|=65536,a&=-a,_.lanes|=a;var se=Gw(_,P,a);yw(_,se);break e}}_=_.return}while(_!==null)}AI(u)}catch(Ie){a=Ie,Nt===u&&u!==null&&(Nt=u=u.return);continue}break}while(!0)}function SI(){var s=wh.current;return wh.current=ph,s===null?ph:s}function Zm(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Gt===null||(uo&268435455)===0&&(Ih&268435455)===0||is(Gt,en)}function Ph(s,a){var u=We;We|=2;var f=SI();(Gt!==s||en!==a)&&(gi=null,ho(s,a));do try{yC();break}catch(m){TI(s,m)}while(!0);if(hm(),We=u,wh.current=f,Nt!==null)throw Error(t(261));return Gt=null,en=0,Ft}function yC(){for(;Nt!==null;)RI(Nt)}function vC(){for(;Nt!==null&&!Sd();)RI(Nt)}function RI(s){var a=CI(s.alternate,s,Hn);s.memoizedProps=s.pendingProps,a===null?AI(s):Nt=a,qm.current=null}function AI(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=dC(u,a,Hn),u!==null){Nt=u;return}}else{if(u=hC(u,a),u!==null){u.flags&=32767,Nt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ft=6,Nt=null;return}}if(a=a.sibling,a!==null){Nt=a;return}Nt=a=s}while(a!==null);Ft===0&&(Ft=5)}function fo(s,a,u){var f=je,m=sr.transition;try{sr.transition=null,je=1,wC(s,a,u,f)}finally{sr.transition=m,je=f}return null}function wC(s,a,u,f){do Ga();while(ns!==null);if((We&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var _=u.lanes|u.childLanes;if(et(s,_),s===Gt&&(Nt=Gt=null,en=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Th||(Th=!0,bI(Xn,function(){return Ga(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=sr.transition,sr.transition=null;var I=je;je=1;var P=We;We|=4,qm.current=null,pC(s,u),gI(u,s),Bk(Zp),Wi=!!Xp,Zp=Xp=null,s.current=u,mC(u),Lp(),We=P,je=I,sr.transition=_}else s.current=u;if(Th&&(Th=!1,ns=s,Sh=m),_=s.pendingLanes,_===0&&(ts=null),Pd(u.stateNode),xn(s,nt()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(Eh)throw Eh=!1,s=Hm,Hm=null,s;return(Sh&1)!==0&&s.tag!==0&&Ga(),_=s.pendingLanes,(_&1)!==0?s===Km?qu++:(qu=0,Km=s):qu=0,Yi(),null}function Ga(){if(ns!==null){var s=zi(Sh),a=sr.transition,u=je;try{if(sr.transition=null,je=16>s?16:s,ns===null)var f=!1;else{if(s=ns,ns=null,Sh=0,(We&6)!==0)throw Error(t(331));var m=We;for(We|=4,ge=s.current;ge!==null;){var _=ge,I=_.child;if((ge.flags&16)!==0){var P=_.deletions;if(P!==null){for(var O=0;O<P.length;O++){var W=P[O];for(ge=W;ge!==null;){var te=ge;switch(te.tag){case 0:case 11:case 15:ju(8,te,_)}var re=te.child;if(re!==null)re.return=te,ge=re;else for(;ge!==null;){te=ge;var Z=te.sibling,fe=te.return;if(dI(te),te===W){ge=null;break}if(Z!==null){Z.return=fe,ge=Z;break}ge=fe}}}var _e=_.alternate;if(_e!==null){var ye=_e.child;if(ye!==null){_e.child=null;do{var At=ye.sibling;ye.sibling=null,ye=At}while(ye!==null)}}ge=_}}if((_.subtreeFlags&2064)!==0&&I!==null)I.return=_,ge=I;else e:for(;ge!==null;){if(_=ge,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:ju(9,_,_.return)}var j=_.sibling;if(j!==null){j.return=_.return,ge=j;break e}ge=_.return}}var M=s.current;for(ge=M;ge!==null;){I=ge;var z=I.child;if((I.subtreeFlags&2064)!==0&&z!==null)z.return=I,ge=z;else e:for(I=M;ge!==null;){if(P=ge,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:vh(9,P)}}catch(Ie){vt(P,P.return,Ie)}if(P===I){ge=null;break e}var se=P.sibling;if(se!==null){se.return=P.return,ge=se;break e}ge=P.return}}if(We=m,Yi(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Qs,s)}catch{}f=!0}return f}finally{je=u,sr.transition=a}}return!1}function PI(s,a,u){a=$a(u,a),a=Ww(s,a,1),s=Zi(s,a,1),a=_n(),s!==null&&(ji(s,1,a),xn(s,a))}function vt(s,a,u){if(s.tag===3)PI(s,s,u);else for(;a!==null;){if(a.tag===3){PI(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ts===null||!ts.has(f))){s=$a(u,s),s=Gw(a,s,1),a=Zi(a,s,1),s=_n(),a!==null&&(ji(a,1,s),xn(a,s));break}}a=a.return}}function IC(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=_n(),s.pingedLanes|=s.suspendedLanes&u,Gt===s&&(en&u)===u&&(Ft===4||Ft===3&&(en&130023424)===en&&500>nt()-Gm?ho(s,0):Wm|=u),xn(s,a)}function kI(s,a){a===0&&((s.mode&1)===0?a=1:(a=ma,ma<<=1,(ma&130023424)===0&&(ma=4194304)));var u=_n();s=fi(s,a),s!==null&&(ji(s,a,u),xn(s,u))}function EC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),kI(s,u)}function TC(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),kI(s,u)}var CI;CI=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||kn.current)bn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return bn=!1,cC(s,a,u);bn=(s.flags&131072)!==0}else bn=!1,ct&&(a.flags&1048576)!==0&&lw(a,nh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;_h(s,a),s=a.pendingProps;var m=Oa(a,an.current);Ba(a,u),m=Tm(null,a,f,s,m,u);var _=Sm();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Cn(f)?(_=!0,Zd(a)):_=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,gm(a),m.updater=mh,a.stateNode=m,m._reactInternals=a,bm(a,f,s,u),a=Om(null,a,f,!0,_,u)):(a.tag=0,ct&&_&&om(a),gn(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch(_h(s,a),s=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=RC(f),s=Ir(f,s),m){case 0:a=Dm(null,a,f,s,u);break e;case 1:a=tI(null,a,f,s,u);break e;case 11:a=Jw(null,a,f,s,u);break e;case 14:a=Yw(null,a,f,Ir(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ir(f,m),Dm(s,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ir(f,m),tI(s,a,f,m,u);case 3:e:{if(nI(a),s===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,m=_.element,_w(s,a),lh(a,f,null,u);var I=a.memoizedState;if(f=I.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){m=$a(Error(t(423)),a),a=rI(s,a,f,u,m);break e}else if(f!==m){m=$a(Error(t(424)),a),a=rI(s,a,f,u,m);break e}else for(Gn=Ki(a.stateNode.containerInfo.firstChild),Wn=a,ct=!0,wr=null,u=mw(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ma(),f===m){a=mi(s,a,u);break e}gn(s,a,f,u)}a=a.child}return a;case 5:return ww(a),s===null&&um(a),f=a.type,m=a.pendingProps,_=s!==null?s.memoizedProps:null,I=m.children,em(f,m)?I=null:_!==null&&em(f,_)&&(a.flags|=32),eI(s,a),gn(s,a,I,u),a.child;case 6:return s===null&&um(a),null;case 13:return iI(s,a,u);case 4:return _m(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=Ua(a,null,f,u):gn(s,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ir(f,m),Jw(s,a,f,m,u);case 7:return gn(s,a,a.pendingProps,u),a.child;case 8:return gn(s,a,a.pendingProps.children,u),a.child;case 12:return gn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,_=a.memoizedProps,I=m.value,rt(sh,f._currentValue),f._currentValue=I,_!==null)if(vr(_.value,I)){if(_.children===m.children&&!kn.current){a=mi(s,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var P=_.dependencies;if(P!==null){I=_.child;for(var O=P.firstContext;O!==null;){if(O.context===f){if(_.tag===1){O=pi(-1,u&-u),O.tag=2;var W=_.updateQueue;if(W!==null){W=W.shared;var te=W.pending;te===null?O.next=O:(O.next=te.next,te.next=O),W.pending=O}}_.lanes|=u,O=_.alternate,O!==null&&(O.lanes|=u),pm(_.return,u,a),P.lanes|=u;break}O=O.next}}else if(_.tag===10)I=_.type===a.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(t(341));I.lanes|=u,P=I.alternate,P!==null&&(P.lanes|=u),pm(I,u,a),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===a){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}gn(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,Ba(a,u),m=rr(m),f=f(m),a.flags|=1,gn(s,a,f,u),a.child;case 14:return f=a.type,m=Ir(f,a.pendingProps),m=Ir(f.type,m),Yw(s,a,f,m,u);case 15:return Xw(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Ir(f,m),_h(s,a),a.tag=1,Cn(f)?(s=!0,Zd(a)):s=!1,Ba(a,u),zw(a,f,m),bm(a,f,m,u),Om(null,a,f,!0,s,u);case 19:return oI(s,a,u);case 22:return Zw(s,a,u)}throw Error(t(156,a.tag))};function bI(s,a){return fa(s,a)}function SC(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(s,a,u,f){return new SC(s,a,u,f)}function eg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function RC(s){if(typeof s=="function")return eg(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===Te)return 14}return 2}function ss(s,a){var u=s.alternate;return u===null?(u=or(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function kh(s,a,u,f,m,_){var I=2;if(f=s,typeof s=="function")eg(s)&&(I=1);else if(typeof s=="string")I=5;else e:switch(s){case b:return po(u.children,m,_,a);case R:I=8,m|=8;break;case C:return s=or(12,u,a,m|2),s.elementType=C,s.lanes=_,s;case S:return s=or(13,u,a,m),s.elementType=S,s.lanes=_,s;case Re:return s=or(19,u,a,m),s.elementType=Re,s.lanes=_,s;case Me:return Ch(u,m,_,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:I=10;break e;case x:I=9;break e;case L:I=11;break e;case Te:I=14;break e;case St:I=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=or(I,u,a,m),a.elementType=s,a.type=f,a.lanes=_,a}function po(s,a,u,f){return s=or(7,s,f,a),s.lanes=u,s}function Ch(s,a,u,f){return s=or(22,s,f,a),s.elementType=Me,s.lanes=u,s.stateNode={isHidden:!1},s}function tg(s,a,u){return s=or(6,s,null,a),s.lanes=u,s}function ng(s,a,u){return a=or(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function AC(s,a,u,f,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function rg(s,a,u,f,m,_,I,P,O){return s=new AC(s,a,u,P,O),a===1?(a=1,_===!0&&(a|=8)):a=0,_=or(3,null,null,a),s.current=_,_.stateNode=s,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(_),s}function PC(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function NI(s){if(!s)return Ji;s=s._reactInternals;e:{if(hr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Cn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Cn(u))return sw(s,u,a)}return a}function xI(s,a,u,f,m,_,I,P,O){return s=rg(u,f,!0,s,m,_,I,P,O),s.context=NI(null),u=s.current,f=_n(),m=rs(u),_=pi(f,m),_.callback=a??null,Zi(u,_,m),s.current.lanes=m,ji(s,m,f),xn(s,f),s}function bh(s,a,u,f){var m=a.current,_=_n(),I=rs(m);return u=NI(u),a.context===null?a.context=u:a.pendingContext=u,a=pi(_,I),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Zi(m,a,I),s!==null&&(Sr(s,m,I,_),ah(s,m,I)),I}function Nh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function DI(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function ig(s,a){DI(s,a),(s=s.alternate)&&DI(s,a)}function kC(){return null}var OI=typeof reportError=="function"?reportError:function(s){console.error(s)};function sg(s){this._internalRoot=s}xh.prototype.render=sg.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));bh(s,a,null,null)},xh.prototype.unmount=sg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;co(function(){bh(null,s,null,null)}),a[ui]=null}};function xh(s){this._internalRoot=s}xh.prototype.unstable_scheduleHydration=function(s){if(s){var a=xd();s={blockedOn:null,target:s,priority:a};for(var u=0;u<xr.length&&a!==0&&a<xr[u].priority;u++);xr.splice(u,0,s),u===0&&Vd(s)}};function og(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Dh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function VI(){}function CC(s,a,u,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var W=Nh(I);_.call(W)}}var I=xI(a,f,s,0,null,!1,!1,"",VI);return s._reactRootContainer=I,s[ui]=I.current,ku(s.nodeType===8?s.parentNode:s),co(),I}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var P=f;f=function(){var W=Nh(O);P.call(W)}}var O=rg(s,0,!1,null,null,!1,!1,"",VI);return s._reactRootContainer=O,s[ui]=O.current,ku(s.nodeType===8?s.parentNode:s),co(function(){bh(a,O,u,f)}),O}function Oh(s,a,u,f,m){var _=u._reactRootContainer;if(_){var I=_;if(typeof m=="function"){var P=m;m=function(){var O=Nh(I);P.call(O)}}bh(a,I,s,m)}else I=CC(u,a,s,m,f);return Nh(I)}bd=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Fi(a.pendingLanes);u!==0&&($i(a,u|1),xn(a,nt()),(We&6)===0&&(Wa=nt()+500,Yi()))}break;case 13:co(function(){var f=fi(s,1);if(f!==null){var m=_n();Sr(f,s,1,m)}}),ig(s,1)}},ga=function(s){if(s.tag===13){var a=fi(s,134217728);if(a!==null){var u=_n();Sr(a,s,134217728,u)}ig(s,134217728)}},Nd=function(s){if(s.tag===13){var a=rs(s),u=fi(s,a);if(u!==null){var f=_n();Sr(u,s,a,f)}ig(s,a)}},xd=function(){return je},Dd=function(s,a){var u=je;try{return je=s,a()}finally{je=u}},aa=function(s,a,u){switch(a){case"input":if(Zl(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var m=Yd(f);if(!m)throw Error(t(90));ta(f),Zl(f,m)}}}break;case"textarea":sa(s,u);break;case"select":a=u.value,a!=null&&ti(s,!!u.multiple,a,!1)}},qs=Ym,uu=co;var bC={usingClientEntryPoint:!1,Events:[Nu,xa,Yd,br,lu,Ym]},Wu={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NC={bundleType:Wu.bundleType,version:Wu.version,rendererPackageName:Wu.rendererPackageName,rendererConfig:Wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=hu(s),s===null?null:s.stateNode},findFiberByHostInstance:Wu.findFiberByHostInstance||kC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{Qs=Vh.inject(NC),jn=Vh}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bC,Dn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(a))throw Error(t(200));return PC(s,a,null,u)},Dn.createRoot=function(s,a){if(!og(s))throw Error(t(299));var u=!1,f="",m=OI;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=rg(s,1,!1,null,null,u,!1,f,m),s[ui]=a.current,ku(s.nodeType===8?s.parentNode:s),new sg(a)},Dn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=hu(a),s=s===null?null:s.stateNode,s},Dn.flushSync=function(s){return co(s)},Dn.hydrate=function(s,a,u){if(!Dh(a))throw Error(t(200));return Oh(null,s,a,!0,u)},Dn.hydrateRoot=function(s,a,u){if(!og(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,_="",I=OI;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=xI(a,null,s,1,u??null,m,!1,_,I),s[ui]=a.current,ku(s),f)for(s=0;s<f.length;s++)u=f[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new xh(a)},Dn.render=function(s,a,u){if(!Dh(a))throw Error(t(200));return Oh(null,s,a,!1,u)},Dn.unmountComponentAtNode=function(s){if(!Dh(s))throw Error(t(40));return s._reactRootContainer?(co(function(){Oh(null,null,s,!1,function(){s._reactRootContainer=null,s[ui]=null})}),!0):!1},Dn.unstable_batchedUpdates=Ym,Dn.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!Dh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Oh(s,a,u,!1,f)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var zI;function IS(){if(zI)return ug.exports;zI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ug.exports=BC(),ug.exports}var qI;function jC(){if(qI)return Lh;qI=1;var n=IS();return Lh.createRoot=n.createRoot,Lh.hydrateRoot=n.hydrateRoot,Lh}var $C=jC();const zC=vS($C);IS();/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tc.apply(this,arguments)}var ys;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ys||(ys={}));const WI="popstate";function qC(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Lg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:pf(i)}return GC(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ES(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WC(){return Math.random().toString(36).substr(2,8)}function GI(n,e){return{usr:n.state,key:n.key,idx:e}}function Lg(n,e,t,r){return t===void 0&&(t=null),Tc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ul(e):e,{state:t,key:e&&e.key||r||WC()})}function pf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ul(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function GC(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=ys.Pop,h=null,p=y();p==null&&(p=0,l.replaceState(Tc({},l.state,{idx:p}),""));function y(){return(l.state||{idx:null}).idx}function v(){c=ys.Pop;let k=y(),Y=k==null?null:k-p;p=k,h&&h({action:c,location:V.location,delta:Y})}function E(k,Y){c=ys.Push;let q=Lg(V.location,k,Y);p=y()+1;let K=GI(q,p),ne=V.createHref(q);try{l.pushState(K,"",ne)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;i.location.assign(ne)}o&&h&&h({action:c,location:V.location,delta:1})}function A(k,Y){c=ys.Replace;let q=Lg(V.location,k,Y);p=y();let K=GI(q,p),ne=V.createHref(q);l.replaceState(K,"",ne),o&&h&&h({action:c,location:V.location,delta:0})}function D(k){let Y=i.location.origin!=="null"?i.location.origin:i.location.href,q=typeof k=="string"?k:pf(k);return q=q.replace(/ $/,"%20"),Ot(Y,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,Y)}let V={get action(){return c},get location(){return n(i,l)},listen(k){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(WI,v),h=k,()=>{i.removeEventListener(WI,v),h=null}},createHref(k){return e(i,k)},createURL:D,encodeLocation(k){let Y=D(k);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:E,replace:A,go(k){return l.go(k)}};return V}var HI;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(HI||(HI={}));function HC(n,e,t){return t===void 0&&(t="/"),KC(n,e,t)}function KC(n,e,t,r){let i=typeof e=="string"?Ul(e):e,o=x_(i.pathname||"/",t);if(o==null)return null;let l=TS(n);QC(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=ab(o);c=ib(l[h],p)}return c}function TS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Ot(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=Is([r,h.relativePath]),y=t.concat(h);o.children&&o.children.length>0&&(Ot(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),TS(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:nb(p,o.index),routesMeta:y})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of SS(o.path))i(o,l,h)}),e}function SS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=SS(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function QC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rb(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JC=/^:[\w-]+$/,YC=3,XC=2,ZC=1,eb=10,tb=-2,KI=n=>n==="*";function nb(n,e){let t=n.split("/"),r=t.length;return t.some(KI)&&(r+=tb),e&&(r+=XC),t.filter(i=>!KI(i)).reduce((i,o)=>i+(JC.test(o)?YC:o===""?ZC:eb),r)}function rb(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function ib(n,e,t){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=sb({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},y),E=h.route;if(!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:Is([o,v.pathname]),pathnameBase:db(Is([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Is([o,v.pathnameBase]))}return l}function sb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ob(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,y,v)=>{let{paramName:E,isOptional:A}=y;if(E==="*"){let V=c[v]||"";l=o.slice(0,o.length-V.length).replace(/(.)\/+$/,"$1")}const D=c[v];return A&&!D?p[E]=void 0:p[E]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function ob(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ES(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ab(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ES(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function x_(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function lb(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ul(n):n;return{pathname:t?t.startsWith("/")?t:ub(t,e):e,search:hb(r),hash:fb(i)}}function ub(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function hg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cb(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function RS(n,e){let t=cb(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function AS(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Ul(n):(i=Tc({},n),Ot(!i.pathname||!i.pathname.includes("?"),hg("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),hg("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),hg("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;i.pathname=E.join("/")}c=v>=0?e[v]:"/"}let h=lb(i,c),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||y)&&(h.pathname+="/"),h}const Is=n=>n.join("/").replace(/\/\/+/g,"/"),db=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,fb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function pb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const PS=["post","put","patch","delete"];new Set(PS);const mb=["get",...PS];new Set(mb);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sc.apply(this,arguments)}const D_=Q.createContext(null),gb=Q.createContext(null),Go=Q.createContext(null),jf=Q.createContext(null),Ho=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),kS=Q.createContext(null);function _b(n,e){let{relative:t}=e===void 0?{}:e;Kc()||Ot(!1);let{basename:r,navigator:i}=Q.useContext(Go),{hash:o,pathname:l,search:c}=bS(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Is([r,l])),i.createHref({pathname:h,search:c,hash:o})}function Kc(){return Q.useContext(jf)!=null}function $f(){return Kc()||Ot(!1),Q.useContext(jf).location}function CS(n){Q.useContext(Go).static||Q.useLayoutEffect(n)}function O_(){let{isDataRoute:n}=Q.useContext(Ho);return n?bb():yb()}function yb(){Kc()||Ot(!1);let n=Q.useContext(D_),{basename:e,future:t,navigator:r}=Q.useContext(Go),{matches:i}=Q.useContext(Ho),{pathname:o}=$f(),l=JSON.stringify(RS(i,t.v7_relativeSplatPath)),c=Q.useRef(!1);return CS(()=>{c.current=!0}),Q.useCallback(function(p,y){if(y===void 0&&(y={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=AS(p,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Is([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,l,o,n])}function bS(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Q.useContext(Go),{matches:i}=Q.useContext(Ho),{pathname:o}=$f(),l=JSON.stringify(RS(i,r.v7_relativeSplatPath));return Q.useMemo(()=>AS(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function vb(n,e){return wb(n,e)}function wb(n,e,t,r){Kc()||Ot(!1);let{navigator:i}=Q.useContext(Go),{matches:o}=Q.useContext(Ho),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let p=$f(),y;if(e){var v;let k=typeof e=="string"?Ul(e):e;h==="/"||(v=k.pathname)!=null&&v.startsWith(h)||Ot(!1),y=k}else y=p;let E=y.pathname||"/",A=E;if(h!=="/"){let k=h.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(k.length).join("/")}let D=HC(n,{pathname:A}),V=Rb(D&&D.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Is([h,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Is([h,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,t,r);return e&&V?Q.createElement(jf.Provider,{value:{location:Sc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:ys.Pop}},V):V}function Ib(){let n=Cb(),e=pb(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:i},t):null,null)}const Eb=Q.createElement(Ib,null);class Tb extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Ho.Provider,{value:this.props.routeContext},Q.createElement(kS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sb(n){let{routeContext:e,match:t,children:r}=n,i=Q.useContext(D_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Ho.Provider,{value:e},r)}function Rb(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if((o=t)!=null&&o.errors)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);y>=0||Ot(!1),l=l.slice(0,Math.min(l.length,y+1))}let h=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:E,errors:A}=t,D=v.route.loader&&E[v.route.id]===void 0&&(!A||A[v.route.id]===void 0);if(v.route.lazy||D){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let A,D=!1,V=null,k=null;t&&(A=c&&v.route.id?c[v.route.id]:void 0,V=v.route.errorElement||Eb,h&&(p<0&&E===0?(Nb("route-fallback"),D=!0,k=null):p===E&&(D=!0,k=v.route.hydrateFallbackElement||null)));let Y=e.concat(l.slice(0,E+1)),q=()=>{let K;return A?K=V:D?K=k:v.route.Component?K=Q.createElement(v.route.Component,null):v.route.element?K=v.route.element:K=y,Q.createElement(Sb,{match:v,routeContext:{outlet:y,matches:Y,isDataRoute:t!=null},children:K})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?Q.createElement(Tb,{location:t.location,revalidation:t.revalidation,component:V,error:A,children:q(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):q()},null)}var NS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(NS||{}),xS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(xS||{});function Ab(n){let e=Q.useContext(D_);return e||Ot(!1),e}function Pb(n){let e=Q.useContext(gb);return e||Ot(!1),e}function kb(n){let e=Q.useContext(Ho);return e||Ot(!1),e}function DS(n){let e=kb(),t=e.matches[e.matches.length-1];return t.route.id||Ot(!1),t.route.id}function Cb(){var n;let e=Q.useContext(kS),t=Pb(),r=DS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function bb(){let{router:n}=Ab(NS.UseNavigateStable),e=DS(xS.UseNavigateStable),t=Q.useRef(!1);return CS(()=>{t.current=!0}),Q.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Sc({fromRouteId:e},o)))},[n,e])}const QI={};function Nb(n,e,t){QI[n]||(QI[n]=!0)}function nc(n){Ot(!1)}function xb(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ys.Pop,navigator:o,static:l=!1,future:c}=n;Kc()&&Ot(!1);let h=e.replace(/^\/*/,"/"),p=Q.useMemo(()=>({basename:h,navigator:o,static:l,future:Sc({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=Ul(r));let{pathname:y="/",search:v="",hash:E="",state:A=null,key:D="default"}=r,V=Q.useMemo(()=>{let k=x_(y,h);return k==null?null:{location:{pathname:k,search:v,hash:E,state:A,key:D},navigationType:i}},[h,y,v,E,A,D,i]);return V==null?null:Q.createElement(Go.Provider,{value:p},Q.createElement(jf.Provider,{children:t,value:V}))}function Db(n){let{children:e,location:t}=n;return vb(Mg(e),t)}new Promise(()=>{});function Mg(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(r,i)=>{if(!Q.isValidElement(r))return;let o=[...e,i];if(r.type===Q.Fragment){t.push.apply(t,Mg(r.props.children,o));return}r.type!==nc&&Ot(!1),!r.props.index||!r.props.children||Ot(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Mg(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ug(){return Ug=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ug.apply(this,arguments)}function Ob(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Vb(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Lb(n,e){return n.button===0&&(!e||e==="_self")&&!Vb(n)}const Mb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Ub="6";try{window.__reactRouterVersion=Ub}catch{}const Fb="startTransition",JI=MC[Fb];function Bb(n){let{basename:e,children:t,future:r,window:i}=n,o=Q.useRef();o.current==null&&(o.current=qC({window:i,v5Compat:!0}));let l=o.current,[c,h]=Q.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},y=Q.useCallback(v=>{p&&JI?JI(()=>h(v)):h(v)},[h,p]);return Q.useLayoutEffect(()=>l.listen(y),[l,y]),Q.createElement(xb,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const jb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$b=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mh=Q.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:y,unstable_viewTransition:v}=e,E=Ob(e,Mb),{basename:A}=Q.useContext(Go),D,V=!1;if(typeof p=="string"&&$b.test(p)&&(D=p,jb))try{let K=new URL(window.location.href),ne=p.startsWith("//")?new URL(K.protocol+p):new URL(p),he=x_(ne.pathname,A);ne.origin===K.origin&&he!=null?p=he+ne.search+ne.hash:V=!0}catch{}let k=_b(p,{relative:i}),Y=zb(p,{replace:l,state:c,target:h,preventScrollReset:y,relative:i,unstable_viewTransition:v});function q(K){r&&r(K),K.defaultPrevented||Y(K)}return Q.createElement("a",Ug({},E,{href:D||k,onClick:V||o?r:q,ref:t,target:h}))});var YI;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(YI||(YI={}));var XI;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(XI||(XI={}));function zb(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:c}=e===void 0?{}:e,h=O_(),p=$f(),y=bS(n,{relative:l});return Q.useCallback(v=>{if(Lb(v,t)){v.preventDefault();let E=r!==void 0?r:pf(p)===pf(y);h(n,{replace:E,state:i,preventScrollReset:o,relative:l,unstable_viewTransition:c})}},[p,h,y,r,i,t,n,o,l,c])}const zf=()=>{const[n,e]=Q.useState(!1),t=()=>{e(!n)};return U.jsx("div",{children:U.jsxs("div",{className:"menupage",children:[U.jsxs("button",{className:"bouton-menu",onClick:t,children:[U.jsx("div",{className:n?"barre1":"barre"}),U.jsx("div",{className:n?"barre2":"barre"}),U.jsx("div",{className:n?"barre3":"barre"})]}),U.jsx("div",{className:n?"menu menu-ouvert":"menu",children:U.jsxs("div",{className:"menu-list",children:[U.jsx(Mh,{to:"/",className:"case1",children:"Home"}),U.jsx(Mh,{to:"/Ratio",className:"case2",children:"Ratio"}),U.jsx(Mh,{to:"/Calculette",className:"case3",children:"Calculette"}),U.jsx(Mh,{to:"/Historique",className:"case4",children:"Historique"})]})})]})})};var ZI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},VS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,y=o>>2,v=(o&3)<<4|c>>4;let E=(c&15)<<2|p>>6,A=p&63;h||(A=64,l||(E=64)),r.push(t[y],t[v],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||v==null)throw new Wb;const E=o<<2|c>>4;if(r.push(E),p!==64){const A=c<<4&240|p>>2;if(r.push(A),v!==64){const D=p<<6&192|v;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Wb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gb=function(n){const e=OS(n);return VS.encodeByteArray(e,!0)},mf=function(n){return Gb(n).replace(/\./g,"")},V_=function(n){try{return VS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gf(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Hb(t)||(n[t]=gf(n[t],e[t]));return n}function Hb(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=()=>LS().__FIREBASE_DEFAULTS__,Qb=()=>{if(typeof process>"u"||typeof ZI>"u")return;const n=ZI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Jb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&V_(n[1]);return e&&JSON.parse(e)},qf=()=>{try{return Kb()||Qb()||Jb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},MS=n=>{var e,t;return(t=(e=qf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Yb=n=>{const e=MS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},US=()=>{var n;return(n=qf())===null||n===void 0?void 0:n.config},L_=n=>{var e;return(e=qf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mf(JSON.stringify(t)),mf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function M_(){var n;const e=(n=qf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zb(){return typeof window<"u"||jS()}function jS(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F_(){const n=Be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zS(){return!M_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rc(){try{return typeof indexedDB=="object"}catch{return!1}}function eN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="FirebaseError";class Bt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tN,Object.setPrototypeOf(this,Bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xr.prototype.create)}}class Xr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?nN(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Bt(i,c,r)}}function nN(n,e){return n.replace(rN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const rN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(tE(o)&&tE(l)){if(!yl(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function tE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function rc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function B_(n,e){const t=new iN(n,e);return t.subscribe.bind(t)}class iN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=fg),i.error===void 0&&(i.error=fg),i.complete===void 0&&(i.complete=fg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(n){return n&&n._delegate?n._delegate:n}class Fn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Xb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lN(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aN(n){return n===go?void 0:n}function lN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=[];var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const GS={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},uN=Oe.INFO,cN={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},dN=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=cN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qc{constructor(e){this.name=e,this._logLevel=uN,this._logHandler=dN,this._userLogHandler=null,j_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}function hN(n){j_.forEach(e=>{e.setLogLevel(n)})}function fN(n,e){for(const t of j_){let r=null;e&&e.level&&(r=GS[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,o,...l)=>{const c=l.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");o>=(r??i.logLevel)&&n({level:Oe[o].toLowerCase(),message:c,args:l,type:i.name})}}}const pN=(n,e)=>e.some(t=>n instanceof t);let nE,rE;function mN(){return nE||(nE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gN(){return rE||(rE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HS=new WeakMap,Fg=new WeakMap,KS=new WeakMap,pg=new WeakMap,$_=new WeakMap;function _N(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Es(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&HS.set(t,n)}).catch(()=>{}),$_.set(e,n),e}function yN(n){if(Fg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Fg.set(n,e)}let Bg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vN(n){Bg=n(Bg)}function wN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(mg(this),e,...t);return KS.set(r,e.sort?e.sort():[e]),Es(r)}:gN().includes(n)?function(...e){return n.apply(mg(this),e),Es(HS.get(this))}:function(...e){return Es(n.apply(mg(this),e))}}function IN(n){return typeof n=="function"?wN(n):(n instanceof IDBTransaction&&yN(n),pN(n,mN())?new Proxy(n,Bg):n)}function Es(n){if(n instanceof IDBRequest)return _N(n);if(pg.has(n))return pg.get(n);const e=IN(n);return e!==n&&(pg.set(n,e),$_.set(e,n)),e}const mg=n=>$_.get(n);function EN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Es(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Es(l.result),h.oldVersion,h.newVersion,Es(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const TN=["get","getKey","getAll","getAllKeys","count"],SN=["put","add","delete","clear"],gg=new Map;function iE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gg.get(e))return gg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=SN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TN.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return gg.set(e,o),o}vN(n=>({...n,get:(e,t,r)=>iE(e,t)||n.get(e,t,r),has:(e,t)=>!!iE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function AN(n){const e=n.getComponent();return e?.type==="VERSION"}const _f="@firebase/app",jg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Qc("@firebase/app"),PN="@firebase/app-compat",kN="@firebase/analytics-compat",CN="@firebase/analytics",bN="@firebase/app-check-compat",NN="@firebase/app-check",xN="@firebase/auth",DN="@firebase/auth-compat",ON="@firebase/database",VN="@firebase/data-connect",LN="@firebase/database-compat",MN="@firebase/functions",UN="@firebase/functions-compat",FN="@firebase/installations",BN="@firebase/installations-compat",jN="@firebase/messaging",$N="@firebase/messaging-compat",zN="@firebase/performance",qN="@firebase/performance-compat",WN="@firebase/remote-config",GN="@firebase/remote-config-compat",HN="@firebase/storage",KN="@firebase/storage-compat",QN="@firebase/firestore",JN="@firebase/vertexai-preview",YN="@firebase/firestore-compat",XN="firebase",ZN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]",ex={[_f]:"fire-core",[PN]:"fire-core-compat",[CN]:"fire-analytics",[kN]:"fire-analytics-compat",[NN]:"fire-app-check",[bN]:"fire-app-check-compat",[xN]:"fire-auth",[DN]:"fire-auth-compat",[ON]:"fire-rtdb",[VN]:"fire-data-connect",[LN]:"fire-rtdb-compat",[MN]:"fire-fn",[UN]:"fire-fn-compat",[FN]:"fire-iid",[BN]:"fire-iid-compat",[jN]:"fire-fcm",[$N]:"fire-fcm-compat",[zN]:"fire-perf",[qN]:"fire-perf-compat",[WN]:"fire-rc",[GN]:"fire-rc-compat",[HN]:"fire-gcs",[KN]:"fire-gcs-compat",[QN]:"fire-fst",[YN]:"fire-fst-compat",[JN]:"fire-vertex","fire-js":"fire-js",[XN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Map,vl=new Map,wl=new Map;function Ac(n,e){try{n.container.addComponent(e)}catch(t){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function QS(n,e){n.container.addOrOverwriteComponent(e)}function Ar(n){const e=n.name;if(wl.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;wl.set(e,n);for(const t of Rs.values())Ac(t,n);for(const t of vl.values())Ac(t,n);return!0}function Jc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tx(n,e,t=Ss){Jc(n,e).clearInstance(t)}function JS(n){return n.options!==void 0}function Je(n){return n.settings!==void 0}function nx(){wl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new Xr("app","Firebase",rx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YS=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends YS{constructor(e,t,r,i){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,l={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,l,i);else{const c=e;super(c.options,l,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,En(_f,jg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){W_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ur.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=ZN;function z_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ss,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(t||(t=US()),!t)throw ur.create("no-options");const o=Rs.get(i);if(o){if(yl(t,o.options)&&yl(r,o.config))return o;throw ur.create("duplicate-app",{appName:i})}const l=new WS(i);for(const h of wl.values())l.addComponent(h);const c=new YS(t,r,l);return Rs.set(i,c),c}function sx(n,e){if(Zb()&&!jS())throw ur.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;JS(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=p=>[...p].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ur.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(r)),l=vl.get(o);if(l)return l.incRefCount(e.releaseOnDeref),l;const c=new WS(o);for(const p of wl.values())c.addComponent(p);const h=new ix(t,e,o,c);return vl.set(o,h),h}function q_(n=Ss){const e=Rs.get(n);if(!e&&n===Ss&&US())return z_();if(!e)throw ur.create("no-app",{appName:n});return e}function ox(){return Array.from(Rs.values())}async function W_(n){let e=!1;const t=n.name;Rs.has(t)?(e=!0,Rs.delete(t)):vl.has(t)&&n.decRefCount()<=0&&(vl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function En(n,e,t){var r;let i=(r=ex[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(c.join(" "));return}Ar(new Fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function XS(n,e){if(n!==null&&typeof n!="function")throw ur.create("invalid-log-argument");fN(n,e)}function ZS(n){hN(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="firebase-heartbeat-database",lx=1,Pc="firebase-heartbeat-store";let _g=null;function e0(){return _g||(_g=EN(ax,lx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ur.create("idb-open",{originalErrorMessage:n.message})})),_g}async function ux(n){try{const t=(await e0()).transaction(Pc),r=await t.objectStore(Pc).get(t0(n));return await t.done,r}catch(e){if(e instanceof Bt)Ti.warn(e.message);else{const t=ur.create("idb-get",{originalErrorMessage:e?.message});Ti.warn(t.message)}}}async function sE(n,e){try{const r=(await e0()).transaction(Pc,"readwrite");await r.objectStore(Pc).put(e,t0(n)),await r.done}catch(t){if(t instanceof Bt)Ti.warn(t.message);else{const r=ur.create("idb-set",{originalErrorMessage:t?.message});Ti.warn(r.message)}}}function t0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=1024,dx=720*60*60*1e3;class hx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new px(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=dx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=oE(),{heartbeatsToSend:r,unsentEntries:i}=fx(this._heartbeatsCache.heartbeats),o=mf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ti.warn(t),""}}}function oE(){return new Date().toISOString().substring(0,10)}function fx(n,e=cx){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),aE(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),aE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class px{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rc()?eN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ux(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function aE(n){return mf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(n){Ar(new Fn("platform-logger",e=>new RN(e),"PRIVATE")),Ar(new Fn("heartbeat",e=>new hx(e),"PRIVATE")),En(_f,jg,n),En(_f,jg,"esm2017"),En("fire-js","")}mx("");const gx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Bt,SDK_VERSION:Bn,_DEFAULT_ENTRY_NAME:Ss,_addComponent:Ac,_addOrOverwriteComponent:QS,_apps:Rs,_clearComponents:nx,_components:wl,_getProvider:Jc,_isFirebaseApp:JS,_isFirebaseServerApp:Je,_registerComponent:Ar,_removeServiceInstance:tx,_serverApps:vl,deleteApp:W_,getApp:q_,getApps:ox,initializeApp:z_,initializeServerApp:sx,onLog:XS,registerVersion:En,setLogLevel:ZS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this._delegate=e,this.firebase=t,Ac(e,new Fn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),W_(this._delegate)))}_getService(e,t=Ss){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ss){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ac(this._delegate,e)}_addOrOverwriteComponent(e){QS(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},lE=new Xr("app-compat","Firebase",yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(n){const e={},t={__esModule:!0,initializeApp:o,app:i,registerVersion:En,setLogLevel:ZS,onLog:XS,apps:null,SDK_VERSION:Bn,INTERNAL:{registerComponent:c,removeApp:r,useAsService:h,modularAPIs:gx}};t.default=t,Object.defineProperty(t,"apps",{get:l});function r(p){delete e[p]}function i(p){if(p=p||Ss,!eE(e,p))throw lE.create("no-app",{appName:p});return e[p]}i.App=n;function o(p,y={}){const v=z_(p,y);if(eE(e,v.name))return e[v.name];const E=new n(v,t);return e[v.name]=E,E}function l(){return Object.keys(e).map(p=>e[p])}function c(p){const y=p.name,v=y.replace("-compat","");if(Ar(p)&&p.type==="PUBLIC"){const E=(A=i())=>{if(typeof A[v]!="function")throw lE.create("invalid-app-argument",{appName:y});return A[v]()};p.serviceProps!==void 0&&gf(E,p.serviceProps),t[v]=E,n.prototype[v]=function(...A){return this._getService.bind(this,y).apply(this,p.multipleInstances?A:[])}}return p.type==="PUBLIC"?t[v]:null}function h(p,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){const n=vx(_x);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:n0,extendNamespace:e,createSubscribe:B_,ErrorFactory:Xr,deepExtend:gf});function e(t){gf(n,t)}return n}const wx=n0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Qc("@firebase/app-compat"),Ix="@firebase/app-compat",Ex="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){En(Ix,Ex,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=LS();if(n.firebase!==void 0){uE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&uE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ne=wx;Tx();var Sx="firebase",Rx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.registerVersion(Sx,Rx,"app-compat");function Fl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Hu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ha={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function r0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Px=Ax,kx=r0,i0=new Xr("auth","Firebase",r0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Qc("@firebase/auth");function Cx(n,...e){yf.logLevel<=Oe.WARN&&yf.warn(`Auth (${Bn}): ${n}`,...e)}function Jh(n,...e){yf.logLevel<=Oe.ERROR&&yf.error(`Auth (${Bn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n,...e){throw H_(n,...e)}function jt(n,...e){return H_(n,...e)}function G_(n,e,t){const r=Object.assign(Object.assign({},kx()),{[e]:t});return new Xr("auth","Firebase",r).create(e,{appName:n.name})}function Jt(n){return G_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&on(n,"argument-error"),G_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return i0.create(n,...e)}function ie(n,e,...t){if(!n)throw H_(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jh(e),new Error(e)}function Pr(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function K_(){return cE()==="http:"||cE()==="https:"}function cE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K_()||U_()||"connection"in navigator)?navigator.onLine:!0}function Nx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pr(t>e,"Short delay should be less than long delay!"),this.isMobile=BS()||Wf()}get(){return bx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,e){Pr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s0=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Yc(3e4,6e4);function Et(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Tt(n,e,t,r,i={}){return o0(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=kr(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return $S()||(p.referrerPolicy="no-referrer"),s0.fetch()(a0(n,n.config.apiHost,t,c),p)})}async function o0(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},xx),e);try{const i=new Vx(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ic(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ic(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw ic(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw ic(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw G_(n,y,p);on(n,y)}}catch(i){if(i instanceof Bt)throw i;on(n,"network-request-failed",{message:String(i)})}}async function bi(n,e,t,r,i={}){const o=await Tt(n,e,t,r,i);return"mfaPendingCredential"in o&&on(n,"multi-factor-auth-required",{_serverResponse:o}),o}function a0(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Q_(n.config,i):`${n.config.apiScheme}://${i}`}function Ox(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let Vx=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),Dx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ic(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=jt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n){return n!==void 0&&n.getResponse!==void 0}function hE(n){return n!==void 0&&n.enterprise!==void 0}class Lx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ox(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(n){return(await Tt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Ux(n,e){return Tt(n,"GET","/v2/recaptchaConfig",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(n,e){return Tt(n,"POST","/v1/accounts:delete",e)}async function Bx(n,e){return Tt(n,"POST","/v1/accounts:update",e)}async function l0(n,e){return Tt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jx(n,e=!1){const t=me(n),r=await t.getIdToken(e),i=Gf(r);ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:hc(yg(i.auth_time)),issuedAtTime:hc(yg(i.iat)),expirationTime:hc(yg(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function yg(n){return Number(n)*1e3}function Gf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const i=V_(t);return i?JSON.parse(i):(Jh("Failed to decode base64 JWT payload"),null)}catch(i){return Jh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fE(n){const e=Gf(n);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Bt&&$x(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $x({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Si(n,l0(t,{idToken:r}));ie(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?u0(o.providerUserInfo):[],c=Wx(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!c?.length,y=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $g(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function qx(n){const e=me(n);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wx(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function u0(n){return n.map(e=>{var{providerId:t}=e,r=Fl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(n,e){const t=await o0(n,{},async()=>{const r=kr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=a0(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",s0.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Hx(n,e){return Tt(n,"POST","/v2/accounts:revokeToken",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg=class zg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const t=fE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await Gx(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new zg;return r&&(ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(ie(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(ie(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zg,this.toJSON())}_performRefresh(){return jr("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,e){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let vf=class sc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Fl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $g(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Si(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jx(this,e)}reload(){return qx(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Cc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(Jt(this.auth));const e=await this.getIdToken();return await Si(this,Fx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,h,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=t.photoURL)!==null&&l!==void 0?l:void 0,V=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Y=(p=t.createdAt)!==null&&p!==void 0?p:void 0,q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:ne,isAnonymous:he,providerData:ue,stsTokenManager:b}=t;ie(K&&b,e,"internal-error");const R=vg.fromJSON(this.name,b);ie(typeof K=="string",e,"internal-error"),as(v,e.name),as(E,e.name),ie(typeof ne=="boolean",e,"internal-error"),ie(typeof he=="boolean",e,"internal-error"),as(A,e.name),as(D,e.name),as(V,e.name),as(k,e.name),as(Y,e.name),as(q,e.name);const C=new sc({uid:K,auth:e,email:E,emailVerified:ne,displayName:v,isAnonymous:he,photoURL:D,phoneNumber:A,tenantId:V,stsTokenManager:R,createdAt:Y,lastLoginAt:q});return ue&&Array.isArray(ue)&&(C.providerData=ue.map(N=>Object.assign({},N))),k&&(C._redirectEventId=k),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new vg;i.updateFromServerResponse(t);const o=new sc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Cc(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ie(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?u0(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new vg;c.updateFromIdToken(r);const h=new sc({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $g(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,p),h}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;function Qn(n){Pr(n instanceof Function,"Expected a class definition");let e=pE.get(n);return e?(Pr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c0=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};c0.type="NONE";const Il=c0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(n,e,t){return`firebase:${n}:${e}:${t}`}let mE=class Yh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ao(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ao("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vf._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yh(Qn(Il),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Qn(Il);const l=Ao(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const y=await p._get(l);if(y){const v=vf._fromJSON(e,y);p!==o&&(c=v),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Yh(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Yh(o,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m0(e))return"Blackberry";if(g0(e))return"Webos";if(h0(e))return"Safari";if((e.includes("chrome/")||f0(e))&&!e.includes("edge/"))return"Chrome";if(Xc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function d0(n=Be()){return/firefox\//i.test(n)}function h0(n=Be()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f0(n=Be()){return/crios\//i.test(n)}function p0(n=Be()){return/iemobile/i.test(n)}function Xc(n=Be()){return/android/i.test(n)}function m0(n=Be()){return/blackberry/i.test(n)}function g0(n=Be()){return/webos/i.test(n)}function Zc(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Kx(n=Be()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Qx(n=Be()){var e;return Zc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Jx(){return F_()&&document.documentMode===10}function _0(n=Be()){return Zc(n)||Xc(n)||g0(n)||m0(n)||/windows phone/i.test(n)||p0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e=[]){let t;switch(n){case"Browser":t=gE(Be());break;case"Worker":t=`${gE(Be())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yx=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(n,e={}){return Tt(n,"GET","/v2/passwordPolicy",Et(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=6;let e1=class{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:Zx,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t1=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _E(this),this.idTokenSubscription=new _E(this),this.beforeStateQueue=new Yx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mE.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await l0(this,{idToken:e}),r=await vf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Je(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(Jt(this));const t=e?me(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(Jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(Jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xx(this),t=new e1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qn(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=await mE.create(this,[Qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Cx(`Error while retrieving App Check token: ${t.error}`),t?.token}};function wt(n){return me(n)}let _E=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=B_(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n1(n){ed=n}function J_(n){return ed.loadJS(n)}function r1(){return ed.recaptchaV2Script}function i1(){return ed.recaptchaEnterpriseScript}function s1(){return ed.gapiScript}function v0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const o1="recaptcha-enterprise",a1="NO_RECAPTCHA";class l1{constructor(e){this.type=o1,this.auth=wt(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{Ux(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new Lx(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;hE(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(a1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&hE(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=i1();h.length!==0&&(h+=c),J_(h).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function yE(n,e,t,r=!1){const i=new l1(n);let o;try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bc(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yE(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await yE(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}function u1(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function c1(n,e,t){const r=wt(n);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=w0(e),{host:l,port:c}=d1(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||h1()}function w0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function d1(n){const e=w0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:vE(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:vE(l)}}}function vE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function h1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0(n,e){return Tt(n,"POST","/v1/accounts:resetPassword",Et(n,e))}async function f1(n,e){return Tt(n,"POST","/v1/accounts:update",e)}async function p1(n,e){return Tt(n,"POST","/v1/accounts:signUp",e)}async function m1(n,e){return Tt(n,"POST","/v1/accounts:update",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(n,e){return bi(n,"POST","/v1/accounts:signInWithPassword",Et(n,e))}async function Hf(n,e){return Tt(n,"POST","/v1/accounts:sendOobCode",Et(n,e))}async function _1(n,e){return Hf(n,e)}async function y1(n,e){return Hf(n,e)}async function v1(n,e){return Hf(n,e)}async function w1(n,e){return Hf(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(n,e){return bi(n,"POST","/v1/accounts:signInWithEmailLink",Et(n,e))}async function E1(n,e){return bi(n,"POST","/v1/accounts:signInWithEmailLink",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends jl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Nc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Nc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bc(e,t,"signInWithPassword",g1);case"emailLink":return I1(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bc(e,r,"signUpPassword",p1);case"emailLink":return E1(e,{idToken:t,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(n,e){return bi(n,"POST","/v1/accounts:signInWithIdp",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="http://localhost";let No=class qg extends jl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):on("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Fl(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new qg(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ii(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ii(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ii(e,t)}buildRequest(){const e={requestUri:T1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kr(t)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(n,e){return Tt(n,"POST","/v1/accounts:sendVerificationCode",Et(n,e))}async function R1(n,e){return bi(n,"POST","/v1/accounts:signInWithPhoneNumber",Et(n,e))}async function A1(n,e){const t=await bi(n,"POST","/v1/accounts:signInWithPhoneNumber",Et(n,e));if(t.temporaryProof)throw ic(n,"account-exists-with-different-credential",t);return t}const P1={USER_NOT_FOUND:"user-not-found"};async function k1(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return bi(n,"POST","/v1/accounts:signInWithPhoneNumber",Et(n,t),P1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends jl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Po({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Po({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return R1(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return A1(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return k1(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!t&&!i&&!o?null:new Po({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b1(n){const e=ll(rc(n)).link,t=e?ll(rc(e)).deep_link_id:null,r=ll(rc(n)).deep_link_id;return(r?ll(rc(r)).link:null)||r||t||e||n}class Kf{constructor(e){var t,r,i,o,l,c;const h=ll(rc(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,y=(r=h.oobCode)!==null&&r!==void 0?r:null,v=C1((i=h.mode)!==null&&i!==void 0?i:null);ie(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=b1(e);try{return new Kf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.providerId=Os.PROVIDER_ID}static credential(e,t){return Nc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Kf.parseLink(t);return ie(r,"argument-error"),Nc._fromEmailAndCode(e,r.code,r.tenantId)}}Os.PROVIDER_ID="password";Os.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Os.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=class extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};class cl extends $l{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ie("providerId"in t&&"signInMethod"in t,"argument-error"),No._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ie(e.idToken||e.accessToken,"argument-error"),No._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:l,providerId:c}=e;if(!r&&!i&&!t&&!o||!c)return null;try{return new cl(c)._credential({idToken:t,accessToken:r,nonce:l,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf=class Za extends $l{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}};Qf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf=class el extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return No._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return el.credential(t,r)}catch{return null}}};Jf.GOOGLE_SIGN_IN_METHOD="google.com";Jf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf=class tl extends $l{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tl.credentialFromTaggedObject(e)}static credentialFromError(e){return tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tl.credential(e.oauthAccessToken)}catch{return null}}};Yf.GITHUB_SIGN_IN_METHOD="github.com";Yf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="http://localhost";class El extends jl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ii(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ii(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ii(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=t;return!r||!i||!o||r!==i?null:new El(r,o)}static _create(e,t){return new El(e,t)}buildRequest(){return{requestUri:N1,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="saml.";class wf extends Ni{constructor(e){ie(e.startsWith(x1),"argument-error"),super(e)}static credentialFromResult(e){return wf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=El.fromJSON(e);return ie(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return El._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf=class nl extends $l{constructor(){super("twitter.com")}static credential(e,t){return No._fromParams({providerId:nl.PROVIDER_ID,signInMethod:nl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nl.credentialFromTaggedObject(e)}static credentialFromError(e){return nl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nl.credential(t,r)}catch{return null}}};Xf.TWITTER_SIGN_IN_METHOD="twitter.com";Xf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(n,e){return bi(n,"POST","/v1/accounts:signUp",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=class Wg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await vf._fromIdTokenResponse(e,r,i),l=wE(r);return new Wg({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=wE(r);return new Wg({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function wE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(n){var e;if(Je(n.app))return Promise.reject(Jt(n));const t=wt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ri({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await E0(t,{returnSecureToken:!0}),i=await Ri._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O1=class Gg extends Bt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gg.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Gg(e,t,r,i)}};function T0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?O1._fromErrorAndOperation(n,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(n,e){const t=me(n);await Zf(!0,t,e);const{providerUserInfo:r}=await Bx(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=S0(r||[]);return t.providerData=t.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Y_(n,e,t=!1){const r=await Si(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ri._forOperation(n,"link",r)}async function Zf(n,e,t){await Cc(e);const r=S0(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ie(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(n,e,t=!1){const{auth:r}=n;if(Je(r.app))return Promise.reject(Jt(r));const i="reauthenticate";try{const o=await Si(n,T0(r,i,e,n),t);ie(o.idToken,r,"internal-error");const l=Gf(o.idToken);ie(l,r,"internal-error");const{sub:c}=l;return ie(n.uid===c,r,"user-mismatch"),Ri._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&on(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A0(n,e,t=!1){if(Je(n.app))return Promise.reject(Jt(n));const r="signIn",i=await T0(n,r,e),o=await Ri._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function ep(n,e){return A0(wt(n),e)}async function P0(n,e){const t=me(n);return await Zf(!1,t,e.providerId),Y_(t,e)}async function k0(n,e){return R0(me(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(n,e){return bi(n,"POST","/v1/accounts:signInWithCustomToken",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(n,e){if(Je(n.app))return Promise.reject(Jt(n));const t=wt(n),r=await L1(t,{token:e,returnSecureToken:!0}),i=await Ri._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?X_._fromServerResponse(e,t):"totpInfo"in t?Z_._fromServerResponse(e,t):on(e,"internal-error")}}class X_ extends td{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new X_(t)}}class Z_ extends td{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Z_(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(n,e,t){var r;ie(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ie(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ie(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ie(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(n){const e=wt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U1(n,e,t){const r=wt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&tp(r,i,t),await bc(r,i,"getOobCode",y1)}async function F1(n,e,t){await I0(me(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ey(n),r})}async function B1(n,e){await m1(me(n),{oobCode:e})}async function C0(n,e){const t=me(n),r=await I0(t,{oobCode:e}),i=r.requestType;switch(ie(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(r.mfaInfo,t,"internal-error");default:ie(r.email,t,"internal-error")}let o=null;return r.mfaInfo&&(o=td._fromServerResponse(wt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function j1(n,e){const{data:t}=await C0(me(n),e);return t.email}async function $1(n,e,t){if(Je(n.app))return Promise.reject(Jt(n));const r=wt(n),l=await bc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E0).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&ey(n),h}),c=await Ri._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function z1(n,e,t){return Je(n.app)?Promise.reject(Jt(n)):ep(me(n),Os.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ey(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(n,e,t){const r=wt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(l,c){ie(c.handleCodeInApp,r,"argument-error"),c&&tp(r,l,c)}o(i,t),await bc(r,i,"getOobCode",v1)}function W1(n,e){const t=Kf.parseLink(e);return t?.operation==="EMAIL_SIGNIN"}async function G1(n,e,t){if(Je(n.app))return Promise.reject(Jt(n));const r=me(n),i=Os.credentialWithLink(e,t||kc());return ie(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ep(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(n,e){return Tt(n,"POST","/v1/accounts:createAuthUri",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(n,e){const t=K_()?kc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await H1(me(n),r);return i||[]}async function Q1(n,e){const t=me(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&tp(t.auth,i,e);const{email:o}=await _1(t.auth,i);o!==n.email&&await n.reload()}async function J1(n,e,t){const r=me(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&tp(r.auth,o,t);const{email:l}=await w1(r.auth,o);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(n,e){return Tt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=me(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Si(r,Y1(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function Z1(n,e){const t=me(n);return Je(t.auth.app)?Promise.reject(Jt(t.auth)):b0(t,e,null)}function eD(n,e){return b0(me(n),null,e)}async function b0(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const l=await Si(n,f1(r,o));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&n?.idToken){const l=(t=(e=Gf(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new dl(o,c)}}if(!r)return null;switch(r){case"facebook.com":return new nD(o,i);case"github.com":return new rD(o,i);case"google.com":return new iD(o,i);case"twitter.com":return new sD(o,i,n.screenName||null);case"custom":case"anonymous":return new dl(o,null);default:return new dl(o,r,i)}}class dl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class N0 extends dl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class nD extends dl{constructor(e,t){super(e,"facebook.com",t)}}class rD extends N0{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class iD extends dl{constructor(e,t){super(e,"google.com",t)}}class sD extends N0{constructor(e,t,r){super(e,"twitter.com",t,r)}}function oD(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:tD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new To("enroll",e,t)}static _fromMfaPendingCredential(e){return new To("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e?.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return To._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return To._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=wt(e),i=t.customData._serverResponse,o=(i.mfaInfo||[]).map(c=>td._fromServerResponse(r,c));ie(i.mfaPendingCredential,r,"internal-error");const l=To._fromMfaPendingCredential(i.mfaPendingCredential);return new ty(l,o,async c=>{const h=await c._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const p=Object.assign(Object.assign({},i),{idToken:h.idToken,refreshToken:h.refreshToken});switch(t.operationType){case"signIn":const y=await Ri._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(y.user),y;case"reauthenticate":return ie(t.user,r,"internal-error"),Ri._forOperation(t.user,t.operationType,p);default:on(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function aD(n,e){var t;const r=me(n),i=e;return ie(e.customData.operationType,r,"argument-error"),ie((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),ty._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n,e){return Tt(n,"POST","/v2/accounts/mfaEnrollment:start",Et(n,e))}function uD(n,e){return Tt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Et(n,e))}function cD(n,e){return Tt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(n,e))}class ny{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>td._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new ny(e)}async getSession(){return To._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),o=await Si(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Si(this.user,cD(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const wg=new WeakMap;function dD(n){const e=me(n);return wg.has(e)||wg.set(e,ny._fromUser(e)),wg.get(e)}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x0=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=1e3,fD=10;let D0=class extends x0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Jx()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};D0.type="LOCAL";const ry=D0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O0=class extends x0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};O0.type="SESSION";const xo=O0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0=class L0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new L0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await pD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};V0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mD=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=nd("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(y),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return window}function gD(n){Dt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(){return typeof Dt().WorkerGlobalScope<"u"&&typeof Dt().importScripts=="function"}async function _D(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yD(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vD(){return iy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="firebaseLocalStorageDb",wD=1,Ef="firebaseLocalStorage",U0="fbase_key";let rd=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function np(n,e){return n.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function ID(){const n=indexedDB.deleteDatabase(M0);return new rd(n).toPromise()}function Hg(){const n=indexedDB.open(M0,wD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ef,{keyPath:U0})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),await ID(),e(await Hg()))})})}async function IE(n,e,t){const r=np(n,!0).put({[U0]:e,value:t});return new rd(r).toPromise()}async function ED(n,e){const t=np(n,!1).get(e),r=await new rd(t).toPromise();return r===void 0?null:r.value}function EE(n,e){const t=np(n,!0).delete(e);return new rd(t).toPromise()}const TD=800,SD=3;let F0=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V0._getInstance(vD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _D(),!this.activeServiceWorker)return;this.sender=new mD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hg();return await IE(e,If,"1"),await EE(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>IE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ED(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>EE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=np(i,!1).getAll();return new rd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};F0.type="LOCAL";const xc=F0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n,e){return Tt(n,"POST","/v2/accounts/mfaSignIn:start",Et(n,e))}function AD(n,e){return Tt(n,"POST","/v2/accounts/mfaSignIn:finalize",Et(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=500,kD=6e4,Uh=1e12;class CD{constructor(e){this.auth=e,this.counter=Uh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new bD(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Uh;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Uh;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Uh;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class bD{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ie(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ND(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},kD)},PD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ND(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=v0("rcb"),xD=new Yc(3e4,6e4);class DD{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Dt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ie(OD(t),e,"argument-error"),this.shouldResolveImmediately(t)&&dE(Dt().grecaptcha)?Promise.resolve(Dt().grecaptcha):new Promise((r,i)=>{const o=Dt().setTimeout(()=>{i(jt(e,"network-request-failed"))},xD.get());Dt()[Ig]=()=>{Dt().clearTimeout(o),delete Dt()[Ig];const c=Dt().grecaptcha;if(!c||!dE(c)){i(jt(e,"internal-error"));return}const h=c.render;c.render=(p,y)=>{const v=h(p,y);return this.counter++,v},this.hostLanguage=t,r(c)};const l=`${r1()}?${kr({onload:Ig,render:"explicit",hl:t})}`;J_(l).catch(()=>{clearTimeout(o),i(jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Dt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function OD(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class VD{async load(e){return new CD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="recaptcha",LD={theme:"light",type:"image"};let MD=class{constructor(e,t,r=Object.assign({},LD)){this.parameters=r,this.type=B0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(e),this.isInvisible=this.parameters.size==="invisible",ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ie(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VD:new DD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const o=l=>{l&&(this.tokenChangeListeners.delete(o),i(l))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Dt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ie(K_()&&!iy(),this.auth,"internal-error"),await UD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Mx(this.auth);ie(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function UD(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Po._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function FD(n,e,t){if(Je(n.app))return Promise.reject(Jt(n));const r=wt(n),i=await rp(r,e,me(t));return new sy(i,o=>ep(r,o))}async function BD(n,e,t){const r=me(n);await Zf(!1,r,"phone");const i=await rp(r.auth,e,me(t));return new sy(i,o=>P0(r,o))}async function jD(n,e,t){const r=me(n);if(Je(r.auth.app))return Promise.reject(Jt(r.auth));const i=await rp(r.auth,e,me(t));return new sy(i,o=>k0(r,o))}async function rp(n,e,t){var r;const i=await t.verify();try{ie(typeof i=="string",n,"argument-error"),ie(t.type===B0,n,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const l=o.session;if("phoneNumber"in o)return ie(l.type==="enroll",n,"internal-error"),(await lD(n,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ie(l.type==="signin",n,"internal-error");const c=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return ie(c,n,"missing-multi-factor-info"),(await RD(n,{mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await S1(n,{phoneNumber:o.phoneNumber,recaptchaToken:i});return l}}finally{t._reset()}}async function $D(n,e){const t=me(n);if(Je(t.auth.app))return Promise.reject(Jt(t.auth));await Y_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do=class Xh{constructor(e){this.providerId=Xh.PROVIDER_ID,this.auth=wt(e)}verifyPhoneNumber(e,t){return rp(this.auth,e,me(t))}static credential(e,t){return Po._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xh.credentialFromTaggedObject(t)}static credentialFromError(e){return Xh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Po._fromTokenResponse(t,r):null}};Do.PROVIDER_ID="phone";Do.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(n,e){return e?Qn(e):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy=class extends jl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zD(n){return A0(n.auth,new oy(n),n.bypassAuthState)}function qD(n){const{auth:e,user:t}=n;return ie(t,e,"internal-error"),R0(t,new oy(n),n.bypassAuthState)}async function WD(n){const{auth:e,user:t}=n;return ie(t,e,"internal-error"),Y_(t,new oy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j0=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return qD;default:on(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new Yc(2e3,1e4);async function HD(n,e,t){if(Je(n.app))return Promise.reject(jt(n,"operation-not-supported-in-this-environment"));const r=wt(n);Bl(n,e,Ni);const i=Ko(r,t);return new ip(r,"signInViaPopup",e,i).executeNotNull()}async function KD(n,e,t){const r=me(n);if(Je(r.auth.app))return Promise.reject(jt(r.auth,"operation-not-supported-in-this-environment"));Bl(r.auth,e,Ni);const i=Ko(r.auth,t);return new ip(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function QD(n,e,t){const r=me(n);Bl(r.auth,e,Ni);const i=Ko(r.auth,t);return new ip(r.auth,"linkViaPopup",e,i,r).executeNotNull()}let ip=class oc extends j0{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,oc.currentPopupAction&&oc.currentPopupAction.cancel(),oc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=nd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GD.get())};e()}};ip.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="pendingRedirect",fc=new Map;let YD=class extends j0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const r=await XD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function XD(n,e){const t=z0(e),r=$0(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function ay(n,e){return $0(n)._set(z0(e),"true")}function ZD(){fc.clear()}function ly(n,e){fc.set(n._key(),e)}function $0(n){return Qn(n._redirectPersistence)}function z0(n){return Ao(JD,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n,e,t){return tO(n,e,t)}async function tO(n,e,t){if(Je(n.app))return Promise.reject(Jt(n));const r=wt(n);Bl(n,e,Ni),await r._initializationPromise;const i=Ko(r,t);return await ay(i,r),i._openRedirect(r,e,"signInViaRedirect")}function nO(n,e,t){return rO(n,e,t)}async function rO(n,e,t){const r=me(n);if(Bl(r.auth,e,Ni),Je(r.auth.app))return Promise.reject(Jt(r.auth));await r.auth._initializationPromise;const i=Ko(r.auth,t);await ay(i,r.auth);const o=await q0(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function iO(n,e,t){return sO(n,e,t)}async function sO(n,e,t){const r=me(n);Bl(r.auth,e,Ni),await r.auth._initializationPromise;const i=Ko(r.auth,t);await Zf(!1,r,e.providerId),await ay(i,r.auth);const o=await q0(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function oO(n,e){return await wt(n)._initializationPromise,sp(n,e,!1)}async function sp(n,e,t=!1){if(Je(n.app))return Promise.reject(Jt(n));const r=wt(n),i=Ko(r,e),l=await new YD(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function q0(n){const e=nd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=600*1e3;let W0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!G0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(jt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aO&&this.cachedEventUids.clear(),this.cachedEventUids.has(TE(e))}saveEventToCache(e){this.cachedEventUids.add(TE(e)),this.lastProcessedEventTime=Date.now()}};function TE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function G0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0(n,e={}){return Tt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cO=/^https?/;async function dO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await H0(n);for(const t of e)try{if(hO(t))return}catch{}on(n,"unauthorized-domain")}function hO(n){const e=kc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!cO.test(t))return!1;if(uO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new Yc(3e4,6e4);function SE(){const n=Dt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pO(n){return new Promise((e,t)=>{var r,i,o;function l(){SE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SE(),t(jt(n,"network-request-failed"))},timeout:fO.get()})}if(!((i=(r=Dt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Dt().gapi)===null||o===void 0)&&o.load)l();else{const c=v0("iframefcb");return Dt()[c]=()=>{gapi.load?l():t(jt(n,"network-request-failed"))},J_(`${s1()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function mO(n){return Zh=Zh||pO(n),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Yc(5e3,15e3),_O="__/auth/iframe",yO="emulator/auth/iframe",vO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IO(n){const e=n.config;ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q_(e,yO):`https://${n.config.authDomain}/${_O}`,r={apiKey:e.apiKey,appName:n.name,v:Bn},i=wO.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${kr(r).slice(1)}`}async function EO(n){const e=await mO(n),t=Dt().gapi;return ie(t,n,"internal-error"),e.open({where:document.body,url:IO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vO,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=jt(n,"network-request-failed"),c=Dt().setTimeout(()=>{o(l)},gO.get());function h(){Dt().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SO=500,RO=600,AO="_blank",PO="http://localhost";let RE=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function kO(n,e,t,r=SO,i=RO){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},TO),{width:r.toString(),height:i.toString(),top:o,left:l}),p=Be().toLowerCase();t&&(c=f0(p)?AO:t),d0(p)&&(e=e||PO,h.scrollbars="yes");const y=Object.entries(h).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(Qx(p)&&c!=="_self")return CO(e||"",c),new RE(null);const v=window.open(e||"",c,y);ie(v,n,"popup-blocked");try{v.focus()}catch{}return new RE(v)}function CO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="__/auth/handler",NO="emulator/auth/handler",xO=encodeURIComponent("fac");async function Kg(n,e,t,r,i,o){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bn,eventId:i};if(e instanceof Ni){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",qS(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(o||{}))l[y]=v}if(e instanceof $l){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),p=h?`#${xO}=${encodeURIComponent(h)}`:"";return`${DO(n)}?${kr(c).slice(1)}${p}`}function DO({config:n}){return n.emulator?Q_(n,NO):`https://${n.authDomain}/${bO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";let OO=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xo,this._completeRedirectFn=sp,this._overrideRedirectResult=ly}async _openPopup(e,t,r,i){var o;Pr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Kg(e,t,r,kc(),i);return kO(e,l,nd())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Kg(e,t,r,kc(),i);return gD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Pr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await EO(e),r=new W0(e);return t.register("authEvent",i=>(ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},i=>{var o;const l=(o=i?.[0])===null||o===void 0?void 0:o[Eg];l!==void 0&&t(!!l),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _0()||h0()||Zc()}};const VO=OO;class LO{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return jr("unexpected MultiFactorSessionType")}}}class uy extends LO{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new uy(e)}_finalizeEnroll(e,t,r){return uD(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return AD(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class K0{constructor(){}static assertion(e){return uy._fromCredential(e)}}K0.FACTOR_ID="phone";var AE="@firebase/auth",PE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MO=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FO(n){Ar(new Fn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y0(n)},p=new t1(r,i,o,h);return u1(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ar(new Fn("auth-internal",e=>{const t=wt(e.getProvider("auth").getImmediate());return(r=>new MO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(AE,PE,UO(n)),En(AE,PE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=300;L_("authIdTokenMaxAge");function jO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}n1({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=jt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",jO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FO("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=2e3;async function zO(n,e,t){var r;const{BuildInfo:i}=Oo();Pr(e.sessionId,"AuthEvent did not contain a session ID");const o=await KO(e.sessionId),l={};return Zc()?l.ibi=i.packageName:Xc()?l.apn=i.packageName:on(n,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=o,Kg(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,l)}async function qO(n){const{BuildInfo:e}=Oo(),t={};Zc()?t.iosBundleId=e.packageName:Xc()?t.androidPackageName=e.packageName:on(n,"operation-not-supported-in-this-environment"),await H0(n,t)}function WO(n){const{cordova:e}=Oo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,Kx()?"_blank":"_system","location=yes"),t(i)})})}async function GO(n,e,t){const{cordova:r}=Oo();let i=()=>{};try{await new Promise((o,l)=>{let c=null;function h(){var v;o();const E=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof E=="function"&&E(),typeof t?.close=="function"&&t.close()}function p(){c||(c=window.setTimeout(()=>{l(jt(n,"redirect-cancelled-by-user"))},$O))}function y(){document?.visibilityState==="visible"&&p()}e.addPassiveListener(h),document.addEventListener("resume",p,!1),Xc()&&document.addEventListener("visibilitychange",y,!1),i=()=>{e.removePassiveListener(h),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",y,!1),c&&window.clearTimeout(c)}})}finally{i()}}function HO(n){var e,t,r,i,o,l,c,h,p,y;const v=Oo();ie(typeof((e=v?.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof((t=v?.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie(typeof((o=(i=(r=v?.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie(typeof((h=(c=(l=v?.cordova)===null||l===void 0?void 0:l.plugins)===null||c===void 0?void 0:c.browsertab)===null||h===void 0?void 0:h.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie(typeof((y=(p=v?.cordova)===null||p===void 0?void 0:p.InAppBrowser)===null||y===void 0?void 0:y.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function KO(n){const e=QO(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function QO(n){if(Pr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=20;class YO extends W0{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function XO(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:tV(),postBody:null,tenantId:n.tenantId,error:jt(n,"no-auth-event")}}function ZO(n,e){return Qg()._set(Jg(n),e)}async function kE(n){const e=await Qg()._get(Jg(n));return e&&await Qg()._remove(Jg(n)),e}function eV(n,e){var t,r;const i=rV(e);if(i.includes("/__/auth/callback")){const o=ef(i),l=o.firebaseError?nV(decodeURIComponent(o.firebaseError)):null,c=(r=(t=l?.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],h=c?jt(c):null;return h?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:h,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function tV(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<JO;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Qg(){return Qn(ry)}function Jg(n){return Ao("authEvent",n.config.apiKey,n.name)}function nV(n){try{return JSON.parse(n)}catch{return null}}function rV(n){const e=ef(n),t=e.link?decodeURIComponent(e.link):void 0,r=ef(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ef(i).link||i||r||t||n}function ef(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return ll(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=500;class sV{constructor(){this._redirectPersistence=xo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sp,this._overrideRedirectResult=ly}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new YO(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){on(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){HO(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),ZD(),await this._originValidation(e);const l=XO(e,r,i);await ZO(e,l);const c=await zO(e,l,t),h=await WO(c);return GO(e,o,h)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qO(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Oo(),l=setTimeout(async()=>{await kE(e),t.onEvent(CE())},iV),c=async y=>{clearTimeout(l);const v=await kE(e);let E=null;v&&y?.url&&(E=eV(v,y.url)),t.onEvent(E||CE())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,c);const h=i,p=`${o.packageName.toLowerCase()}://`;Oo().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(p)&&c({url:y}),typeof h=="function")try{h(y)}catch(v){console.error(v)}}}}const oV=sV;function CE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n,e){wt(n)._logFramework(e)}var lV="@firebase/auth-compat",uV="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=1e3;function pc(){var n;return((n=self?.location)===null||n===void 0?void 0:n.protocol)||null}function dV(){return pc()==="http:"||pc()==="https:"}function Q0(n=Be()){return!!((pc()==="file:"||pc()==="ionic:"||pc()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function hV(){return Wf()||M_()}function fV(){return F_()&&document?.documentMode===11}function pV(n=Be()){return/Edge\/\d+/.test(n)}function mV(n=Be()){return fV()||pV(n)}function J0(){try{const n=self.localStorage,e=nd();if(n)return n.setItem(e,"1"),n.removeItem(e),mV()?Rc():!0}catch{return cy()&&Rc()}return!1}function cy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tg(){return(dV()||U_()||Q0())&&!hV()&&J0()&&!cy()}function Y0(){return Q0()&&typeof document<"u"}async function gV(){return Y0()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},cV);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function _V(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn={LOCAL:"local",NONE:"none",SESSION:"session"},Ku=ie,X0="persistence";function yV(n,e){if(Ku(Object.values(Kn).includes(e),n,"invalid-persistence-type"),Wf()){Ku(e!==Kn.SESSION,n,"unsupported-persistence-type");return}if(M_()){Ku(e===Kn.NONE,n,"unsupported-persistence-type");return}if(cy()){Ku(e===Kn.NONE||e===Kn.LOCAL&&Rc(),n,"unsupported-persistence-type");return}Ku(e===Kn.NONE||J0(),n,"unsupported-persistence-type")}async function Yg(n){await n._initializationPromise;const e=Z0(),t=Ao(X0,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function vV(n,e){const t=Z0();if(!t)return[];const r=Ao(X0,n,e);switch(t.getItem(r)){case Kn.NONE:return[Il];case Kn.LOCAL:return[xc,xo];case Kn.SESSION:return[xo];default:return[]}}function Z0(){var n;try{return((n=_V())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=ie;class vs{constructor(){this.browserResolver=Qn(VO),this.cordovaResolver=Qn(oV),this.underlyingResolver=null,this._redirectPersistence=xo,this._completeRedirectFn=sp,this._overrideRedirectResult=ly}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Y0()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await gV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n){return n.unwrap()}function IV(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n){return tR(n)}function TV(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new SV(n,aD(n,e))}else if(r){const i=tR(e),o=e;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function tR(n){const{_tokenResponse:e}=n instanceof Bt?n.customData:n;if(!e)return null;if(!(n instanceof Bt)&&"temporaryProof"in e&&"phoneNumber"in e)return Do.credentialFromResult(n);const t=e.providerId;if(!t||t===Hu.PASSWORD)return null;let r;switch(t){case Hu.GOOGLE:r=Jf;break;case Hu.FACEBOOK:r=Qf;break;case Hu.GITHUB:r=Yf;break;case Hu.TWITTER:r=Xf;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:l,pendingToken:c,nonce:h}=e;return!o&&!l&&!i&&!c?null:c?t.startsWith("saml.")?El._create(t,c):No._fromParams({providerId:t,signInMethod:t,pendingToken:c,idToken:i,accessToken:o}):new cl(t).credential({idToken:i,accessToken:o,rawNonce:h})}return n instanceof Bt?r.credentialFromError(n):r.credentialFromResult(n)}function On(n,e){return e.catch(t=>{throw t instanceof Bt&&TV(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:EV(t),additionalUserInfo:oD(t),user:op.getOrCreate(i)}})}async function Xg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>On(n,t.confirm(r))}}class SV{constructor(e,t){this.resolver=t,this.auth=IV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return On(eR(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op=class ac{constructor(e){this._delegate=e,this.multiFactor=dD(e)}static getOrCreate(e){return ac.USER_MAP.has(e)||ac.USER_MAP.set(e,new ac(e)),ac.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return On(this.auth,P0(this._delegate,e))}async linkWithPhoneNumber(e,t){return Xg(this.auth,BD(this._delegate,e,t))}async linkWithPopup(e){return On(this.auth,QD(this._delegate,e,vs))}async linkWithRedirect(e){return await Yg(wt(this.auth)),iO(this._delegate,e,vs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return On(this.auth,k0(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Xg(this.auth,jD(this._delegate,e,t))}reauthenticateWithPopup(e){return On(this.auth,KD(this._delegate,e,vs))}async reauthenticateWithRedirect(e){return await Yg(wt(this.auth)),nO(this._delegate,e,vs)}sendEmailVerification(e){return Q1(this._delegate,e)}async unlink(e){return await V1(this._delegate,e),this}updateEmail(e){return Z1(this._delegate,e)}updatePassword(e){return eD(this._delegate,e)}updatePhoneNumber(e){return $D(this._delegate,e)}updateProfile(e){return X1(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return J1(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};op.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=ie;class Zg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Qu(r,"invalid-api-key",{appName:e.name}),Qu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?vs:void 0;this._delegate=t.initialize({options:{persistence:RV(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Px),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?op.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){c1(this._delegate,e,t)}applyActionCode(e){return B1(this._delegate,e)}checkActionCode(e){return C0(this._delegate,e)}confirmPasswordReset(e,t){return F1(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return On(this._delegate,$1(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return K1(this._delegate,e)}isSignInWithEmailLink(e){return W1(this._delegate,e)}async getRedirectResult(){Qu(Tg(),this._delegate,"operation-not-supported-in-this-environment");const e=await oO(this._delegate,vs);return e?On(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){aV(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:o,complete:l}=bE(e,t,r);return this._delegate.onAuthStateChanged(i,o,l)}onIdTokenChanged(e,t,r){const{next:i,error:o,complete:l}=bE(e,t,r);return this._delegate.onIdTokenChanged(i,o,l)}sendSignInLinkToEmail(e,t){return q1(this._delegate,e,t)}sendPasswordResetEmail(e,t){return U1(this._delegate,e,t||void 0)}async setPersistence(e){yV(this._delegate,e);let t;switch(e){case Kn.SESSION:t=xo;break;case Kn.LOCAL:t=await Qn(xc)._isAvailable()?xc:ry;break;case Kn.NONE:t=Il;break;default:return on("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return On(this._delegate,D1(this._delegate))}signInWithCredential(e){return On(this._delegate,ep(this._delegate,e))}signInWithCustomToken(e){return On(this._delegate,M1(this._delegate,e))}signInWithEmailAndPassword(e,t){return On(this._delegate,z1(this._delegate,e,t))}signInWithEmailLink(e,t){return On(this._delegate,G1(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Xg(this._delegate,FD(this._delegate,e,t))}async signInWithPopup(e){return Qu(Tg(),this._delegate,"operation-not-supported-in-this-environment"),On(this._delegate,HD(this._delegate,e,vs))}async signInWithRedirect(e){return Qu(Tg(),this._delegate,"operation-not-supported-in-this-environment"),await Yg(this._delegate),eO(this._delegate,e,vs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return j1(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Zg.Persistence=Kn;function bE(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:l=>i(l&&op.getOrCreate(l)),error:e,complete:t}}function RV(n,e){const t=vV(n,e);if(typeof self<"u"&&!t.includes(xc)&&t.push(xc),typeof window<"u")for(const r of[ry,xo])t.includes(r)||t.push(r);return t.includes(Il)||t.push(Il),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.providerId="phone",this._delegate=new Do(eR(Ne.auth()))}static credential(e,t){return Do.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}dy.PHONE_SIGN_IN_METHOD=Do.PHONE_SIGN_IN_METHOD;dy.PROVIDER_ID=Do.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=ie;class PV{constructor(e,t,r=Ne.app()){var i;AV((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new MD(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="auth-compat";function CV(n){n.INTERNAL.registerComponent(new Fn(kV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Zg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ha.EMAIL_SIGNIN,PASSWORD_RESET:Ha.PASSWORD_RESET,RECOVER_EMAIL:Ha.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ha.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ha.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ha.VERIFY_EMAIL}},EmailAuthProvider:Os,FacebookAuthProvider:Qf,GithubAuthProvider:Yf,GoogleAuthProvider:Jf,OAuthProvider:cl,SAMLAuthProvider:wf,PhoneAuthProvider:dy,PhoneMultiFactorGenerator:K0,RecaptchaVerifier:PV,TwitterAuthProvider:Xf,Auth:Zg,AuthCredential:jl,Error:Bt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(lV,uV)}CV(Ne);var NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,nR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,R){function C(){}C.prototype=R.prototype,b.D=R.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(N,x,L){for(var S=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)S[Re-2]=arguments[Re];return R.prototype[x].apply(N,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,R,C){C||(C=0);var N=Array(16);if(typeof R=="string")for(var x=0;16>x;++x)N[x]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(x=0;16>x;++x)N[x]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=b.g[0],C=b.g[1],x=b.g[2];var L=b.g[3],S=R+(L^C&(x^L))+N[0]+3614090360&4294967295;R=C+(S<<7&4294967295|S>>>25),S=L+(x^R&(C^x))+N[1]+3905402710&4294967295,L=R+(S<<12&4294967295|S>>>20),S=x+(C^L&(R^C))+N[2]+606105819&4294967295,x=L+(S<<17&4294967295|S>>>15),S=C+(R^x&(L^R))+N[3]+3250441966&4294967295,C=x+(S<<22&4294967295|S>>>10),S=R+(L^C&(x^L))+N[4]+4118548399&4294967295,R=C+(S<<7&4294967295|S>>>25),S=L+(x^R&(C^x))+N[5]+1200080426&4294967295,L=R+(S<<12&4294967295|S>>>20),S=x+(C^L&(R^C))+N[6]+2821735955&4294967295,x=L+(S<<17&4294967295|S>>>15),S=C+(R^x&(L^R))+N[7]+4249261313&4294967295,C=x+(S<<22&4294967295|S>>>10),S=R+(L^C&(x^L))+N[8]+1770035416&4294967295,R=C+(S<<7&4294967295|S>>>25),S=L+(x^R&(C^x))+N[9]+2336552879&4294967295,L=R+(S<<12&4294967295|S>>>20),S=x+(C^L&(R^C))+N[10]+4294925233&4294967295,x=L+(S<<17&4294967295|S>>>15),S=C+(R^x&(L^R))+N[11]+2304563134&4294967295,C=x+(S<<22&4294967295|S>>>10),S=R+(L^C&(x^L))+N[12]+1804603682&4294967295,R=C+(S<<7&4294967295|S>>>25),S=L+(x^R&(C^x))+N[13]+4254626195&4294967295,L=R+(S<<12&4294967295|S>>>20),S=x+(C^L&(R^C))+N[14]+2792965006&4294967295,x=L+(S<<17&4294967295|S>>>15),S=C+(R^x&(L^R))+N[15]+1236535329&4294967295,C=x+(S<<22&4294967295|S>>>10),S=R+(x^L&(C^x))+N[1]+4129170786&4294967295,R=C+(S<<5&4294967295|S>>>27),S=L+(C^x&(R^C))+N[6]+3225465664&4294967295,L=R+(S<<9&4294967295|S>>>23),S=x+(R^C&(L^R))+N[11]+643717713&4294967295,x=L+(S<<14&4294967295|S>>>18),S=C+(L^R&(x^L))+N[0]+3921069994&4294967295,C=x+(S<<20&4294967295|S>>>12),S=R+(x^L&(C^x))+N[5]+3593408605&4294967295,R=C+(S<<5&4294967295|S>>>27),S=L+(C^x&(R^C))+N[10]+38016083&4294967295,L=R+(S<<9&4294967295|S>>>23),S=x+(R^C&(L^R))+N[15]+3634488961&4294967295,x=L+(S<<14&4294967295|S>>>18),S=C+(L^R&(x^L))+N[4]+3889429448&4294967295,C=x+(S<<20&4294967295|S>>>12),S=R+(x^L&(C^x))+N[9]+568446438&4294967295,R=C+(S<<5&4294967295|S>>>27),S=L+(C^x&(R^C))+N[14]+3275163606&4294967295,L=R+(S<<9&4294967295|S>>>23),S=x+(R^C&(L^R))+N[3]+4107603335&4294967295,x=L+(S<<14&4294967295|S>>>18),S=C+(L^R&(x^L))+N[8]+1163531501&4294967295,C=x+(S<<20&4294967295|S>>>12),S=R+(x^L&(C^x))+N[13]+2850285829&4294967295,R=C+(S<<5&4294967295|S>>>27),S=L+(C^x&(R^C))+N[2]+4243563512&4294967295,L=R+(S<<9&4294967295|S>>>23),S=x+(R^C&(L^R))+N[7]+1735328473&4294967295,x=L+(S<<14&4294967295|S>>>18),S=C+(L^R&(x^L))+N[12]+2368359562&4294967295,C=x+(S<<20&4294967295|S>>>12),S=R+(C^x^L)+N[5]+4294588738&4294967295,R=C+(S<<4&4294967295|S>>>28),S=L+(R^C^x)+N[8]+2272392833&4294967295,L=R+(S<<11&4294967295|S>>>21),S=x+(L^R^C)+N[11]+1839030562&4294967295,x=L+(S<<16&4294967295|S>>>16),S=C+(x^L^R)+N[14]+4259657740&4294967295,C=x+(S<<23&4294967295|S>>>9),S=R+(C^x^L)+N[1]+2763975236&4294967295,R=C+(S<<4&4294967295|S>>>28),S=L+(R^C^x)+N[4]+1272893353&4294967295,L=R+(S<<11&4294967295|S>>>21),S=x+(L^R^C)+N[7]+4139469664&4294967295,x=L+(S<<16&4294967295|S>>>16),S=C+(x^L^R)+N[10]+3200236656&4294967295,C=x+(S<<23&4294967295|S>>>9),S=R+(C^x^L)+N[13]+681279174&4294967295,R=C+(S<<4&4294967295|S>>>28),S=L+(R^C^x)+N[0]+3936430074&4294967295,L=R+(S<<11&4294967295|S>>>21),S=x+(L^R^C)+N[3]+3572445317&4294967295,x=L+(S<<16&4294967295|S>>>16),S=C+(x^L^R)+N[6]+76029189&4294967295,C=x+(S<<23&4294967295|S>>>9),S=R+(C^x^L)+N[9]+3654602809&4294967295,R=C+(S<<4&4294967295|S>>>28),S=L+(R^C^x)+N[12]+3873151461&4294967295,L=R+(S<<11&4294967295|S>>>21),S=x+(L^R^C)+N[15]+530742520&4294967295,x=L+(S<<16&4294967295|S>>>16),S=C+(x^L^R)+N[2]+3299628645&4294967295,C=x+(S<<23&4294967295|S>>>9),S=R+(x^(C|~L))+N[0]+4096336452&4294967295,R=C+(S<<6&4294967295|S>>>26),S=L+(C^(R|~x))+N[7]+1126891415&4294967295,L=R+(S<<10&4294967295|S>>>22),S=x+(R^(L|~C))+N[14]+2878612391&4294967295,x=L+(S<<15&4294967295|S>>>17),S=C+(L^(x|~R))+N[5]+4237533241&4294967295,C=x+(S<<21&4294967295|S>>>11),S=R+(x^(C|~L))+N[12]+1700485571&4294967295,R=C+(S<<6&4294967295|S>>>26),S=L+(C^(R|~x))+N[3]+2399980690&4294967295,L=R+(S<<10&4294967295|S>>>22),S=x+(R^(L|~C))+N[10]+4293915773&4294967295,x=L+(S<<15&4294967295|S>>>17),S=C+(L^(x|~R))+N[1]+2240044497&4294967295,C=x+(S<<21&4294967295|S>>>11),S=R+(x^(C|~L))+N[8]+1873313359&4294967295,R=C+(S<<6&4294967295|S>>>26),S=L+(C^(R|~x))+N[15]+4264355552&4294967295,L=R+(S<<10&4294967295|S>>>22),S=x+(R^(L|~C))+N[6]+2734768916&4294967295,x=L+(S<<15&4294967295|S>>>17),S=C+(L^(x|~R))+N[13]+1309151649&4294967295,C=x+(S<<21&4294967295|S>>>11),S=R+(x^(C|~L))+N[4]+4149444226&4294967295,R=C+(S<<6&4294967295|S>>>26),S=L+(C^(R|~x))+N[11]+3174756917&4294967295,L=R+(S<<10&4294967295|S>>>22),S=x+(R^(L|~C))+N[2]+718787259&4294967295,x=L+(S<<15&4294967295|S>>>17),S=C+(L^(x|~R))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+R&4294967295,b.g[1]=b.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+L&4294967295}r.prototype.u=function(b,R){R===void 0&&(R=b.length);for(var C=R-this.blockSize,N=this.B,x=this.h,L=0;L<R;){if(x==0)for(;L<=C;)i(this,b,L),L+=this.blockSize;if(typeof b=="string"){for(;L<R;)if(N[x++]=b.charCodeAt(L++),x==this.blockSize){i(this,N),x=0;break}}else for(;L<R;)if(N[x++]=b[L++],x==this.blockSize){i(this,N),x=0;break}}this.h=x,this.o+=R},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var R=1;R<b.length-8;++R)b[R]=0;var C=8*this.o;for(R=b.length-8;R<b.length;++R)b[R]=C&255,C/=256;for(this.u(b),b=Array(16),R=C=0;4>R;++R)for(var N=0;32>N;N+=8)b[C++]=this.g[R]>>>N&255;return b};function o(b,R){var C=c;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=R(b)}function l(b,R){this.h=R;for(var C=[],N=!0,x=b.length-1;0<=x;x--){var L=b[x]|0;N&&L==R||(C[x]=L,N=!1)}this.g=C}var c={};function h(b){return-128<=b&&128>b?o(b,function(R){return new l([R|0],0>R?-1:0)}):new l([b|0],0>b?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return v;if(0>b)return k(p(-b));for(var R=[],C=1,N=0;b>=C;N++)R[N]=b/C|0,C*=4294967296;return new l(R,0)}function y(b,R){if(b.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b.charAt(0)=="-")return k(y(b.substring(1),R));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=p(Math.pow(R,8)),N=v,x=0;x<b.length;x+=8){var L=Math.min(8,b.length-x),S=parseInt(b.substring(x,x+L),R);8>L?(L=p(Math.pow(R,L)),N=N.j(L).add(p(S))):(N=N.j(C),N=N.add(p(S)))}return N}var v=h(0),E=h(1),A=h(16777216);n=l.prototype,n.m=function(){if(V(this))return-k(this).m();for(var b=0,R=1,C=0;C<this.g.length;C++){var N=this.i(C);b+=(0<=N?N:4294967296+N)*R,R*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(V(this))return"-"+k(this).toString(b);for(var R=p(Math.pow(b,6)),C=this,N="";;){var x=ne(C,R).g;C=Y(C,x.j(R));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=x,D(C))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var R=0;R<b.g.length;R++)if(b.g[R]!=0)return!1;return!0}function V(b){return b.h==-1}n.l=function(b){return b=Y(this,b),V(b)?-1:D(b)?0:1};function k(b){for(var R=b.g.length,C=[],N=0;N<R;N++)C[N]=~b.g[N];return new l(C,~b.h).add(E)}n.abs=function(){return V(this)?k(this):this},n.add=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],N=0,x=0;x<=R;x++){var L=N+(this.i(x)&65535)+(b.i(x)&65535),S=(L>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);N=S>>>16,L&=65535,S&=65535,C[x]=S<<16|L}return new l(C,C[C.length-1]&-2147483648?-1:0)};function Y(b,R){return b.add(k(R))}n.j=function(b){if(D(this)||D(b))return v;if(V(this))return V(b)?k(this).j(k(b)):k(k(this).j(b));if(V(b))return k(this.j(k(b)));if(0>this.l(A)&&0>b.l(A))return p(this.m()*b.m());for(var R=this.g.length+b.g.length,C=[],N=0;N<2*R;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<b.g.length;x++){var L=this.i(N)>>>16,S=this.i(N)&65535,Re=b.i(x)>>>16,Te=b.i(x)&65535;C[2*N+2*x]+=S*Te,q(C,2*N+2*x),C[2*N+2*x+1]+=L*Te,q(C,2*N+2*x+1),C[2*N+2*x+1]+=S*Re,q(C,2*N+2*x+1),C[2*N+2*x+2]+=L*Re,q(C,2*N+2*x+2)}for(N=0;N<R;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=R;N<2*R;N++)C[N]=0;return new l(C,0)};function q(b,R){for(;(b[R]&65535)!=b[R];)b[R+1]+=b[R]>>>16,b[R]&=65535,R++}function K(b,R){this.g=b,this.h=R}function ne(b,R){if(D(R))throw Error("division by zero");if(D(b))return new K(v,v);if(V(b))return R=ne(k(b),R),new K(k(R.g),k(R.h));if(V(R))return R=ne(b,k(R)),new K(k(R.g),R.h);if(30<b.g.length){if(V(b)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var C=E,N=R;0>=N.l(b);)C=he(C),N=he(N);var x=ue(C,1),L=ue(N,1);for(N=ue(N,2),C=ue(C,2);!D(N);){var S=L.add(N);0>=S.l(b)&&(x=x.add(C),L=S),N=ue(N,1),C=ue(C,1)}return R=Y(b,x.j(R)),new K(x,R)}for(x=v;0<=b.l(R);){for(C=Math.max(1,Math.floor(b.m()/R.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=p(C),S=L.j(R);V(S)||0<S.l(b);)C-=N,L=p(C),S=L.j(R);D(L)&&(L=E),x=x.add(L),b=Y(b,S)}return new K(x,b)}n.A=function(b){return ne(this,b).h},n.and=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],N=0;N<R;N++)C[N]=this.i(N)&b.i(N);return new l(C,this.h&b.h)},n.or=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],N=0;N<R;N++)C[N]=this.i(N)|b.i(N);return new l(C,this.h|b.h)},n.xor=function(b){for(var R=Math.max(this.g.length,b.g.length),C=[],N=0;N<R;N++)C[N]=this.i(N)^b.i(N);return new l(C,this.h^b.h)};function he(b){for(var R=b.g.length+1,C=[],N=0;N<R;N++)C[N]=b.i(N)<<1|b.i(N-1)>>>31;return new l(C,b.h)}function ue(b,R){var C=R>>5;R%=32;for(var N=b.g.length-C,x=[],L=0;L<N;L++)x[L]=0<R?b.i(L+C)>>>R|b.i(L+C+1)<<32-R:b.i(L+C);return new l(x,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nR=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,ko=l}).apply(typeof NE<"u"?NE:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rR,lc,iR,tf,e_,sR,oR,aR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,w){return d==Array.prototype||d==Object.prototype||(d[g]=w.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var g=0;g<d.length;++g){var w=d[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var w=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var B=d[T];if(!(B in w))break e;w=w[B]}d=d[d.length-1],T=w[d],g=g(T),g!=T&&g!=null&&e(w,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var w=0,T=!1,B={next:function(){if(!T&&w<d.length){var H=w++;return{value:g(H,d[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function p(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function y(d,g,w){return d.call.apply(d.bind,arguments)}function v(d,g,w){if(!d)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),d.apply(g,B)}}return function(){return d.apply(g,arguments)}}function E(d,g,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function A(d,g){var w=Array.prototype.slice.call(arguments,1);return function(){var T=w.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function D(d,g){function w(){}w.prototype=g.prototype,d.aa=g.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(T,B,H){for(var oe=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)oe[Ye-2]=arguments[Ye];return g.prototype[B].apply(T,oe)}}function V(d){const g=d.length;if(0<g){const w=Array(g);for(let T=0;T<g;T++)w[T]=d[T];return w}return[]}function k(d,g){for(let w=1;w<arguments.length;w++){const T=arguments[w];if(h(T)){const B=d.length||0,H=T.length||0;d.length=B+H;for(let oe=0;oe<H;oe++)d[B+oe]=T[oe]}else d.push(T)}}class Y{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function q(d){return/^[\s\xa0]*$/.test(d)}function K(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function ne(d){return ne[" "](d),d}ne[" "]=function(){};var he=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ue(d,g,w){for(const T in d)g.call(w,d[T],T,d)}function b(d,g){for(const w in d)g.call(void 0,d[w],w,d)}function R(d){const g={};for(const w in d)g[w]=d[w];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,g){let w,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(w in T)d[w]=T[w];for(let H=0;H<C.length;H++)w=C[H],Object.prototype.hasOwnProperty.call(T,w)&&(d[w]=T[w])}}function x(d){var g=1;d=d.split(":");const w=[];for(;0<g&&d.length;)w.push(d.shift()),g--;return d.length&&w.push(d.join(":")),w}function L(d){c.setTimeout(()=>{throw d},0)}function S(){var d=we;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Re{constructor(){this.h=this.g=null}add(g,w){const T=Te.get();T.set(g,w),this.h?this.h.next=T:this.g=T,this.h=T}}var Te=new Y(()=>new St,d=>d.reset());class St{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,ae=!1,we=new Re,de=()=>{const d=c.Promise.resolve(void 0);Me=()=>{d.then(F)}};var F=()=>{for(var d;d=S();){try{d.h.call(d.g)}catch(w){L(w)}var g=Te;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}ae=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};c.addEventListener("test",w,g),c.removeEventListener("test",w,g)}catch{}return d}();function Ve(d,g){if(Se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(he){e:{try{ne(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else w=="mouseover"?g=d.fromElement:w=="mouseout"&&(g=d.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:$e[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ve.aa.h.call(this)}}D(Ve,Se);var $e={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function tt(d,g,w,T,B){this.listener=d,this.proxy=null,this.src=g,this.type=w,this.capture=!!T,this.ha=B,this.key=++Qe,this.da=this.fa=!1}function zt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Zr(d){this.src=d,this.g={},this.h=0}Zr.prototype.add=function(d,g,w,T,B){var H=d.toString();d=this.g[H],d||(d=this.g[H]=[],this.h++);var oe=Li(d,g,T,B);return-1<oe?(g=d[oe],w||(g.fa=!1)):(g=new tt(g,this.src,H,!!T,B),g.fa=w,d.push(g)),g};function ta(d,g){var w=g.type;if(w in d.g){var T=d.g[w],B=Array.prototype.indexOf.call(T,g,void 0),H;(H=0<=B)&&Array.prototype.splice.call(T,B,1),H&&(zt(g),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Li(d,g,w,T){for(var B=0;B<d.length;++B){var H=d[B];if(!H.da&&H.listener==g&&H.capture==!!w&&H.ha==T)return B}return-1}var Bs="closure_lm_"+(1e6*Math.random()|0),na={};function Xl(d,g,w,T,B){if(Array.isArray(g)){for(var H=0;H<g.length;H++)Xl(d,g[H],w,T,B);return null}return w=tu(w),d&&d[Ke]?d.K(g,w,p(T)?!!T.capture:!1,B):Zl(d,g,w,!1,T,B)}function Zl(d,g,w,T,B,H){if(!g)throw Error("Invalid event type");var oe=p(B)?!!B.capture:!!B,Ye=ia(d);if(Ye||(d[Bs]=Ye=new Zr(d)),w=Ye.add(g,w,T,oe,H),w.proxy)return w;if(T=Id(),w.proxy=T,T.src=d,T.listener=w,d.addEventListener)De||(B=oe),B===void 0&&(B=!1),d.addEventListener(g.toString(),T,B);else if(d.attachEvent)d.attachEvent(ti(g.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Id(){function d(w){return g.call(d.src,d.listener,w)}const g=eu;return d}function ra(d,g,w,T,B){if(Array.isArray(g))for(var H=0;H<g.length;H++)ra(d,g[H],w,T,B);else T=p(T)?!!T.capture:!!T,w=tu(w),d&&d[Ke]?(d=d.i,g=String(g).toString(),g in d.g&&(H=d.g[g],w=Li(H,w,T,B),-1<w&&(zt(H[w]),Array.prototype.splice.call(H,w,1),H.length==0&&(delete d.g[g],d.h--)))):d&&(d=ia(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Li(g,w,T,B)),(w=-1<d?g[d]:null)&&ei(w))}function ei(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ke])ta(g.i,d);else{var w=d.type,T=d.proxy;g.removeEventListener?g.removeEventListener(w,T,d.capture):g.detachEvent?g.detachEvent(ti(w),T):g.addListener&&g.removeListener&&g.removeListener(T),(w=ia(g))?(ta(w,d),w.h==0&&(w.src=null,g[Bs]=null)):zt(d)}}}function ti(d){return d in na?na[d]:na[d]="on"+d}function eu(d,g){if(d.da)d=!0;else{g=new Ve(g,this);var w=d.listener,T=d.ha||d.src;d.fa&&ei(d),d=w.call(T,g)}return d}function ia(d){return d=d[Bs],d instanceof Zr?d:null}var sa="__closure_events_fn_"+(1e9*Math.random()>>>0);function tu(d){return typeof d=="function"?d:(d[sa]||(d[sa]=function(g){return d.handleEvent(g)}),d[sa])}function Vt(){J.call(this),this.i=new Zr(this),this.M=this,this.F=null}D(Vt,J),Vt.prototype[Ke]=!0,Vt.prototype.removeEventListener=function(d,g,w,T){ra(this,d,g,w,T)};function Lt(d,g){var w,T=d.F;if(T)for(w=[];T;T=T.F)w.push(T);if(d=d.M,T=g.type||g,typeof g=="string")g=new Se(g,d);else if(g instanceof Se)g.target=g.target||d;else{var B=g;g=new Se(T,d),N(g,B)}if(B=!0,w)for(var H=w.length-1;0<=H;H--){var oe=g.g=w[H];B=ni(oe,T,!0,g)&&B}if(oe=g.g=d,B=ni(oe,T,!0,g)&&B,B=ni(oe,T,!1,g)&&B,w)for(H=0;H<w.length;H++)oe=g.g=w[H],B=ni(oe,T,!1,g)&&B}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var w=d.g[g],T=0;T<w.length;T++)zt(w[T]);delete d.g[g],d.h--}}this.F=null},Vt.prototype.K=function(d,g,w,T){return this.i.add(String(d),g,!1,w,T)},Vt.prototype.L=function(d,g,w,T){return this.i.add(String(d),g,!0,w,T)};function ni(d,g,w,T){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,H=0;H<g.length;++H){var oe=g[H];if(oe&&!oe.da&&oe.capture==w){var Ye=oe.listener,Mt=oe.ha||oe.src;oe.fa&&ta(d.i,oe),B=Ye.call(Mt,T)!==!1&&B}}return B&&!T.defaultPrevented}function nu(d,g,w){if(typeof d=="function")w&&(d=E(d,w));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Mi(d){d.g=nu(()=>{d.g=null,d.i&&(d.i=!1,Mi(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class js extends J{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Mi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(d){J.call(this),this.h=d,this.g={}}D($s,J);var ru=[];function iu(d){ue(d.g,function(g,w){this.g.hasOwnProperty(w)&&ei(g)},d),d.g={}}$s.prototype.N=function(){$s.aa.N.call(this),iu(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var su=c.JSON.stringify,ou=c.JSON.parse,au=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function zs(){}zs.prototype.h=null;function oa(d){return d.h||(d.h=d.i())}function aa(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cr(){Se.call(this,"d")}D(Cr,Se);function la(){Se.call(this,"c")}D(la,Se);var br={},lu=null;function qs(){return lu=lu||new Vt}br.La="serverreachability";function uu(d){Se.call(this,br.La,d)}D(uu,Se);function ri(d){const g=qs();Lt(g,new uu(g))}br.STAT_EVENT="statevent";function cu(d,g){Se.call(this,br.STAT_EVENT,d),this.stat=g}D(cu,Se);function Rt(d){const g=qs();Lt(g,new cu(g,d))}br.Ma="timingevent";function ua(d,g){Se.call(this,br.Ma,d),this.size=g}D(ua,Se);function cr(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function Ws(){this.g=!0}Ws.prototype.xa=function(){this.g=!1};function Gs(d,g,w,T,B,H){d.info(function(){if(d.g)if(H)for(var oe="",Ye=H.split("&"),Mt=0;Mt<Ye.length;Mt++){var ze=Ye[Mt].split("=");if(1<ze.length){var qt=ze[0];ze=ze[1];var bt=qt.split("_");oe=2<=bt.length&&bt[1]=="type"?oe+(qt+"="+ze+"&"):oe+(qt+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+g+`
`+w+`
`+oe})}function ca(d,g,w,T,B,H,oe){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+g+`
`+w+`
`+H+" "+oe})}function dr(d,g,w,T){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Vp(d,w)+(T?" "+T:"")})}function du(d,g){d.info(function(){return"TIMEOUT: "+g})}Ws.prototype.info=function(){};function Vp(d,g){if(!d.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var T=w[d];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return su(w)}catch{return g}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ed={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hr;function Hs(){}D(Hs,zs),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},hr=new Hs;function fr(d,g,w,T){this.j=d,this.i=g,this.l=w,this.R=T||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Td}function Td(){this.i=null,this.g="",this.h=!1}var hu={},ha={};function fa(d,g,w){d.L=1,d.v=$i($n(g)),d.m=w,d.P=!0,fu(d,null)}function fu(d,g){d.F=Date.now(),nt(d),d.A=$n(d.v);var w=d.A,T=d.R;Array.isArray(T)||(T=[String(T)]),qi(w.i,"t",T),d.C=0,w=d.j.J,d.h=new Td,d.g=jd(d.j,w?g:null,!d.m),0<d.O&&(d.M=new js(E(d.Y,d,d.g),d.O)),g=d.U,w=d.g,T=d.ca;var B="readystatechange";Array.isArray(B)||(B&&(ru[0]=B.toString()),B=ru);for(var H=0;H<B.length;H++){var oe=Xl(w,B[H],T||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ri(),Gs(d.i,d.u,d.A,d.l,d.R,d.m)}fr.prototype.ca=function(d){d=d.target;const g=this.M;g&&Pn(d)==3?g.j():this.Y(d)},fr.prototype.Y=function(d){try{if(d==this.g)e:{const bt=Pn(this.g);var g=this.g.Ba();const er=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||bt!=4||g==7||(g==8||0>=er?ri(3):ri(2)),Ks(this);var w=this.g.Z();this.X=w;t:if(Sd(this)){var T=vu(this.g);d="";var B=T.length,H=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),Ui(this);var oe="";break t}this.h.i=new c.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,d+=this.h.i.decode(T[g],{stream:!(H&&g==B-1)});T.length=0,this.h.g+=d,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=w==200,ca(this.i,this.u,this.A,this.l,this.R,bt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Mt=this.g;if((Ye=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ye)){var ze=Ye;break t}}ze=null}if(w=ze)dr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pu(this,w);else{this.o=!1,this.s=3,Rt(12),Xn(this),Ui(this);break e}}if(this.P){w=!0;let qn;for(;!this.J&&this.C<oe.length;)if(qn=Lp(this,oe),qn==ha){bt==4&&(this.s=4,Rt(14),w=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==hu){this.s=4,Rt(15),dr(this.i,this.l,oe,"[Invalid Chunk]"),w=!1;break}else dr(this.i,this.l,qn,null),pu(this,qn);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||oe.length!=0||this.h.h||(this.s=1,Rt(16),w=!1),this.o=this.o&&w,!w)dr(this.i,this.l,oe,"[Invalid Chunked Response]"),Xn(this),Ui(this);else if(0<oe.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Iu(qt),qt.M=!0,Rt(11))}}else dr(this.i,this.l,oe,null),pu(this,oe);bt==4&&Xn(this),this.o&&!this.J&&(bt==4?Sa(this.j,this):(this.o=!1,nt(this)))}else va(this.g),w==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Xn(this),Ui(this)}}}catch{}finally{}};function Sd(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Lp(d,g){var w=d.C,T=g.indexOf(`
`,w);return T==-1?ha:(w=Number(g.substring(w,T)),isNaN(w)?hu:(T+=1,T+w>g.length?ha:(g=g.slice(T,T+w),d.C=T+w,g)))}fr.prototype.cancel=function(){this.J=!0,Xn(this)};function nt(d){d.S=Date.now()+d.I,Rd(d,d.I)}function Rd(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=cr(E(d.ba,d),g)}function Ks(d){d.B&&(c.clearTimeout(d.B),d.B=null)}fr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(du(this.i,this.A),this.L!=2&&(ri(),Rt(17)),Xn(this),this.s=2,Ui(this)):Rd(this,this.S-d)};function Ui(d){d.j.G==0||d.J||Sa(d.j,d)}function Xn(d){Ks(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,iu(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function pu(d,g){try{var w=d.j;if(w.G!=0&&(w.g==d||pn(w.h,d))){if(!d.K&&pn(w.h,d)&&w.G==3){try{var T=w.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)Ta(w),yr(w);else break e;Ea(w),Rt(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=cr(E(w.Za,w),6e3));if(1>=Pd(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else li(w,11)}else if((d.K||w.g==d)&&Ta(w),!q(g))for(B=w.Da.g.parse(g),g=0;g<B.length;g++){let ze=B[g];if(w.T=ze[0],ze=ze[1],w.G==2)if(ze[0]=="c"){w.K=ze[1],w.ia=ze[2];const qt=ze[3];qt!=null&&(w.la=qt,w.j.info("VER="+w.la));const bt=ze[4];bt!=null&&(w.Aa=bt,w.j.info("SVER="+w.Aa));const er=ze[5];er!=null&&typeof er=="number"&&0<er&&(T=1.5*er,w.L=T,w.j.info("backChannelRequestTimeoutMs_="+T)),T=w;const qn=d.g;if(qn){const to=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var H=T.h;H.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(mu(H,H.h),H.h=null))}if(T.D){const Aa=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(T.ya=Aa,et(T.I,T.D,Aa))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),T=w;var oe=d;if(T.qa=Bd(T,T.J?T.ia:null,T.W),oe.K){kd(T.h,oe);var Ye=oe,Mt=T.L;Mt&&(Ye.I=Mt),Ye.B&&(Ks(Ye),nt(Ye)),T.g=oe}else eo(T);0<w.i.length&&Or(w)}else ze[0]!="stop"&&ze[0]!="close"||li(w,7);else w.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?li(w,7):Xt(w):ze[0]!="noop"&&w.l&&w.l.ta(ze),w.v=0)}}ri(4)}catch{}}var Ad=class{constructor(d,g){this.g=d,this.map=g}};function Qs(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Pd(d){return d.h?1:d.g?d.g.size:0}function pn(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function mu(d,g){d.g?d.g.add(g):d.h=g}function kd(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Qs.prototype.cancel=function(){if(this.i=Cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Cd(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const w of d.g.values())g=g.concat(w.D);return g}return V(d.i)}function pa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var g=[],w=d.length,T=0;T<w;T++)g.push(d[T]);return g}g=[],w=0;for(T in d)g[w++]=d[T];return g}function ma(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var g=[];d=d.length;for(var w=0;w<d;w++)g.push(w);return g}g=[],w=0;for(const T in d)g[w++]=T;return g}}}function Fi(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var w=ma(d),T=pa(d),B=T.length,H=0;H<B;H++)g.call(void 0,T[H],w&&w[H],d)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mp(d,g){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var T=d[w].indexOf("="),B=null;if(0<=T){var H=d[w].substring(0,T);B=d[w].substring(T+1)}else H=d[w];g(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ii(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ii){this.h=d.h,Ys(this,d.j),this.o=d.o,this.g=d.g,Bi(this,d.s),this.l=d.l;var g=d.i,w=new Nr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),ji(this,w),this.m=d.m}else d&&(g=String(d).match(Js))?(this.h=!1,Ys(this,g[1]||"",!0),this.o=je(g[2]||""),this.g=je(g[3]||"",!0),Bi(this,g[4]),this.l=je(g[5]||"",!0),ji(this,g[6]||"",!0),this.m=je(g[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}ii.prototype.toString=function(){var d=[],g=this.j;g&&d.push(zi(g,ga,!0),":");var w=this.g;return(w||g=="file")&&(d.push("//"),(g=this.o)&&d.push(zi(g,ga,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(zi(w,w.charAt(0)=="/"?xd:Nd,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",zi(w,gu)),d.join("")};function $n(d){return new ii(d)}function Ys(d,g,w){d.j=w?je(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Bi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function ji(d,g,w){g instanceof Nr?(d.i=g,xr(d.i,d.h)):(w||(g=zi(g,Dd)),d.i=new Nr(g,d.h))}function et(d,g,w){d.i.set(g,w)}function $i(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function je(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zi(d,g,w){return typeof d=="string"?(d=encodeURI(d).replace(g,bd),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ga=/[#\/\?@]/g,Nd=/[#\?:]/g,xd=/[#\?]/g,Dd=/[#\?@]/g,gu=/#/g;function Nr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Yt(d){d.g||(d.g=new Map,d.h=0,d.i&&Mp(d.i,function(g,w){d.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=Nr.prototype,n.add=function(d,g){Yt(this),this.i=null,d=Zn(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(g),this.h+=1,this};function pr(d,g){Yt(d),g=Zn(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function mr(d,g){return Yt(d),g=Zn(d,g),d.g.has(g)}n.forEach=function(d,g){Yt(this),this.g.forEach(function(w,T){w.forEach(function(B){d.call(g,B,T,this)},this)},this)},n.na=function(){Yt(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let T=0;T<g.length;T++){const B=d[T];for(let H=0;H<B.length;H++)w.push(g[T])}return w},n.V=function(d){Yt(this);let g=[];if(typeof d=="string")mr(this,d)&&(g=g.concat(this.g.get(Zn(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)g=g.concat(d[w])}return g},n.set=function(d,g){return Yt(this),this.i=null,d=Zn(this,d),mr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function qi(d,g,w){pr(d,g),0<w.length&&(d.i=null,d.g.set(Zn(d,g),V(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var T=g[w];const H=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var B=H;oe[T]!==""&&(B+="="+encodeURIComponent(String(oe[T]))),d.push(B)}}return this.i=d.join("&")};function Zn(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function xr(d,g){g&&!d.j&&(Yt(d),d.i=null,d.g.forEach(function(w,T){var B=T.toLowerCase();T!=B&&(pr(this,T),qi(this,B,w))},d)),d.j=g}function Up(d,g){const w=new Ws;if(c.Image){const T=new Image;T.onload=A(An,w,"TestLoadImage: loaded",!0,g,T),T.onerror=A(An,w,"TestLoadImage: error",!1,g,T),T.onabort=A(An,w,"TestLoadImage: abort",!1,g,T),T.ontimeout=A(An,w,"TestLoadImage: timeout",!1,g,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else g(!1)}function Od(d,g){const w=new Ws,T=new AbortController,B=setTimeout(()=>{T.abort(),An(w,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:T.signal}).then(H=>{clearTimeout(B),H.ok?An(w,"TestPingServer: ok",!0,g):An(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),An(w,"TestPingServer: error",!1,g)})}function An(d,g,w,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(w)}catch{}}function Fp(){this.g=new au}function Vd(d,g,w){const T=w||"";try{Fi(d,function(B,H){let oe=B;p(B)&&(oe=su(B)),g.push(T+H+"="+encodeURIComponent(oe))})}catch(B){throw g.push(T+"type="+encodeURIComponent("_badmap")),B}}function si(d){this.l=d.Ub||null,this.j=d.eb||!1}D(si,zs),si.prototype.g=function(){return new Xs(this.l,this.j)},si.prototype.i=function(d){return function(){return d}}({});function Xs(d,g){Vt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Xs,Vt),n=Xs.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,_r(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ld(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ld(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?gr(this):_r(this),this.readyState==3&&Ld(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,gr(this))},n.Qa=function(d){this.g&&(this.response=d,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,_r(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=g.next();return d.join(`\r
`)};function _r(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function oi(d){let g="";return ue(d,function(w,T){g+=T,g+=":",g+=w,g+=`\r
`}),g}function Wi(d,g,w){e:{for(T in w){var T=!1;break e}T=!0}T||(w=oi(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):et(d,g,w))}function ut(d){Vt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ut,Vt);var Bp=/^https?$/i,_u=["POST","PUT"];n=ut.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,w,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hr.g(),this.v=this.o?oa(this.o):oa(hr),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(H){Zs(this,H);return}if(d=w||"",w=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)w.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())w.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),B=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_u,g,void 0))||T||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of w)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ya(this),this.u=!0,this.g.send(d),this.u=!1}catch(H){Zs(this,H)}};function Zs(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,_a(d),zn(d)}function _a(d){d.A||(d.A=!0,Lt(d,"complete"),Lt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Lt(this,"complete"),Lt(this,"abort"),zn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},n.bb=function(){yu(this)};function yu(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Pn(d)!=4||d.Z()!=2)){if(d.u&&Pn(d)==4)nu(d.Ea,0,d);else if(Lt(d,"readystatechange"),Pn(d)==4){d.h=!1;try{const oe=d.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var T;if(T=oe===0){var B=String(d.D).match(Js)[1]||null;!B&&c.self&&c.self.location&&(B=c.self.location.protocol.slice(0,-1)),T=!Bp.test(B?B.toLowerCase():"")}w=T}if(w)Lt(d,"complete"),Lt(d,"success");else{d.m=6;try{var H=2<Pn(d)?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.Z()+"]",_a(d)}}finally{zn(d)}}}}function zn(d,g){if(d.g){ya(d);const w=d.g,T=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Lt(d,"ready");try{w.onreadystatechange=T}catch{}}}function ya(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Pn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),ou(g)}};function vu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function va(d){const g={};d=(d.g&&2<=Pn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(q(d[T]))continue;var w=x(d[T]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=g[B]||[];g[B]=H,H.push(w)}b(g,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(d,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||g}function wu(d){this.Aa=0,this.i=[],this.j=new Ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,d),this.cb=Dr("retryDelaySeedMs",1e4,d),this.Wa=Dr("forwardChannelMaxRetries",2,d),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(d&&d.concurrentRequestLimit),this.Da=new Fp,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wu.prototype,n.la=8,n.G=1,n.connect=function(d,g,w,T){Rt(0),this.W=d,this.H=g||{},w&&T!==void 0&&(this.H.OSID=w,this.H.OAID=T),this.F=this.X,this.I=Bd(this,null,this.W),Or(this)};function Xt(d){if(wa(d),d.G==3){var g=d.U++,w=$n(d.I);if(et(w,"SID",d.K),et(w,"RID",g),et(w,"TYPE","terminate"),ai(d,w),g=new fr(d,d.j,g),g.L=2,g.v=$i($n(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=g.v,w=!0),w||(g.g=jd(g.j,null),g.g.ea(g.v)),g.F=Date.now(),nt(g)}Fd(d)}function yr(d){d.g&&(Iu(d),d.g.cancel(),d.g=null)}function wa(d){yr(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ta(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Or(d){if(!jn(d.h)&&!d.s){d.s=!0;var g=d.Ga;Me||de(),ae||(Me(),ae=!0),we.add(g,d),d.B=0}}function jp(d,g){return Pd(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=cr(E(d.Ga,d,g),Ud(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const B=new fr(this,this.j,d);let H=this.o;if(this.S&&(H?(H=R(H),N(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var T=this.i[w];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Gi(this,B,g),w=$n(this.I),et(w,"RID",d),et(w,"CVER",22),this.D&&et(w,"X-HTTP-Session-Id",this.D),ai(this,w),H&&(this.O?g="headers="+encodeURIComponent(String(oi(H)))+"&"+g:this.m&&Wi(w,this.m,H)),mu(this.h,B),this.Ua&&et(w,"TYPE","init"),this.P?(et(w,"$req",g),et(w,"SID","null"),B.T=!0,fa(B,w,null)):fa(B,w,g),this.G=2}}else this.G==3&&(d?Ia(this,d):this.i.length==0||jn(this.h)||Ia(this))};function Ia(d,g){var w;g?w=g.l:w=d.U++;const T=$n(d.I);et(T,"SID",d.K),et(T,"RID",w),et(T,"AID",d.T),ai(d,T),d.m&&d.o&&Wi(T,d.m,d.o),w=new fr(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Gi(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),mu(d.h,w),fa(w,T,g)}function ai(d,g){d.H&&ue(d.H,function(w,T){et(g,T,w)}),d.l&&Fi({},function(w,T){et(g,T,w)})}function Gi(d,g,w){w=Math.min(d.i.length,w);var T=d.l?E(d.l.Na,d.l,d):null;e:{var B=d.i;let H=-1;for(;;){const oe=["count="+w];H==-1?0<w?(H=B[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let Ye=!0;for(let Mt=0;Mt<w;Mt++){let ze=B[Mt].g;const qt=B[Mt].map;if(ze-=H,0>ze)H=Math.max(0,B[Mt].g-100),Ye=!1;else try{Vd(qt,oe,"req"+ze+"_")}catch{T&&T(qt)}}if(Ye){T=oe.join("&");break e}}}return d=d.i.splice(0,w),g.D=d,T}function eo(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Me||de(),ae||(Me(),ae=!0),we.add(g,d),d.v=0}}function Ea(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=cr(E(d.Fa,d),Ud(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Md(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=cr(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),yr(this),Md(this))};function Iu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Md(d){d.g=new fr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=$n(d.qa);et(g,"RID","rpc"),et(g,"SID",d.K),et(g,"AID",d.T),et(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(g,"TO",d.ja),et(g,"TYPE","xmlhttp"),ai(d,g),d.m&&d.o&&Wi(g,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=$i($n(g)),w.m=null,w.P=!0,fu(w,d)}n.Za=function(){this.C!=null&&(this.C=null,yr(this),Ea(this),Rt(19))};function Ta(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Sa(d,g){var w=null;if(d.g==g){Ta(d),Iu(d),d.g=null;var T=2}else if(pn(d.h,g))w=g.D,kd(d.h,g),T=1;else return;if(d.G!=0){if(g.o)if(T==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var B=d.B;T=qs(),Lt(T,new ua(T,w)),Or(d)}else eo(d);else if(B=g.s,B==3||B==0&&0<g.X||!(T==1&&jp(d,g)||T==2&&Ea(d)))switch(w&&0<w.length&&(g=d.h,g.i=g.i.concat(w)),B){case 1:li(d,5);break;case 4:li(d,10);break;case 3:li(d,6);break;default:li(d,2)}}}function Ud(d,g){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*g}function li(d,g){if(d.j.info("Error code "+g),g==2){var w=E(d.fb,d),T=d.Xa;const B=!T;T=new ii(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ys(T,"https"),$i(T),B?Up(T.toString(),w):Od(T.toString(),w)}else Rt(2);d.G=0,d.l&&d.l.sa(g),Fd(d),wa(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Fd(d){if(d.G=0,d.ka=[],d.l){const g=Cd(d.h);(g.length!=0||d.i.length!=0)&&(k(d.ka,g),k(d.ka,d.i),d.h.i.length=0,V(d.i),d.i.length=0),d.l.ra()}}function Bd(d,g,w){var T=w instanceof ii?$n(w):new ii(w);if(T.g!="")g&&(T.g=g+"."+T.g),Bi(T,T.s);else{var B=c.location;T=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var H=new ii(null);T&&Ys(H,T),g&&(H.g=g),B&&Bi(H,B),w&&(H.l=w),T=H}return w=d.D,g=d.ya,w&&g&&et(T,w,g),et(T,"VER",d.la),ai(d,T),T}function jd(d,g,w){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new ut(new si({eb:w})):new ut(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}n=Eu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ra(){}Ra.prototype.g=function(d,g){return new mn(d,g)};function mn(d,g){Vt.call(this),this.g=new wu(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!q(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!q(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Vr(this)}D(mn,Vt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Xt(this.g)},mn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=su(d),d=w);g.i.push(new Ad(g.Ya++,d)),g.G==3&&Or(g)},mn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,mn.aa.N.call(this)};function $d(d){Cr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const w in g){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}D($d,Cr);function zd(){la.call(this),this.status=1}D(zd,la);function Vr(d){this.g=d}D(Vr,Eu),Vr.prototype.ua=function(){Lt(this.g,"a")},Vr.prototype.ta=function(d){Lt(this.g,new $d(d))},Vr.prototype.sa=function(d){Lt(this.g,new zd)},Vr.prototype.ra=function(){Lt(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,aR=function(){return new Ra},oR=function(){return qs()},sR=br,e_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,tf=da,Ed.COMPLETE="complete",iR=Ed,aa.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,lc=aa,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,rR=ut}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Qc("@firebase/firestore");function rl(){return As.logLevel}function bV(n){As.setLogLevel(n)}function ee(n,...e){if(As.logLevel<=Oe.DEBUG){const t=e.map(hy);As.debug(`Firestore (${zl}): ${n}`,...t)}}function Pt(n,...e){if(As.logLevel<=Oe.ERROR){const t=e.map(hy);As.error(`Firestore (${zl}): ${n}`,...t)}}function Qr(n,...e){if(As.logLevel<=Oe.WARN){const t=e.map(hy);As.warn(`Firestore (${zl}): ${n}`,...t)}}function hy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+n;throw Pt(e),new Error(e)}function ve(n,e){n||pe()}function NV(n,e){n||pe()}function ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class DV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class OV{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new lR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Qt(e)}}class VV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new VV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ve(this.o===void 0);const r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new MV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=FV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Tl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new X(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new pt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new pt(0,0))}static max(){return new Ee(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(),r===void 0?r=e.length-t:r>e.length-t&&pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ue extends Dc{construct(e,t,r){return new Ue(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ue(t)}static emptyPath(){return new Ue([])}}const BV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Dc{construct(e,t,r){return new ht(e,t,r)}static isValidIdentifier(e){return BV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new X(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new X(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new X(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new X(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ue.fromString(e))}static fromName(e){return new le(Ue.fromString(e).popFirst(5))}static empty(){return new le(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function t_(n){return n.fields.find(e=>e.kind===2)}function _o(n){return n.fields.filter(e=>e.kind!==2)}Tf.UNKNOWN_ID=-1;class nf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oc(0,Jn.min())}}function dR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new Jn(i,le.empty(),e)}function hR(n){return new Jn(n.readTime,n.key,-1)}class Jn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jn(Ee.min(),le.empty(),-1)}static max(){return new Jn(Ee.max(),le.empty(),-1)}}function fy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==fR)throw n;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,r)=>{t(e)})}static reject(e){return new $((t,r)=>{r(e)})}static waitFor(e){return new $((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next(i=>i?$.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new $((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(y=>{l[p]=y,++c,c===o&&r(l)},y=>i(y))}})}static doWhile(e,t){return new $((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new sn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mc(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=py(r.target.error);this.V.reject(new mc(e,i))}}static open(e,t,r,i){try{return new ap(t,e.transaction(i,r))}catch(o){throw new mc(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $V(t)}}class qr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,qr.S(Be())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),yo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Rc())return!1;if(qr.v())return!0;const e=Be(),t=qr.S(e),r=0<t&&t<10,i=mR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new mc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new X(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new X(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new mc(e,l))},i.onupgradeneeded=o=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.p.O(l,i.transaction,o.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const c=ap.open(this.db,e,o?"readonly":"readwrite",r),h=i(c).next(p=>(c.g(),p)).catch(p=>(c.abort(p),$.reject(p))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,p=h.name!=="FirebaseError"&&l<3;if(ee("SimpleDb","Transaction failed with error:",h.message,"Retrying:",p),this.close(),!p)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class jV{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yo(this.B.delete())}}class mc extends X{constructor(e,t){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ls(n){return n.name==="IndexedDbTransactionError"}class $V{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ee("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yo(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),yo(this.store.add(e))}get(e){return yo(this.store.get(e)).next(t=>(t===void 0&&(t=null),ee("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),yo(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),yo(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new $((l,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{l(h.target.result)}})}{const o=this.cursor(r),l=[];return this.W(o,(c,h)=>{l.push(h)}).next(()=>l)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new $((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}j(e,t){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,l,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new $((r,i)=>{t.onerror=o=>{const l=py(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}W(e,t){const r=[];return new $((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const h=new jV(c),p=t(c.primaryKey,c.value,h);if(p instanceof $){const y=p.catch(v=>(h.done(),$.reject(v)));r.push(y)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>$.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yo(n){return new $((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=py(r.target.error);t(i)}})}let DE=!1;function py(n){const e=qr.S(Be());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DE||(DE=!0,setTimeout(()=>{throw r},0)),r}}return n}class zV{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ee("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ee("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Ls(t)?ee("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Vs(t)}await this.X(6e4)})}}class qV{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,o=!0;return $.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return ee("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,i).next(c=>{i-=c,r.add(l)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.re(i,o)).next(c=>(ee("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=hR(o);fy(l,r)>0&&(r=l)}),new Jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ln.oe=-1;function id(n){return n==null}function Vc(n){return n===0&&1/n==-1/0}function gR(n){return typeof n=="number"&&Number.isInteger(n)&&!Vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OE(e)),e=WV(n.get(t),e);return OE(e)}function WV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function OE(n){return n+""}function $r(n){const e=n.length;if(ve(e>=2),e===2)return ve(n.charAt(0)===""&&n.charAt(1)===""),Ue.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("",o);switch((l<0||l>t)&&pe(),n.charAt(l+1)){case"":const c=n.substring(o,l);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:pe()}o=l+2}return new Ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,e){return[n,Tn(e)]}function _R(n,e,t){return[n,Tn(e),t]}const GV={},HV=["prefixPath","collectionGroup","readTime","documentId"],KV=["prefixPath","collectionGroup","documentId"],QV=["collectionGroup","readTime","prefixPath","documentId"],JV=["canonicalId","targetId"],YV=["targetId","path"],XV=["path","targetId"],ZV=["collectionId","parent"],eL=["indexId","uid"],tL=["uid","sequenceNumber"],nL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rL=["indexId","uid","orderedDocumentKey"],iL=["userId","collectionPath","documentId"],sL=["userId","collectionPath","largestBatchId"],oL=["userId","collectionGroup","largestBatchId"],yR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aL=[...yR,"documentOverlays"],vR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wR=vR,my=[...wR,"indexConfiguration","indexState","indexEntries"],lL=my,uL=[...my,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends pR{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function $t(n,e){const t=ce(n);return qr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??nn.RED,this.left=i??nn.EMPTY,this.right=o??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new nn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return nn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,t,r,i,o){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ze(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ka(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Ze(ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ER("Invalid base64 string: "+o):o}}(e);return new It(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const dL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(ve(!!n),typeof n=="string"){let e=0;const t=dL.exec(n);if(ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gy(n){const e=n.mapValue.fields.__previous_value__;return lp(e)?gy(e):e}function Lc(n){const e=Ai(n.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,t,r,i,o,l,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}class ks{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sf={nullValue:"NULL_VALUE"};function Vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lp(n)?4:TR(n)?9007199254740991:up(n)?10:11:pe()}function Jr(n,e){if(n===e)return!0;const t=Vo(n);if(t!==Vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lc(n).isEqual(Lc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ai(i.timestampValue),c=Ai(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ps(i.bytesValue).isEqual(Ps(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return dt(i.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return dt(i.integerValue)===dt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=dt(i.doubleValue),c=dt(o.doubleValue);return l===c?Vc(l)===Vc(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Tl(n.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(LE(l)!==LE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Jr(l[h],c[h])))return!1;return!0}(n,e);default:return pe()}}function Mc(n,e){return(n.values||[]).find(t=>Jr(t,e))!==void 0}function Cs(n,e){if(n===e)return 0;const t=Vo(n),r=Vo(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=dt(o.integerValue||o.doubleValue),h=dt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return UE(n.timestampValue,e.timestampValue);case 4:return UE(Lc(n),Lc(e));case 5:return be(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Ps(o),h=Ps(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=be(c[p],h[p]);if(y!==0)return y}return be(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=be(dt(o.latitude),dt(l.latitude));return c!==0?c:be(dt(o.longitude),dt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,p,y;const v=o.fields||{},E=l.fields||{},A=(c=v.value)===null||c===void 0?void 0:c.arrayValue,D=(h=E.value)===null||h===void 0?void 0:h.arrayValue,V=be(((p=A?.values)===null||p===void 0?void 0:p.length)||0,((y=D?.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:FE(A,D)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===ws.mapValue&&l===ws.mapValue)return 0;if(o===ws.mapValue)return 1;if(l===ws.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let v=0;v<h.length&&v<y.length;++v){const E=be(h[v],y[v]);if(E!==0)return E;const A=Cs(c[h[v]],p[y[v]]);if(A!==0)return A}return be(h.length,y.length)}(n.mapValue,e.mapValue);default:throw pe()}}function UE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Ai(n),r=Ai(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function FE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Cs(t[i],r[i]);if(o)return o}return be(t.length,r.length)}function Sl(n){return r_(n)}function r_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ai(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=r_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${r_(t.fields[l])}`;return i+"}"}(n.mapValue):pe()}function Lo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function i_(n){return!!n&&"integerValue"in n}function Uc(n){return!!n&&"arrayValue"in n}function BE(n){return!!n&&"nullValue"in n}function jE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function of(n){return!!n&&"mapValue"in n}function up(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const SR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fL(n){return"nullValue"in n?sf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lo(ks.empty(),le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?up(n)?SR:{mapValue:{}}:pe()}function pL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lo(ks.empty(),le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?SR:"mapValue"in n?up(n)?{mapValue:{}}:ws:pe()}function $E(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zE(n,e){const t=Cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=ht.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=gc(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qo(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new rn(gc(this.value))}}function RR(n){const e=[];return Qo(n.fields,(t,r)=>{const i=new ht([t]);if(of(r)){const o=RR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new at(e,0,Ee.min(),Ee.min(),Ee.min(),rn.empty(),0)}static newFoundDocument(e,t,r,i){return new at(e,1,t,Ee.min(),r,i,0)}static newNoDocument(e,t){return new at(e,2,t,Ee.min(),Ee.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,Ee.min(),Ee.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.position=e,this.inclusive=t}}function qE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(l.referenceValue),t.key):r=Cs(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function WE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function mL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{}class Fe extends AR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gL(e,t,r):t==="array-contains"?new vL(e,r):t==="in"?new xR(e,r):t==="not-in"?new wL(e,r):t==="array-contains-any"?new IL(e,r):new Fe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _L(e,r):new yL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cs(t,this.value)):t!==null&&Vo(this.value)===Vo(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends AR{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xe(e,t)}matches(e){return Rl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rl(n){return n.op==="and"}function s_(n){return n.op==="or"}function _y(n){return PR(n)&&Rl(n)}function PR(n){for(const e of n.filters)if(e instanceof Xe)return!1;return!0}function o_(n){if(n instanceof Fe)return n.field.canonicalString()+n.op.toString()+Sl(n.value);if(_y(n))return n.filters.map(e=>o_(e)).join(",");{const e=n.filters.map(t=>o_(t)).join(",");return`${n.op}(${e})`}}function kR(n,e){return n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&Jr(r.value,i.value)}(n,e):n instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&kR(l,i.filters[c]),!0):!1}(n,e):void pe()}function CR(n,e){const t=n.filters.concat(e);return Xe.create(t,n.op)}function bR(n){return n instanceof Fe?function(t){return`${t.field.canonicalString()} ${t.op} ${Sl(t.value)}`}(n):n instanceof Xe?function(t){return t.op.toString()+" {"+t.getFilters().map(bR).join(" ,")+"}"}(n):"Filter"}class gL extends Fe{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class _L extends Fe{constructor(e,t){super(e,"in",t),this.keys=NR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yL extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=NR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>le.fromName(r.referenceValue))}class vL extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uc(t)&&Mc(t.arrayValue,this.value)}}class xR extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mc(this.value.arrayValue,t)}}class wL extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Mc(this.value.arrayValue,t)}}class IL extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function a_(n,e=null,t=[],r=[],i=null,o=null,l=null){return new EL(n,e,t,r,i,o,l)}function Mo(n){const e=ce(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>o_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sl(r)).join(",")),e.ue=t}return e.ue}function sd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WE(n.startAt,e.startAt)&&WE(n.endAt,e.endAt)}function Sf(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Rf(n,e){return n.filters.filter(t=>t instanceof Fe&&t.field.isEqual(e))}function GE(n,e,t){let r=sf,i=!0;for(const o of Rf(n,e)){let l=sf,c=!0;switch(o.op){case"<":case"<=":l=fL(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=sf}$E({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];$E({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function HE(n,e,t){let r=ws,i=!0;for(const o of Rf(n,e)){let l=ws,c=!0;switch(o.op){case">=":case">":l=pL(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=ws}zE({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];zE({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DR(n,e,t,r,i,o,l,c){return new xi(n,e,t,r,i,o,l,c)}function ql(n){return new xi(n)}function KE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yy(n){return n.collectionGroup!==null}function hl(n){const e=ce(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ze(ht.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Fc(o,r))}),t.has(ht.keyField().canonicalString())||e.ce.push(new Fc(ht.keyField(),r))}return e.ce}function Sn(n){const e=ce(n);return e.le||(e.le=TL(e,hl(n))),e.le}function TL(n,e){if(n.limitType==="F")return a_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Fc(i.field,o)});const t=n.endAt?new bs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bs(n.startAt.position,n.startAt.inclusive):null;return a_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function l_(n,e){const t=n.filters.concat([e]);return new xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function od(n,e){return sd(Sn(n),Sn(e))&&n.limitType===e.limitType}function OR(n){return`${Mo(Sn(n))}|lt:${n.limitType}`}function il(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bR(i)).join(", ")}]`),id(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sl(i)).join(",")),`Target(${r})`}(Sn(n))}; limitType=${n.limitType})`}function ad(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of hl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const p=qE(l,c,h);return l.inclusive?p<=0:p<0}(r.startAt,hl(r),i)||r.endAt&&!function(l,c,h){const p=qE(l,c,h);return l.inclusive?p>=0:p>0}(r.endAt,hl(r),i))}(n,e)}function VR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LR(n){return(e,t)=>{let r=!1;for(const i of hl(n)){const o=SL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SL(n,e,t){const r=n.field.isKeyField()?le.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?Cs(h,p):pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return IR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new it(le.comparator);function Un(){return RL}const MR=new it(le.comparator);function uc(...n){let e=MR;for(const t of n)e=e.insert(t.key,t);return e}function UR(n){let e=MR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zr(){return _c()}function FR(){return _c()}function _c(){return new Ms(n=>n.toString(),(n,e)=>n.isEqual(e))}const AL=new it(le.comparator),PL=new Ze(le.comparator);function xe(...n){let e=PL;for(const t of n)e=e.add(t);return e}const kL=new Ze(be);function vy(){return kL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function BR(n){return{integerValue:""+n}}function jR(n,e){return gR(e)?BR(e):wy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this._=void 0}}function CL(n,e,t){return n instanceof Al?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lp(o)&&(o=gy(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Uo?zR(n,e):n instanceof Fo?qR(n,e):function(i,o){const l=$R(i,o),c=QE(l)+QE(i.Pe);return i_(l)&&i_(i.Pe)?BR(c):wy(i.serializer,c)}(n,e)}function bL(n,e,t){return n instanceof Uo?zR(n,e):n instanceof Fo?qR(n,e):t}function $R(n,e){return n instanceof Pl?function(r){return i_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Al extends cp{}class Uo extends cp{constructor(e){super(),this.elements=e}}function zR(n,e){const t=WR(e);for(const r of n.elements)t.some(i=>Jr(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fo extends cp{constructor(e){super(),this.elements=e}}function qR(n,e){let t=WR(e);for(const r of n.elements)t=t.filter(i=>!Jr(i,r));return{arrayValue:{values:t}}}class Pl extends cp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function QE(n){return dt(n.integerValue||n.doubleValue)}function WR(n){return Uc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.field=e,this.transform=t}}function NL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof Fo&&i instanceof Fo?Tl(r.elements,i.elements,Jr):r instanceof Pl&&i instanceof Pl?Jr(r.Pe,i.Pe):r instanceof Al&&i instanceof Al}(n.transform,e.transform)}class xL{constructor(e,t){this.version=e,this.transformResults=t}}class ft{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dp{}function GR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gl(n.key,ft.none()):new Wl(n.key,n.data,ft.none());{const t=n.data,r=rn.empty();let i=new Ze(ht.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Di(n.key,r,new Mn(i.toArray()),ft.none())}}function DL(n,e,t){n instanceof Wl?function(i,o,l){const c=i.value.clone(),h=YE(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Di?function(i,o,l){if(!af(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=YE(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(HR(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function yc(n,e,t,r){return n instanceof Wl?function(o,l,c,h){if(!af(o.precondition,l))return c;const p=o.value.clone(),y=XE(o.fieldTransforms,h,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Di?function(o,l,c,h){if(!af(o.precondition,l))return c;const p=XE(o.fieldTransforms,h,l),y=l.data;return y.setAll(HR(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,c){return af(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function OL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=$R(r.transform,i||null);o!=null&&(t===null&&(t=rn.empty()),t.set(r.field,o))}return t||null}function JE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tl(r,i,(o,l)=>NL(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wl extends dp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends dp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function HR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function YE(n,e,t){const r=new Map;ve(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,bL(l,c,t[i]))}return r}function XE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,CL(o,l,e))}return r}class Gl extends dp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iy extends dp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&DL(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FR();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=GR(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,(t,r)=>JE(t,r))&&Tl(this.baseMutations,e.baseMutations,(t,r)=>JE(t,r))}}class Ty{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ve(e.mutations.length===r.length);let i=function(){return AL}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Ty(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,qe;function KR(n){switch(n){default:return pe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function QR(n){if(n===void 0)return Pt("GRPC error has no .code"),G.UNKNOWN;switch(n){case xt.OK:return G.OK;case xt.CANCELLED:return G.CANCELLED;case xt.UNKNOWN:return G.UNKNOWN;case xt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case xt.INTERNAL:return G.INTERNAL;case xt.UNAVAILABLE:return G.UNAVAILABLE;case xt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case xt.NOT_FOUND:return G.NOT_FOUND;case xt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case xt.ABORTED:return G.ABORTED;case xt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case xt.DATA_LOSS:return G.DATA_LOSS;default:return pe()}}(qe=xt||(xt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=new ko([4294967295,4294967295],0);function ZE(n){const e=JR().encode(n),t=new nR;return t.update(e),new Uint8Array(t.digest())}function eT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ko([t,r],0),new ko([i,o],0)]}class Ry{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ko.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ko.fromNumber(r)));return i.compare(LL)===1&&(i=new ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ZE(e),[r,i]=eT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Ry(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ie===0)return;const t=ZE(e),[r,i]=eT(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ud(Ee.min(),i,new it(be),Un(),xe())}}class cd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cd(r,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class YR{constructor(e,t){this.targetId=e,this.me=t}}class XR{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tT{constructor(){this.fe=0,this.ge=rT(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),r=xe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new cd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ML{constructor(e){this.Le=e,this.Be=new Map,this.ke=Un(),this.qe=nT(),this.Qe=new it(be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(Sf(o))if(r===0){const l=new le(o.path);this.Ue(t,l,at.newNoDocument(l,Ee.min()))}else ve(r===1);else{const l=this.Ye(t);if(l!==r){const c=this.Ze(e),h=c?this.Xe(c,e,l):1;if(h!==0){this.je(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Ps(r).toUint8Array()}catch(h){if(h instanceof ER)return Qr("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Ry(l,i,o)}catch(h){return Qr(h instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,l)=>{const c=this.Je(l);if(c){if(o.current&&Sf(c.target)){const h=new le(c.target.path);this.ke.get(h)!==null||this.it(l,h)||this.Ue(l,h,at.newNoDocument(h,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let r=xe();this.qe.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const p=this.Je(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new ud(e,t,this.Qe,this.ke,r);return this.ke=Un(),this.qe=nT(),this.Qe=new it(be),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new tT,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ze(be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tT),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nT(){return new it(le.comparator)}function rT(){return new it(le.comparator)}const UL={asc:"ASCENDING",desc:"DESCENDING"},FL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BL={and:"AND",or:"OR"};class jL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u_(n,e){return n.useProto3Json||id(e)?e:{value:e}}function kl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $L(n,e){return kl(n,e.toTimestamp())}function kt(n){return ve(!!n),Ee.fromTimestamp(function(t){const r=Ai(t);return new pt(r.seconds,r.nanos)}(n))}function Ay(n,e){return c_(n,e).canonicalString()}function c_(n,e){const t=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eA(n){const e=Ue.fromString(n);return ve(cA(e)),e}function Bc(n,e){return Ay(n.databaseId,e.path)}function Wr(n,e){const t=eA(e);if(t.get(1)!==n.databaseId.projectId)throw new X(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(rA(t))}function tA(n,e){return Ay(n.databaseId,e)}function nA(n){const e=eA(n);return e.length===4?Ue.emptyPath():rA(e)}function d_(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rA(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iT(n,e,t){return{name:Bc(n,e),fields:t.value.mapValue.fields}}function iA(n,e,t){const r=Wr(n,e.name),i=kt(e.updateTime),o=e.createTime?kt(e.createTime):Ee.min(),l=new rn({mapValue:{fields:e.fields}}),c=at.newFoundDocument(r,i,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function zL(n,e){return"found"in e?function(r,i){ve(!!i.found),i.found.name,i.found.updateTime;const o=Wr(r,i.found.name),l=kt(i.found.updateTime),c=i.found.createTime?kt(i.found.createTime):Ee.min(),h=new rn({mapValue:{fields:i.found.fields}});return at.newFoundDocument(o,l,c,h)}(n,e):"missing"in e?function(r,i){ve(!!i.missing),ve(!!i.readTime);const o=Wr(r,i.missing),l=kt(i.readTime);return at.newNoDocument(o,l)}(n,e):pe()}function qL(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(ve(y===void 0||typeof y=="string"),It.fromBase64String(y||"")):(ve(y===void 0||y instanceof Buffer||y instanceof Uint8Array),It.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const y=p.code===void 0?G.UNKNOWN:QR(p.code);return new X(y,p.message||"")}(l);t=new XR(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wr(n,r.document.name),o=kt(r.document.updateTime),l=r.document.createTime?kt(r.document.createTime):Ee.min(),c=new rn({mapValue:{fields:r.document.fields}}),h=at.newFoundDocument(i,o,l,c),p=r.targetIds||[],y=r.removedTargetIds||[];t=new lf(p,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wr(n,r.document),o=r.readTime?kt(r.readTime):Ee.min(),l=at.newNoDocument(i,o),c=r.removedTargetIds||[];t=new lf([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wr(n,r.document),o=r.removedTargetIds||[];t=new lf([],o,i,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new VL(i,o),c=r.targetId;t=new YR(c,l)}}return t}function jc(n,e){let t;if(e instanceof Wl)t={update:iT(n,e.key,e.value)};else if(e instanceof Gl)t={delete:Bc(n,e.key)};else if(e instanceof Di)t={update:iT(n,e.key,e.data),updateMask:JL(e.fieldMask)};else{if(!(e instanceof Iy))return pe();t={verify:Bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Al)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Pl)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$L(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe()}(n,e.precondition)),t}function h_(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?ft.updateTime(kt(o.updateTime)):o.exists!==void 0?ft.exists(o.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let h=null;if("setToServerValue"in c)ve(c.setToServerValue==="REQUEST_TIME"),h=new Al;else if("appendMissingElements"in c){const y=c.appendMissingElements.values||[];h=new Uo(y)}else if("removeAllFromArray"in c){const y=c.removeAllFromArray.values||[];h=new Fo(y)}else"increment"in c?h=new Pl(l,c.increment):pe();const p=ht.fromServerFormat(c.fieldPath);return new ld(p,h)}(n,i)):[];if(e.update){e.update.name;const i=Wr(n,e.update.name),o=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(h){const p=h.fieldPaths||[];return new Mn(p.map(y=>ht.fromServerFormat(y)))}(e.updateMask);return new Di(i,o,l,t,r)}return new Wl(i,o,t,r)}if(e.delete){const i=Wr(n,e.delete);return new Gl(i,t)}if(e.verify){const i=Wr(n,e.verify);return new Iy(i,t)}return pe()}function WL(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?kt(i.updateTime):kt(o);return l.isEqual(Ee.min())&&(l=kt(o)),new xL(l,i.transformResults||[])}(t,e))):[]}function sA(n,e){return{documents:[tA(n,e.path)]}}function oA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tA(n,i);const o=function(p){if(p.length!==0)return uA(Xe.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:sl(E.field),direction:HL(E.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=u_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:t,parent:i}}function aA(n){let e=nA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ve(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const E=lA(v);return E instanceof Xe&&_y(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(E=>function(D){return new Fc(ol(D.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(v){let E;return E=typeof v=="object"?v.value:v,id(E)?null:E}(t.limit));let h=null;t.startAt&&(h=function(v){const E=!!v.before,A=v.values||[];return new bs(A,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,A=v.values||[];return new bs(A,E)}(t.endAt)),DR(e,i,l,o,c,"F",h,p)}function GL(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ol(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ol(t.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ol(t.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ol(t.unaryFilter.field);return Fe.create(l,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(n):n.fieldFilter!==void 0?function(t){return Fe.create(ol(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xe.create(t.compositeFilter.filters.map(r=>lA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(t.compositeFilter.op))}(n):pe()}function HL(n){return UL[n]}function KL(n){return FL[n]}function QL(n){return BL[n]}function sl(n){return{fieldPath:n.canonicalString()}}function ol(n){return ht.fromServerFormat(n.fieldPath)}function uA(n){return n instanceof Fe?function(t){if(t.op==="=="){if(jE(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(BE(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jE(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(BE(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:KL(t.op),value:t.value}}}(n):n instanceof Xe?function(t){const r=t.getFilters().map(i=>uA(i));return r.length===1?r[0]:{compositeFilter:{op:QL(t.op),filters:r}}}(n):pe()}function JL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,r,i,o=Ee.min(),l=Ee.min(),c=It.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.ct=e}}function YL(n,e){let t;if(e.document)t=iA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=jo(e.noDocument.readTime);t=at.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const r=le.fromSegments(e.unknownDocument.path),i=jo(e.unknownDocument.version);t=at.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new pt(i[0],i[1]);return Ee.fromTimestamp(o)}(e.readTime)),t}function sT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,l){return{name:Bc(o,l.key),fields:l.data.value.mapValue.fields,updateTime:kl(o,l.version.toTimestamp()),createTime:kl(o,l.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bo(e.version)};else{if(!e.isUnknownDocument())return pe();r.unknownDocument={path:t.path.toArray(),version:Bo(e.version)}}return r}function Pf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jo(n){const e=new pt(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function vo(n,e){const t=(e.baseMutations||[]).map(o=>h_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>h_(n.ct,o)),i=pt.fromMillis(e.localWriteTimeMs);return new Ey(e.batchId,i,t,r)}function dc(n){const e=jo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?jo(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ve(o.documents.length===1),Sn(ql(nA(o.documents[0])))}(n.query):function(o){return Sn(aA(o))}(n.query),new _i(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,It.fromBase64String(n.resumeToken))}function hA(n,e){const t=Bo(e.snapshotVersion),r=Bo(e.lastLimboFreeSnapshotVersion);let i;i=Sf(e.target)?sA(n.ct,e.target):oA(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Py(n){const e=aA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}function Sg(n,e){return new Sy(e.largestBatchId,h_(n.ct,e.overlayMutation))}function oT(n,e){const t=e.path.lastSegment();return[n,Tn(e.path.popLast()),t]}function aT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bo(r.readTime),documentKey:Tn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{getBundleMetadata(e,t){return lT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:jo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return lT(e).put(function(i){return{bundleId:i.id,createTime:Bo(kt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return uT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Py(o.bundledQuery),readTime:jo(o.readTime)}}(r)})}saveNamedQuery(e,t){return uT(e).put(function(i){return{name:i.name,readTime:Bo(kt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function lT(n){return $t(n,"bundles")}function uT(n){return $t(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new hp(e,r)}getOverlay(e,t){return Ju(e).get(oT(this.userId,t)).next(r=>r?Sg(this.serializer,r):null)}getOverlays(e,t){const r=zr();return $.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const c=new Sy(t,l);i.push(this.ht(e,c))}),$.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Tn(l.getCollectionPath())));const o=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Ju(e).j("collectionPathOverlayIndex",c))}),$.waitFor(o)}getOverlaysForCollection(e,t,r){const i=zr(),o=Tn(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ju(e).U("collectionPathOverlayIndex",l).next(c=>{for(const h of c){const p=Sg(this.serializer,h);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=zr();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ju(e).J({index:"collectionGroupOverlayIndex",range:c},(h,p,y)=>{const v=Sg(this.serializer,p);o.size()<i||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):y.done()}).next(()=>o)}ht(e,t){return Ju(e).put(function(i,o,l){const[c,h,p]=oT(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:jc(i.ct,l.mutation)}}(this.serializer,this.userId,t))}}function Ju(n){return $t(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{Pt(e){return $t(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Vc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ai(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ps(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?TR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):up(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):pe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const o=e.fields||{};this.dt(t,53);const l="value",c=((i=(r=o[l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(dt(c)),this.Vt(l,t),this.Tt(o[l],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),le.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}wo.vt=new wo;function eM(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cT(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const l=eM(255&r[o]);if(i+=l,l!==8)break}return i}(n);return Math.ceil(e/8)}class tM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=cT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=cT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class rM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Yu{constructor(){this.jt=new tM,this.Ht=new nM(this.jt),this.Jt=new rM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Io(this.indexId,this.documentKey,this.arrayValue,r)}}function ls(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=dT(n.arrayValue,e.arrayValue),t!==0?t:(t=dT(n.directionalValue,e.directionalValue),t!==0?t:le.comparator(n.documentKey,e.documentKey)))}function dT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.Xt=new Ze((t,r)=>ht.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ve(e.collectionGroup===this.collectionId),this.nn)return!1;const t=t_(e);if(t!==void 0&&!this.sn(t))return!1;const r=_o(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[o];if(!this.on(c,h)||!this._n(this.en[l++],h))return!1}++o}for(;o<r.length;++o){const c=r[o];if(l>=this.en.length||!this._n(this.en[l++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Ze(ht.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new nf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nf(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nf(r.field,r.dir==="asc"?0:1)));return new Tf(Tf.UNKNOWN_ID,this.collectionId,t,Oc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){var e,t;if(ve(n instanceof Fe||n instanceof Xe),n instanceof Fe){if(n instanceof xR){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Fe.create(n.field,"==",o)))||[];return Xe.create(i,"or")}return n}const r=n.filters.map(i=>fA(i));return Xe.create(r,n.op)}function iM(n){if(n.getFilters().length===0)return[];const e=m_(fA(n));return ve(pA(e)),f_(e)||p_(e)?[e]:e.getFilters()}function f_(n){return n instanceof Fe}function p_(n){return n instanceof Xe&&_y(n)}function pA(n){return f_(n)||p_(n)||function(t){if(t instanceof Xe&&s_(t)){for(const r of t.getFilters())if(!f_(r)&&!p_(r))return!1;return!0}return!1}(n)}function m_(n){if(ve(n instanceof Fe||n instanceof Xe),n instanceof Fe)return n;if(n.filters.length===1)return m_(n.filters[0]);const e=n.filters.map(r=>m_(r));let t=Xe.create(e,n.op);return t=kf(t),pA(t)?t:(ve(t instanceof Xe),ve(Rl(t)),ve(t.filters.length>1),t.filters.reduce((r,i)=>ky(r,i)))}function ky(n,e){let t;return ve(n instanceof Fe||n instanceof Xe),ve(e instanceof Fe||e instanceof Xe),t=n instanceof Fe?e instanceof Fe?function(i,o){return Xe.create([i,o],"and")}(n,e):fT(n,e):e instanceof Fe?fT(e,n):function(i,o){if(ve(i.filters.length>0&&o.filters.length>0),Rl(i)&&Rl(o))return CR(i,o.getFilters());const l=s_(i)?i:o,c=s_(i)?o:i,h=l.filters.map(p=>ky(p,c));return Xe.create(h,"or")}(n,e),kf(t)}function fT(n,e){if(Rl(e))return CR(e,n.getFilters());{const t=e.filters.map(r=>ky(n,r));return Xe.create(t,"or")}}function kf(n){if(ve(n instanceof Fe||n instanceof Xe),n instanceof Fe)return n;const e=n.getFilters();if(e.length===1)return kf(e[0]);if(PR(n))return n;const t=e.map(i=>kf(i)),r=[];return t.forEach(i=>{i instanceof Fe?r.push(i):i instanceof Xe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Xe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.un=new Cy}addToCollectionParentIndex(e,t){return this.un.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Jn.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Cy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(Ue.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Uint8Array(0);class oM{constructor(e,t){this.databaseId=t,this.cn=new Cy,this.ln=new Ms(r=>Mo(r),(r,i)=>sd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const o={collectionId:r,parent:Tn(i)};return pT(e).put(o)}return $.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[cR(t),""],!1,!0);return pT(e).U(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push($r(l.parent))}return r})}addFieldIndex(e,t){const r=Xu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=Ja(e);return o.next(c=>{l.put(aT(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Xu(e),i=Ja(e),o=Qa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xu(e),r=Qa(e),i=Ja(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return $.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new hT(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Qa(e);let i=!0;const o=new Map;return $.forEach(this.hn(t),l=>this.Pn(e,l).next(c=>{i&&(i=!!c),o.set(l,c)})).next(()=>{if(i){let l=xe();const c=[];return $.forEach(o,(h,p)=>{ee("IndexedDbIndexManager",`Using index ${function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`}(h)} to execute ${Mo(t)}`);const y=function(K,ne){const he=t_(ne);if(he===void 0)return null;for(const ue of Rf(K,he.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(p,h),v=function(K,ne){const he=new Map;for(const ue of _o(ne))for(const b of Rf(K,ue.fieldPath))switch(b.op){case"==":case"in":he.set(ue.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return he.set(ue.fieldPath.canonicalString(),b.value),Array.from(he.values())}return null}(p,h),E=function(K,ne){const he=[];let ue=!0;for(const b of _o(ne)){const R=b.kind===0?GE(K,b.fieldPath,K.startAt):HE(K,b.fieldPath,K.startAt);he.push(R.value),ue&&(ue=R.inclusive)}return new bs(he,ue)}(p,h),A=function(K,ne){const he=[];let ue=!0;for(const b of _o(ne)){const R=b.kind===0?HE(K,b.fieldPath,K.endAt):GE(K,b.fieldPath,K.endAt);he.push(R.value),ue&&(ue=R.inclusive)}return new bs(he,ue)}(p,h),D=this.In(h,p,E),V=this.In(h,p,A),k=this.Tn(h,p,v),Y=this.En(h.indexId,y,D,E.inclusive,V,A.inclusive,k);return $.forEach(Y,q=>r.G(q,t.limit).next(K=>{K.forEach(ne=>{const he=le.fromSegments(ne.documentKey);l.has(he)||(l=l.add(he),c.push(he))})}))}).next(()=>c)}return $.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=iM(Xe.create(e.filters,"and")).map(r=>a_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,l,c){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),p=h/(t!=null?t.length:1),y=[];for(let v=0;v<h;++v){const E=t?this.dn(t[v/p]):jh,A=this.An(e,E,r[v%p],i),D=this.Rn(e,E,o[v%p],l),V=c.map(k=>this.An(e,E,k,!0));y.push(...this.createRange(A,D,V))}return y}An(e,t,r,i){const o=new Io(e,le.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){const o=new Io(e,le.empty(),t,r);return i?o.Zt():o}Pn(e,t){const r=new hT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const c of o)r.rn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;const i=this.hn(t);return $.forEach(i,o=>this.Pn(e,o).next(l=>{l?r!==0&&l.fields.length<function(h){let p=new Ze(ht.comparator),y=!1;for(const v of h.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?y=!0:p=p.add(E.field));for(const v of h.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Yu;for(const i of _o(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.Yt(i.kind);wo.vt.It(o,l)}return r.zt()}dn(e){const t=new Yu;return wo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Yu;return wo.vt.It(Lo(this.databaseId,t),r.Yt(function(o){const l=_o(o);return l.length===0?0:l[l.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Yu);let o=0;for(const l of _o(e)){const c=r[o++];for(const h of i)if(this.fn(t,l.fieldPath)&&Uc(c))i=this.gn(i,l,c);else{const p=h.Yt(l.kind);wo.vt.It(c,p)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const h=new Yu;h.seed(c.zt()),wo.vt.It(l,h.Yt(t.kind)),o.push(h)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Xu(e),i=Ja(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const l=[];return $.forEach(o,c=>i.get([c.indexId,this.uid]).next(h=>{l.push(function(y,v){const E=v?new Oc(v.sequenceNumber,new Jn(jo(v.readTime),new le($r(v.documentKey)),v.largestBatchId)):Oc.empty(),A=y.fields.map(([D,V])=>new nf(ht.fromServerFormat(D),V));return new Tf(y.indexId,y.collectionGroup,A,E)}(c,h))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:be(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xu(e),o=Ja(e);return this.yn(e).next(l=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>$.forEach(c,h=>o.put(aT(h.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return $.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),$.forEach(c,h=>this.wn(e,i,h).next(p=>{const y=this.Sn(o,h);return p.isEqual(y)?$.resolve():this.bn(e,o,h,p,y)}))))})}Dn(e,t,r,i){return Qa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Qa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Qa(e);let o=new Ze(ls);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,c)=>{o=o.add(new Io(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ze(ls);const i=this.Vn(t,e);if(i==null)return r;const o=t_(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Uc(l))for(const c of l.arrayValue.values||[])r=r.add(new Io(t.indexId,e.key,this.dn(c),i))}else r=r.add(new Io(t.indexId,e.key,jh,i));return r}bn(e,t,r,i,o){ee("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,y,v,E){const A=h.getIterator(),D=p.getIterator();let V=Ka(A),k=Ka(D);for(;V||k;){let Y=!1,q=!1;if(V&&k){const K=y(V,k);K<0?q=!0:K>0&&(Y=!0)}else V!=null?q=!0:Y=!0;Y?(v(k),k=Ka(D)):q?(E(V),V=Ka(A)):(V=Ka(A),k=Ka(D))}}(i,o,ls,c=>{l.push(this.Dn(e,t,r,c))},c=>{l.push(this.vn(e,t,r,c))}),$.waitFor(l)}yn(e){let t=1;return Ja(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>ls(l,c)).filter((l,c,h)=>!c||ls(l,h[c-1])!==0);const i=[];i.push(e);for(const l of r){const c=ls(l,e),h=ls(l,t);if(c===0)i[0]=e.Zt();else if(c>0&&h<0)i.push(l),i.push(l.Zt());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Cn(i[l],i[l+1]))return[];const c=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,jh,[]],h=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,jh,[]];o.push(IDBKeyRange.bound(c,h))}return o}Cn(e,t){return ls(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mT)}getMinOffset(e,t){return $.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||pe())).next(mT)}}function pT(n){return $t(n,"collectionParents")}function Qa(n){return $t(n,"indexEntries")}function Xu(n){return $t(n,"indexConfiguration")}function Ja(n){return $t(n,"indexState")}function mT(n){ve(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;fy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=r.J({range:l},(y,v,E)=>(c++,E.delete()));o.push(h.next(()=>{ve(c===1)}));const p=[];for(const y of t.mutations){const v=_R(e,y.key.path,t.batchId);o.push(i.delete(v)),p.push(y.key)}return $.waitFor(o).next(()=>p)}function Cf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class fp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ve(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new fp(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return us(e).J({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=al(e),l=us(e);return l.add({}).next(c=>{ve(typeof c=="number");const h=new Ey(c,t,r,i),p=function(A,D,V){const k=V.baseMutations.map(q=>jc(A.ct,q)),Y=V.mutations.map(q=>jc(A.ct,q));return{userId:D,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:k,mutations:Y}}(this.serializer,this.userId,h),y=[];let v=new Ze((E,A)=>be(E.canonicalString(),A.canonicalString()));for(const E of i){const A=_R(this.userId,E.key.path,c);v=v.add(E.key.path.popLast()),y.push(l.put(p)),y.push(o.put(A,GV))}return v.forEach(E=>{y.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Fn[c]=h.keys()}),$.waitFor(y).next(()=>h)})}lookupMutationBatch(e,t){return us(e).get(t).next(r=>r?(ve(r.userId===this.userId),vo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?$.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return us(e).J({index:"userMutationsIndex",range:i},(l,c,h)=>{c.userId===this.userId&&(ve(c.batchId>=r),o=vo(this.serializer,c)),h.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return us(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return us(e).U("userMutationsIndex",t).next(r=>r.map(i=>vo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return al(e).J({range:i},(l,c,h)=>{const[p,y,v]=l,E=$r(y);if(p===this.userId&&t.path.isEqual(E))return us(e).get(v).next(A=>{if(!A)throw pe();ve(A.userId===this.userId),o.push(vo(this.serializer,A))});h.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(be);const i=[];return t.forEach(o=>{const l=rf(this.userId,o.path),c=IDBKeyRange.lowerBound(l),h=al(e).J({range:c},(p,y,v)=>{const[E,A,D]=p,V=$r(A);E===this.userId&&o.path.isEqual(V)?r=r.add(D):v.done()});i.push(h)}),$.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=rf(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new Ze(be);return al(e).J({range:l},(h,p,y)=>{const[v,E,A]=h,D=$r(E);v===this.userId&&r.isPrefixOf(D)?D.length===i&&(c=c.add(A)):y.done()}).next(()=>this.xn(e,c))}xn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(us(e).get(o).next(l=>{if(l===null)throw pe();ve(l.userId===this.userId),r.push(vo(this.serializer,l))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mA(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),i=[];return al(e).J({range:r},(o,l,c)=>{if(o[0]===this.userId){const h=$r(o[1]);i.push(h)}else c.done()}).next(()=>{ve(i.length===0)})})}containsKey(e,t){return gA(e,this.userId,t)}Nn(e){return _A(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gA(n,e,t){const r=rf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return al(n).J({range:o,H:!0},(c,h,p)=>{const[y,v,E]=c;y===e&&v===i&&(l=!0),p.done()}).next(()=>l)}function us(n){return $t(n,"mutations")}function al(n){return $t(n,"documentMutations")}function _A(n){return $t(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $o(0)}static kn(){return new $o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new $o(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Ee.fromTimestamp(new pt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ya(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ve(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ya(e).J((l,c)=>{const h=dc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))}).next(()=>$.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ya(e).J((r,i)=>{const o=dc(i);t(o)})}qn(e){return _T(e).get("targetGlobalKey").next(t=>(ve(t!==null),t))}Qn(e,t){return _T(e).put("targetGlobalKey",t)}Kn(e,t){return Ya(e).put(hA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ya(e).J({range:i,index:"queryTargetsIndex"},(l,c,h)=>{const p=dc(c);sd(t,p.target)&&(o=p,h.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=hs(e);return t.forEach(l=>{const c=Tn(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),$.waitFor(i)}removeMatchingKeys(e,t,r){const i=hs(e);return $.forEach(t,o=>{const l=Tn(o.path);return $.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=hs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hs(e);let o=xe();return i.J({range:r,H:!0},(l,c,h)=>{const p=$r(l[1]),y=new le(p);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=Tn(t.path),i=IDBKeyRange.bound([r],[cR(r)],!1,!0);let o=0;return hs(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,c],h,p)=>{l!==0&&(o++,p.done())}).next(()=>o>0)}ot(e,t){return Ya(e).get(t).next(r=>r?dc(r):null)}}function Ya(n){return $t(n,"targets")}function _T(n){return $t(n,"targetGlobal")}function hs(n){return $t(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT([n,e],[t,r]){const i=be(n,t);return i===0?be(e,r):i}class lM{constructor(e){this.Un=e,this.buffer=new Ze(yT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ls(t)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Vs(t)}await this.Hn(3e5)})}}class cM{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Ln.oe);const r=new lM(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(gT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,l,c,h,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),rl()<=Oe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${v} documents in `+(p-h)+`ms
Total Duration: ${p-y}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}}function dM(n,e){return new cM(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t){this.db=e,this.garbageCollector=dM(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return $h(e,r)}removeReference(e,t,r){return $h(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $h(e,t)}nr(e,t){return function(i,o){let l=!1;return _A(i).Y(c=>gA(i,c,o).next(h=>(h&&(l=!0),$.resolve(!h)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.tr(e,(l,c)=>{if(c<=t){const h=this.nr(e,l).next(p=>{if(!p)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ee.min()),hs(e).delete(function(v){return[0,Tn(v.path)]}(l))))});i.push(h)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $h(e,t)}tr(e,t){const r=hs(e);let i,o=Ln.oe;return r.J({index:"documentTargetsIndex"},([l,c],{path:h,sequenceNumber:p})=>{l===0?(o!==Ln.oe&&t(new le($r(i)),o),o=p,i=h):o=Ln.oe}).next(()=>{o!==Ln.oe&&t(new le($r(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $h(n,e){return hs(n).put(function(r,i){return{targetId:0,path:Tn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.changes=new Ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mo(e).put(r)}removeEntry(e,t,r){return mo(e).delete(function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Pf(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(t))},(i,o)=>{r={document:this.ir(t,o),size:Cf(o)}}).next(()=>r)}getEntries(e,t){let r=Un();return this._r(e,t,(i,o)=>{const l=this.ir(i,o);r=r.insert(i,l)}).next(()=>r)}ar(e,t){let r=Un(),i=new it(le.comparator);return this._r(e,t,(o,l)=>{const c=this.ir(o,l);r=r.insert(o,c),i=i.insert(o,Cf(l))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return $.resolve();let i=new Ze(IT);t.forEach(h=>i=i.add(h));const o=IDBKeyRange.bound(Zu(i.first()),Zu(i.last())),l=i.getIterator();let c=l.getNext();return mo(e).J({index:"documentKeyIndex",range:o},(h,p,y)=>{const v=le.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&IT(c,v)<0;)r(c,null),c=l.getNext();c&&c.isEqual(v)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?y.$(Zu(c)):y.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mo(e).U(IDBKeyRange.bound(c,h,!0)).next(p=>{o?.incrementDocumentReadCount(p.length);let y=Un();for(const v of p){const E=this.ir(le.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(ad(t,E)||i.has(E.key))&&(y=y.insert(E.key,E))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=Un();const l=wT(t,r),c=wT(t,Jn.max());return mo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(h,p,y)=>{const v=this.ir(le.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===i&&y.done()}).next(()=>o)}newChangeBuffer(e){return new pM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vT(e).get("remoteDocumentGlobalKey").next(t=>(ve(!!t),t))}rr(e,t){return vT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=YL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return at.newInvalidDocument(e)}}function vA(n){return new fM(n)}class pM extends yA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ms(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ze((o,l)=>be(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const c=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const h=sT(this.cr.serializer,l);i=i.add(o.path.popLast());const p=Cf(h);r+=p-c.size,t.push(this.cr.addEntry(e,o,h))}else if(r-=c.size,this.trackRemovals){const h=sT(this.cr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.cr.addEntry(e,o,h))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),$.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,l)=>{this.lr.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function vT(n){return $t(n,"remoteDocumentGlobal")}function mo(n){return $t(n,"remoteDocumentsV14")}function Zu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wT(n,e){const t=e.documentKey.path.toArray();return[n,Pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=be(t[o],r[o]),i)return i;return i=be(t.length,r.length),i||(i=be(t[t.length-2],r[r.length-2]),i||be(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yc(r.mutation,i,Mn.empty(),pt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){const i=zr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=uc();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=zr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Un();const l=_c(),c=function(){return _c()}();return t.forEach((h,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof Di)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),yc(y.mutation,p,y.mutation.getFieldMask(),pt.now())):l.set(p.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,y)=>l.set(p,y)),t.forEach((p,y)=>{var v;return c.set(p,new mM(y,(v=l.get(p))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){const r=_c();let i=new it((l,c)=>l-c),o=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let y=r.get(h)||Mn.empty();y=c.applyToLocalView(p,y),r.set(h,y);const v=(i.get(c.batchId)||xe()).add(h);i=i.insert(c.batchId,v)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,y=h.value,v=FR();y.forEach(E=>{if(!o.has(E)){const A=GR(t.get(E),r.get(E));A!==null&&v.set(E,A),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return $.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return le.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):$.resolve(zr());let c=-1,h=o;return l.next(p=>$.forEach(p,(y,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(y)?$.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{h=h.insert(y,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,xe())).next(y=>({batchId:c,changes:UR(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=uc();return this.indexManager.getCollectionParents(e,o).next(c=>$.forEach(c,h=>{const p=function(v,E){return new xi(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(y=>{y.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,at.newInvalidDocument(y)))});let c=uc();return l.forEach((h,p)=>{const y=o.get(h);y!==void 0&&yc(y.mutation,p,Mn.empty(),pt.now()),ad(t,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:kt(i.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Py(i.bundledQuery),readTime:kt(i.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.overlays=new it(le.comparator),this.Ir=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zr();return $.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const i=zr(),o=t.length+1,l=new le(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new it((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=zr(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=zr(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,y)=>c.set(p,y)),!(c.size()>=i)););return $.resolve(c)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Sy(t,r));let o=this.Ir.get(t);o===void 0&&(o=xe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.Tr=new Ze(Kt.Er),this.dr=new Ze(Kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Kt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new le(new Ue([])),r=new Kt(t,e),i=new Kt(t,e+1),o=[];return this.dr.forEachInRange([r,i],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new le(new Ue([])),r=new Kt(t,e),i=new Kt(t,e+1);let o=xe();return this.dr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Kt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return le.comparator(e.key,t.key)||be(e.wr,t.wr)}static Ar(e,t){return be(e.wr,t.wr)||le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ze(Kt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Ey(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.br=this.br.add(new Kt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),i=new Kt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],l=>{const c=this.Dr(l.wr);o.push(c)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(be);return t.forEach(i=>{const o=new Kt(i,0),l=new Kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],c=>{r=r.add(c.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;le.isDocumentKey(o)||(o=o.child(""));const l=new Kt(new le(o),0);let c=new Ze(be);return this.br.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.wr)),!0)},l),$.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(t.mutations,i=>{const o=new Kt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Kt(t,0),i=this.br.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.Mr=e,this.docs=function(){return new it(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=Un();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():at.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Un();const l=t.path,c=new le(l.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:y}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||fy(hR(y),r)<=0||(i.has(y.key)||ad(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,i){pe()}Or(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new IM(this)}getSize(e){return $.resolve(this.size)}}class IM extends yA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.persistence=e,this.Nr=new Ms(t=>Mo(t),sd),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new by,this.targetCount=0,this.kr=$o.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),$.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new $o(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Kn(t),$.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ln(0),this.Kr=!1,this.Kr=!0,this.$r=new yM,this.referenceDelegate=e(this),this.Ur=new EM(this),this.indexManager=new sM,this.remoteDocumentCache=function(i){return new wM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new dA(t),this.Gr=new gM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _M,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new vM(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const i=new TM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class TM extends pR{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Jr=new by,this.Yr=null}static Zr(e){return new pp(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return $.or([()=>$.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.serializer=e}O(e,t,r,i){const o=new ap("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VE,{unique:!0}),h.createObjectStore("documentMutations")}(e),ET(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=$.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),ET(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(h,p){return p.store("mutations").U().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VE,{unique:!0});const v=p.store("mutations"),E=y.map(A=>v.put(A));return $.waitFor(E)})}(e,o))),l=l.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(l=l.next(()=>this.ni(o))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(l=l.next(()=>this.ii(o))),r<8&&i>=8&&(l=l.next(()=>this.si(e,o))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.oi(o))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(h){const p=h.createObjectStore("documentOverlays",{keyPath:iL});p.createIndex("collectionPathOverlayIndex",sL,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",oL,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:HV});p.createIndex("documentKeyIndex",KV),p.createIndex("collectionGroupIndex",QV)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ai(e,o))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:eL}).createIndex("sequenceNumberIndex",tL,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:nL}).createIndex("documentKeyIndex",rL,{unique:!1})}(e))),r<16&&i>=16&&(l=l.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(l=l.next(()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)})),l}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Cf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>$.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next(c=>$.forEach(c,h=>{ve(h.userId===o.userId);const p=vo(this.serializer,h);return mA(e,o.userId,p).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((l,c)=>{const h=new Ue(l),p=function(v){return[0,Tn(v)]}(h);o.push(t.get(p).next(y=>y?$.resolve():(v=>t.put({targetId:0,path:Tn(v),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>$.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ZV});const r=t.store("collectionParents"),i=new Cy,o=l=>{if(i.add(l)){const c=l.lastSegment(),h=l.popLast();return r.put({collectionId:c,parent:Tn(h)})}};return t.store("remoteDocuments").J({H:!0},(l,c)=>{const h=new Ue(l);return o(h.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,c,h],p)=>{const y=$r(c);return o(y.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const o=dc(i),l=hA(this.serializer,o);return t.put(l)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,l)=>{const c=t.store("remoteDocumentsV14"),h=function(v){return v.document?new le(Ue.fromString(v.document.name).popFirst(5)):v.noDocument?le.fromSegments(v.noDocument.path):v.unknownDocument?le.fromSegments(v.unknownDocument.path):pe()}(l).path.toArray(),p={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))}).next(()=>$.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=vA(this.serializer),o=new IA(pp.Zr,this.serializer.ct);return r.U().next(l=>{const c=new Map;return l.forEach(h=>{var p;let y=(p=c.get(h.userId))!==null&&p!==void 0?p:xe();vo(this.serializer,h).keys().forEach(v=>y=y.add(v)),c.set(h.userId,y)}),$.forEach(c,(h,p)=>{const y=new Qt(p),v=hp.lt(this.serializer,y),E=o.getIndexManager(y),A=fp.lt(y,this.serializer,E,o.referenceDelegate);return new wA(i,A,v,E).recalculateAndSaveOverlaysForDocumentKeys(new n_(t,Ln.oe),h).next()})})}}function ET(n){n.createObjectStore("targetDocuments",{keyPath:YV}).createIndex("documentTargetsIndex",XV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JV,{unique:!0}),n.createObjectStore("targetGlobal")}const Rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ny{constructor(e,t,r,i,o,l,c,h,p,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=l,this.document=c,this.ci=p,this.li=y,this.hi=v,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=E=>Promise.resolve(),!Ny.D())throw new X(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hM(this,i),this.Ai=t+"main",this.serializer=new dA(h),this.Ri=new qr(this.Ai,this.hi,new SM(this.serializer)),this.$r=new ZL,this.Ur=new aM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vA(this.serializer),this.Gr=new XL,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&Pt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(G.FAILED_PRECONDITION,Rg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ls(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ec(e).get("owner").next(t=>$.resolve(this.vi(t)))}Ci(e){return zh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=$t(t,"clientMetadata");return r.U().next(i=>{const o=this.xi(i,18e5),l=i.filter(c=>o.indexOf(c)===-1);return $.forEach(l,c=>r.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new X(G.FAILED_PRECONDITION,Rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(o||l&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ee("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new n_(e,Ln.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return fp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ee("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(h){return h===17?uL:h===16?lL:h===15?my:h===14?wR:h===13?vR:h===12?aL:h===11?yR:void pe()}(this.hi);let l;return this.Ri.runTransaction(e,i,o,c=>(l=new n_(c,this.Qr?this.Qr.next():Ln.oe),t==="readwrite-primary"?this.wi(l).next(h=>!!h||this.Si(l)).next(h=>{if(!h)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(G.FAILED_PRECONDITION,fR);return r(l)}).next(h=>this.Di(l).next(()=>h)):this.Ki(l).next(()=>r(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}Ki(e){return ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new X(G.FAILED_PRECONDITION,Rg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ec(e).put("owner",t)}static D(){return qr.D()}bi(e){const t=ec(e);return t.get("owner").next(r=>this.vi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;zS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ec(n){return $t(n,"owner")}function zh(n){return $t(n,"clientMetadata")}function xy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=xe(),i=xe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Dy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zS()?8:mR(Be())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Yi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new RM;return this.Xi(e,t,l).next(c=>{if(o.result=c,this.zi)return this.es(e,t,l,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(rl()<=Oe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(rl()<=Oe.DEBUG&&ee("QueryEngine","Query:",il(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rl()<=Oe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(t))):$.resolve())}Yi(e,t){if(KE(t))return $.resolve(null);let r=Sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Af(t,null,"F"),r=Sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=xe(...o);return this.Ji.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.ts(t,c);return this.ns(t,p,l,h.readTime)?this.Yi(e,Af(t,null,"F")):this.rs(e,p,t,h)}))})))}Zi(e,t,r,i){return KE(t)||i.isEqual(Ee.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const l=this.ts(t,o);return this.ns(t,l,r,i)?$.resolve(null):(rl()<=Oe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),il(t)),this.rs(e,l,t,dR(i,-1)).next(c=>c))})}ts(e,t){let r=new Ze(LR(e));return t.forEach((i,o)=>{ad(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return rl()<=Oe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",il(t)),this.Ji.getDocumentsMatchingQuery(e,t,Jn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new it(be),this._s=new Ms(o=>Mo(o),sd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function TA(n,e,t,r){return new AM(n,e,t,r)}async function SA(n,e){const t=ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=xe();for(const p of i){l.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}for(const p of o){c.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:c}))})})}function PM(n,e){const t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const v=p.batch,E=v.keys();let A=$.resolve();return E.forEach(D=>{A=A.next(()=>y.getEntry(h,D)).next(V=>{const k=p.docVersions.get(D);ve(k!==null),V.version.compareTo(k)<0&&(v.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(h,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=xe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function RA(n){const e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function kM(n,e){const t=ce(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach((y,v)=>{const E=i.get(v);if(!E)return;c.push(t.Ur.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,y.addedDocuments,v)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(It.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),i=i.insert(v,A),function(V,k,Y){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(E,A,y)&&c.push(t.Ur.updateTargetData(o,A))});let h=Un(),p=xe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),c.push(AA(o,l,e.documentUpdates).next(y=>{h=y.Ps,p=y.Is})),!r.isEqual(Ee.min())){const y=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(y)}return $.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.os=i,o))}function AA(n,e,t){let r=xe(),i=xe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Un();return t.forEach((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ee.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Ps:l,Is:i}})}function CM(n,e){const t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cl(n,e){const t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):t.Ur.allocateTargetId(r).next(l=>(i=new _i(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function bl(n,e,t){const r=ce(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ls(l))throw l;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function bf(n,e,t){const r=ce(n);let i=Ee.min(),o=xe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,p,y){const v=ce(h),E=v._s.get(y);return E!==void 0?$.resolve(v.os.get(E)):v.Ur.getTargetData(p,y)}(r,l,Sn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,t?i:Ee.min(),t?o:xe())).next(c=>(CA(r,VR(e),c),{documents:c,Ts:o})))}function PA(n,e){const t=ce(n),r=ce(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(l=>l?l.target:null))}function kA(n,e){const t=ce(n),r=t.us.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,dR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CA(t,e,i),i))}function CA(n,e,t){let r=n.us.get(e)||Ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}async function bM(n,e,t,r){const i=ce(n);let o=xe(),l=Un();for(const p of t){const y=e.Es(p.metadata.name);p.document&&(o=o.add(y));const v=e.ds(p);v.setReadTime(e.As(p.metadata.readTime)),l=l.insert(y,v)}const c=i.cs.newChangeBuffer({trackRemovals:!0}),h=await Cl(i,function(y){return Sn(ql(Ue.fromString(`__bundle__/docs/${y}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",p=>AA(p,c,l).next(y=>(c.apply(p),y)).next(y=>i.Ur.removeMatchingKeysForTargetId(p,h.targetId).next(()=>i.Ur.addMatchingKeys(p,o,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(p,y.Ps,y.Is)).next(()=>y.Ps)))}async function NM(n,e,t=xe()){const r=await Cl(n,Sn(Py(e.bundledQuery))),i=ce(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=kt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Gr.saveNamedQuery(o,e);const c=r.withResumeToken(It.EMPTY_BYTE_STRING,l);return i.os=i.os.insert(c.targetId,c),i.Ur.updateTargetData(o,c).next(()=>i.Ur.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Ur.addMatchingKeys(o,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(o,e))})}function TT(n,e){return`firestore_clients_${n}_${e}`}function ST(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ag(n,e){return`firestore_targets_${n}_${e}`}class Nf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let o,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(o=new X(i.error.code,i.error.message))),l?new Nf(e,t,i.state,o):(Pt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new X(r.error.code,r.error.message))),o?new vc(e,r.state,i):(Pt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=vy();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=gR(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new xf(e,o):(Pt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Oy{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Oy(t.clientId,t.onlineState):(Pt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class g_{constructor(){this.activeTargetIds=vy()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pg{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new it(be),this.started=!1,this.bs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=TT(this.persistenceKey,this.ps),this.vs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new g_),this.Cs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.Os=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(TT(this.persistenceKey,r));if(i){const o=xf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ag(this.persistenceKey,e));if(i){const o=vc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ag(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee("SharedClientState","READ",e,t),t}setItem(e,t){ee("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ee("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(o){let l=Ln.oe;if(o!=null)try{const c=JSON.parse(o);ve(typeof c=="number"),l=c}catch(c){Pt("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(t.newValue);r!==Ln.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Nf(this.currentUser,e,t,r),o=ST(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){const t=ST(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=Ag(this.persistenceKey,e),o=new vc(e,t,r);this.setItem(i,o.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return xf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Nf.Rs(new Qt(o),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return vc.Rs(i,t)}Ls(e){return Oy.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),l=[],c=[];return o.forEach(h=>{i.has(h)||l.push(h)}),i.forEach(h=>{o.has(h)||c.push(h)}),this.syncEngine.io(l,c).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=vy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bA{constructor(){this.so=new g_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function kg(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class VM extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,l){const c=kg(),h=this.xo(t,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(t,h,p,i).then(y=>(ee("RestConnection",`Received RPC '${t}' ${c}: `,y),y),y=>{throw Qr("RestConnection",`RPC '${t}' ${c} failed with error: `,y,"url: ",h,"request:",i),y})}Lo(t,r,i,o,l,c){return this.Mo(t,r,i,o,l)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>t[l]=o),i&&i.headers.forEach((o,l)=>t[l]=o)}xo(t,r){const i=DM[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const o=kg();return new Promise((l,c)=>{const h=new rR;h.setWithCredentials(!0),h.listenOnce(iR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tf.NO_ERROR:const y=h.getResponseJson();ee(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),l(y);break;case tf.TIMEOUT:ee(dn,`RPC '${e}' ${o} timed out`),c(new X(G.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const v=h.getStatus();if(ee(dn,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E?.error;if(A&&A.status&&A.message){const D=function(k){const Y=k.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Y)>=0?Y:G.UNKNOWN}(A.status);c(new X(D,A.message))}else c(new X(G.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new X(G.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ee(dn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);ee(dn,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)})}Bo(e,t,r){const i=kg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=aR(),c=oR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=o.join("");ee(dn,`Creating RPC '${e}' stream ${i}: ${y}`,h);const v=l.createWebChannel(y,h);let E=!1,A=!1;const D=new OM({Io:k=>{A?ee(dn,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(E||(ee(dn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),E=!0),ee(dn,`RPC '${e}' stream ${i} sending:`,k),v.send(k))},To:()=>v.close()}),V=(k,Y,q)=>{k.listen(Y,K=>{try{q(K)}catch(ne){setTimeout(()=>{throw ne},0)}})};return V(v,lc.EventType.OPEN,()=>{A||(ee(dn,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),V(v,lc.EventType.CLOSE,()=>{A||(A=!0,ee(dn,`RPC '${e}' stream ${i} transport closed`),D.So())}),V(v,lc.EventType.ERROR,k=>{A||(A=!0,Qr(dn,`RPC '${e}' stream ${i} transport errored:`,k),D.So(new X(G.UNAVAILABLE,"The operation could not be completed")))}),V(v,lc.EventType.MESSAGE,k=>{var Y;if(!A){const q=k.data[0];ve(!!q);const K=q,ne=K.error||((Y=K[0])===null||Y===void 0?void 0:Y.error);if(ne){ee(dn,`RPC '${e}' stream ${i} received error:`,ne);const he=ne.status;let ue=function(C){const N=xt[C];if(N!==void 0)return QR(N)}(he),b=ne.message;ue===void 0&&(ue=G.INTERNAL,b="Unknown error status: "+he+" with message "+ne.message),A=!0,D.So(new X(ue,b)),v.close()}else ee(dn,`RPC '${e}' stream ${i} received:`,q),D.bo(q)}}),V(c,sR.STAT_EVENT,k=>{k.stat===e_.PROXY?ee(dn,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===e_.NOPROXY&&ee(dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){return new jL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,r,i,o,l,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vy(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new X(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LM extends xA{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=qL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ee.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?kt(l.readTime):Ee.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=d_(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Sf(h)?{documents:sA(o,h)}:{query:oA(o,h)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ZR(o,l.resumeToken);const p=u_(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ee.min())>0){c.readTime=kl(o,l.snapshotVersion.toTimestamp());const p=u_(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=GL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=d_(this.serializer),t.removeTarget=e,this.a_(t)}}class MM extends xA{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=WL(e.writeResults,e.commitTime),r=kt(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=d_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jc(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,c_(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(G.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(e,c_(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new X(G.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class FM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pt(t),this.D_=!1):ee("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{r.enqueueAndForget(async()=>{Us(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(h){const p=ce(h);p.L_.add(4),await Hl(p),p.q_.set("Unknown"),p.L_.delete(4),await hd(p)}(this))})}),this.q_=new FM(r,i)}}async function hd(n){if(Us(n))for(const e of n.B_)await e(!0)}async function Hl(n){for(const e of n.B_)await e(!1)}function mp(n,e){const t=ce(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Uy(t)?My(t):Ql(t).r_()&&Ly(t,e))}function Nl(n,e){const t=ce(n),r=Ql(t);t.N_.delete(e),r.r_()&&DA(t,e),t.N_.size===0&&(r.r_()?r.o_():Us(t)&&t.q_.set("Unknown"))}function Ly(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(n).A_(e)}function DA(n,e){n.Q_.xe(e),Ql(n).R_(e)}function My(n){n.Q_=new ML({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ql(n).start(),n.q_.v_()}function Uy(n){return Us(n)&&!Ql(n).n_()&&n.N_.size>0}function Us(n){return ce(n).L_.size===0}function OA(n){n.Q_=void 0}async function jM(n){n.q_.set("Online")}async function $M(n){n.N_.forEach((e,t)=>{Ly(n,e)})}async function zM(n,e){OA(n),Uy(n)?(n.q_.M_(e),My(n)):n.q_.set("Unknown")}async function qM(n,e,t){if(n.q_.set("Online"),e instanceof XR&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.N_.delete(c),i.Q_.removeTarget(c))}(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Df(n,r)}else if(e instanceof lf?n.Q_.Ke(e):e instanceof YR?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ee.min()))try{const r=await RA(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Q_.rt(l);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=o.N_.get(p);y&&o.N_.set(p,y.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,p)=>{const y=o.N_.get(h);if(!y)return;o.N_.set(h,y.withResumeToken(It.EMPTY_BYTE_STRING,y.snapshotVersion)),DA(o,h);const v=new _i(y.target,h,p,y.sequenceNumber);Ly(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Df(n,r)}}async function Df(n,e,t){if(!Ls(e))throw e;n.L_.add(1),await Hl(n),n.q_.set("Offline"),t||(t=()=>RA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await hd(n)})}function VA(n,e){return e().catch(t=>Df(n,t,e))}async function Kl(n){const e=ce(n),t=Ns(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WM(e);)try{const i=await CM(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GM(e,i)}catch(i){await Df(e,i)}LA(e)&&MA(e)}function WM(n){return Us(n)&&n.O_.length<10}function GM(n,e){n.O_.push(e);const t=Ns(n);t.r_()&&t.V_&&t.m_(e.mutations)}function LA(n){return Us(n)&&!Ns(n).n_()&&n.O_.length>0}function MA(n){Ns(n).start()}async function HM(n){Ns(n).p_()}async function KM(n){const e=Ns(n);for(const t of n.O_)e.m_(t.mutations)}async function QM(n,e,t){const r=n.O_.shift(),i=Ty.from(r,e,t);await VA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Kl(n)}async function JM(n,e){e&&Ns(n).V_&&await async function(r,i){if(function(l){return KR(l)&&l!==G.ABORTED}(i.code)){const o=r.O_.shift();Ns(r).s_(),await VA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Kl(r)}}(n,e),LA(n)&&MA(n)}async function AT(n,e){const t=ce(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Us(t);t.L_.add(3),await Hl(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await hd(t)}async function __(n,e){const t=ce(n);e?(t.L_.delete(2),await hd(t)):e||(t.L_.add(2),await Hl(t),t.q_.set("Unknown"))}function Ql(n){return n.K_||(n.K_=function(t,r,i){const o=ce(t);return o.w_(),new LM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:jM.bind(null,n),Ro:$M.bind(null,n),mo:zM.bind(null,n),d_:qM.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Uy(n)?My(n):n.q_.set("Unknown")):(await n.K_.stop(),OA(n))})),n.K_}function Ns(n){return n.U_||(n.U_=function(t,r,i){const o=ce(t);return o.w_(),new MM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HM.bind(null,n),mo:JM.bind(null,n),f_:KM.bind(null,n),g_:QM.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Kl(n)):(await n.U_.stop(),n.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Fy(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jl(n,e){if(Pt("AsyncQueue",`${e}: ${n}`),Ls(n))return new X(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new fl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.W_=new it(le.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class xl{constructor(e,t,r,i,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new xl(e,t,fl.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XM{constructor(){this.queries=kT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=ce(t),o=i.queries;i.queries=kT(),o.forEach((l,c)=>{for(const h of c.j_)h.onError(r)})})(this,new X(G.ABORTED,"Firestore shutting down"))}}function kT(){return new Ms(n=>OR(n),od)}async function By(n,e){const t=ce(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new YM,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(i,!0);break;case 1:o.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Jl(l,`Initialization of query '${il(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&$y(t)}async function jy(n,e){const t=ce(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZM(n,e){const t=ce(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.j_)c.X_(i)&&(r=!0);l.z_=i}}r&&$y(t)}function eU(n,e,t){const r=ce(n),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(t);r.queries.delete(e)}function $y(n){n.Y_.forEach(e=>{e.next()})}var y_,CT;(CT=y_||(y_={})).ea="default",CT.Cache="cache";class zy{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==y_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.serializer=e}Es(e){return Wr(this.serializer,e)}ds(e){return e.metadata.exists?iA(this.serializer,e.document,!1):at.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return kt(e)}}class nU{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Ue.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new bT(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Es(i.metadata.name);for(const l of i.metadata.queries){const c=(t.get(l)||xe()).add(o);t.set(l,c)}}return t}async complete(){const e=await bM(this.localStore,new bT(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await NM(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function UA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.key=e}}class BA{constructor(e){this.key=e}}class jA{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=LR(e),this.Ra=new fl(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new PT,i=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,v)=>{const E=i.get(y),A=ad(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let k=!1;E&&A?E.data.isEqual(A.data)?D!==V&&(r.track({type:3,doc:A}),k=!0):this.ga(E,A)||(r.track({type:2,doc:A}),k=!0,(h&&this.Aa(A,h)>0||p&&this.Aa(A,p)<0)&&(c=!0)):!E&&A?(r.track({type:0,doc:A}),k=!0):E&&!A&&(r.track({type:1,doc:E}),k=!0,(h||p)&&(c=!0)),k&&(A?(l=l.add(A),o=V?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{Ra:l,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((y,v)=>function(A,D){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return V(A)-V(D)}(y.type,v.type)||this.Aa(y.doc,v.doc)),this.pa(r),i=i!=null&&i;const c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,p=h!==this.Ea;return this.Ea=h,l.length!==0||p?{snapshot:new xl(this.query,e.Ra,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new PT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new BA(r))}),this.da.forEach(r=>{e.has(r)||t.push(new FA(r))}),t}ba(e){this.Ta=e.Ts,this.da=xe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class rU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iU{constructor(e){this.key=e,this.va=!1}}class sU{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Ms(c=>OR(c),od),this.Ma=new Map,this.xa=new Set,this.Oa=new it(le.comparator),this.Na=new Map,this.La=new by,this.Ba={},this.ka=new Map,this.qa=$o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function oU(n,e,t=!0){const r=gp(n);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await $A(r,e,t,!0),i}async function aU(n,e){const t=gp(n);await $A(t,e,!0,!1)}async function $A(n,e,t,r){const i=await Cl(n.localStore,Sn(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await qy(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&mp(n.remoteStore,i),c}async function qy(n,e,t,r,i){n.Ka=(v,E,A)=>async function(V,k,Y,q){let K=k.view.ma(Y);K.ns&&(K=await bf(V.localStore,k.query,!1).then(({documents:b})=>k.view.ma(b,K)));const ne=q&&q.targetChanges.get(k.targetId),he=q&&q.targetMismatches.get(k.targetId)!=null,ue=k.view.applyChanges(K,V.isPrimaryClient,ne,he);return v_(V,k.targetId,ue.wa),ue.snapshot}(n,v,E,A);const o=await bf(n.localStore,e,!0),l=new jA(e,o.Ts),c=l.ma(o.documents),h=cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);v_(n,t,p.wa);const y=new rU(e,t,l);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function lU(n,e,t){const r=ce(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(l=>!od(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Nl(r.remoteStore,i.targetId),Dl(r,i.targetId)}).catch(Vs)):(Dl(r,i.targetId),await bl(r.localStore,i.targetId,!0))}async function uU(n,e){const t=ce(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nl(t.remoteStore,r.targetId))}async function cU(n,e,t){const r=Ky(n);try{const i=await function(l,c){const h=ce(l),p=pt.now(),y=c.reduce((A,D)=>A.add(D.key),xe());let v,E;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=Un(),V=xe();return h.cs.getEntries(A,y).next(k=>{D=k,D.forEach((Y,q)=>{q.isValidDocument()||(V=V.add(Y))})}).next(()=>h.localDocuments.getOverlayedDocuments(A,D)).next(k=>{v=k;const Y=[];for(const q of c){const K=OL(q,v.get(q.key).overlayedDocument);K!=null&&Y.push(new Di(q.key,K,RR(K.value.mapValue),ft.exists(!0)))}return h.mutationQueue.addMutationBatch(A,p,Y,c)}).next(k=>{E=k;const Y=k.applyToLocalDocumentSet(v,V);return h.documentOverlayCache.saveOverlays(A,k.batchId,Y)})}).then(()=>({batchId:E.batchId,changes:UR(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let p=l.Ba[l.currentUser.toKey()];p||(p=new it(be)),p=p.insert(c,h),l.Ba[l.currentUser.toKey()]=p}(r,i.batchId,t),await Oi(r,i.changes),await Kl(r.remoteStore)}catch(i){const o=Jl(i,"Failed to persist write");t.reject(o)}}async function zA(n,e){const t=ce(n);try{const r=await kM(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Na.get(o);l&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?ve(l.va):i.removedDocuments.size>0&&(ve(l.va),l.va=!1))}),await Oi(t,r,e)}catch(r){await Vs(r)}}function NT(n,e,t){const r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((o,l)=>{const c=l.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=ce(l);h.onlineState=c;let p=!1;h.queries.forEach((y,v)=>{for(const E of v.j_)E.Z_(c)&&(p=!0)}),p&&$y(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dU(n,e,t){const r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),o=i&&i.key;if(o){let l=new it(le.comparator);l=l.insert(o,at.newNoDocument(o,Ee.min()));const c=xe().add(o),h=new ud(Ee.min(),new Map,new it(be),l,c);await zA(r,h),r.Oa=r.Oa.remove(o),r.Na.delete(e),Hy(r)}else await bl(r.localStore,e,!1).then(()=>Dl(r,e,t)).catch(Vs)}async function hU(n,e){const t=ce(n),r=e.batch.batchId;try{const i=await PM(t.localStore,e);Gy(t,r,null),Wy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Oi(t,i)}catch(i){await Vs(i)}}async function fU(n,e,t){const r=ce(n);try{const i=await function(l,c){const h=ce(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(v=>(ve(v!==null),y=v.keys(),h.mutationQueue.removeMutationBatch(p,v))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);Gy(r,e,t),Wy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Oi(r,i)}catch(i){await Vs(i)}}async function pU(n,e){const t=ce(n);Us(t.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(l){const c=ce(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Jl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Wy(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Gy(n,e,t){const r=ce(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Dl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||qA(n,r)})}function qA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Nl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Hy(n))}function v_(n,e,t){for(const r of t)r instanceof FA?(n.La.addReference(r.key,e),mU(n,r)):r instanceof BA?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||qA(n,r.key)):pe()}function mU(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.xa.add(r),Hy(n))}function Hy(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new le(Ue.fromString(e)),r=n.qa.next();n.Na.set(r,new iU(t)),n.Oa=n.Oa.insert(t,r),mp(n.remoteStore,new _i(Sn(ql(t.path)),r,"TargetPurposeLimboResolution",Ln.oe))}}async function Oi(n,e,t){const r=ce(n),i=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{l.push(r.Ka(h,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t?.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(p){i.push(p);const v=Dy.Wi(h.targetId,p);o.push(v)}}))}),await Promise.all(l),r.Ca.d_(i),await async function(h,p){const y=ce(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>$.forEach(p,E=>$.forEach(E.$i,A=>y.persistence.referenceDelegate.addReference(v,E.targetId,A)).next(()=>$.forEach(E.Ui,A=>y.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))}catch(v){if(!Ls(v))throw v;ee("LocalStore","Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const A=y.os.get(E),D=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(D);y.os=y.os.insert(E,V)}}}(r.localStore,o))}async function gU(n,e){const t=ce(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await SA(t.localStore,e);t.currentUser=e,function(o,l){o.ka.forEach(c=>{c.forEach(h=>{h.reject(new X(G.CANCELLED,l))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oi(t,r.hs)}}function _U(n,e){const t=ce(n),r=t.Na.get(e);if(r&&r.va)return xe().add(r.key);{let i=xe();const o=t.Ma.get(e);if(!o)return i;for(const l of o){const c=t.Fa.get(l);i=i.unionWith(c.view.Va)}return i}}async function yU(n,e){const t=ce(n),r=await bf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&v_(t,e.targetId,i.wa),i}async function vU(n,e){const t=ce(n);return kA(t.localStore,e).then(r=>Oi(t,r))}async function wU(n,e,t,r){const i=ce(n),o=await function(c,h){const p=ce(c),y=ce(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>y.Mn(v,h).next(E=>E?p.localDocuments.getDocuments(v,E):$.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?await Kl(i.remoteStore):t==="acknowledged"||t==="rejected"?(Gy(i,e,r||null),Wy(i,e),function(c,h){ce(ce(c).mutationQueue).On(h)}(i.localStore,e)):pe(),await Oi(i,o)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}async function IU(n,e){const t=ce(n);if(gp(t),Ky(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await xT(t,r.toArray());t.Qa=!0,await __(t.remoteStore,!0);for(const o of i)mp(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Dl(t,l),bl(t.localStore,l,!0))),Nl(t.remoteStore,l)}),await i,await xT(t,r),function(l){const c=ce(l);c.Na.forEach((h,p)=>{Nl(c.remoteStore,p)}),c.La.pr(),c.Na=new Map,c.Oa=new it(le.comparator)}(t),t.Qa=!1,await __(t.remoteStore,!1)}}async function xT(n,e,t){const r=ce(n),i=[],o=[];for(const l of e){let c;const h=r.Ma.get(l);if(h&&h.length!==0){c=await Cl(r.localStore,Sn(h[0]));for(const p of h){const y=r.Fa.get(p),v=await yU(r,y);v.snapshot&&o.push(v.snapshot)}}else{const p=await PA(r.localStore,l);c=await Cl(r.localStore,p),await qy(r,WA(p),l,!1,c.resumeToken)}i.push(c)}return r.Ca.d_(o),i}function WA(n){return DR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EU(n){return function(t){return ce(ce(t).persistence).Qi()}(ce(n).localStore)}async function TU(n,e,t,r){const i=ce(n);if(i.Qa)return void ee("SyncEngine","Ignoring unexpected query state notification.");const o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await kA(i.localStore,VR(o[0])),c=ud.createSynthesizedRemoteEventForCurrentChange(e,t==="current",It.EMPTY_BYTE_STRING);await Oi(i,l,c);break}case"rejected":await bl(i.localStore,e,!0),Dl(i,e,r);break;default:pe()}}async function SU(n,e,t){const r=gp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ee("SyncEngine","Adding an already active target "+i);continue}const o=await PA(r.localStore,i),l=await Cl(r.localStore,o);await qy(r,WA(o),l.targetId,!1,l.resumeToken),mp(r.remoteStore,l)}for(const i of t)r.Ma.has(i)&&await bl(r.localStore,i,!1).then(()=>{Nl(r.remoteStore,i),Dl(r,i)}).catch(Vs)}}function gp(n){const e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dU.bind(null,e),e.Ca.d_=ZM.bind(null,e.eventManager),e.Ca.$a=eU.bind(null,e.eventManager),e}function Ky(n){const e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fU.bind(null,e),e}function RU(n,e,t){const r=ce(n);(async function(o,l,c){try{const h=await l.getMetadata();if(await function(A,D){const V=ce(A),k=kt(D.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",Y=>V.Gr.getBundleMetadata(Y,D.id)).then(Y=>!!Y&&Y.createTime.compareTo(k)>=0)}(o.localStore,h))return await l.close(),c._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(h)),Promise.resolve(new Set);c._updateProgress(UA(h));const p=new nU(h,o.localStore,l.serializer);let y=await l.Ua();for(;y;){const E=await p.la(y);E&&c._updateProgress(E),y=await l.Ua()}const v=await p.complete();return await Oi(o,v.Ia,void 0),await function(A,D){const V=ce(A);return V.persistence.runTransaction("Save bundle","readwrite",k=>V.Gr.saveBundleMetadata(k,D))}(o.localStore,h),c._completeWith(v.progress),Promise.resolve(v.Pa)}catch(h){return Qr("SyncEngine",`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return TA(this.persistence,new EA,e.initialUser,this.serializer)}Ga(e){return new IA(pp.Zr,this.serializer)}Wa(e){return new bA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class GA extends $c{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Ky(this.Ja.syncEngine),await Kl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return TA(this.persistence,new EA,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new uM(r,e.asyncQueue,t)}Ha(e,t){const r=new qV(t,this.persistence);return new zV(e.asyncQueue,r)}Ga(e){const t=xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Ny(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NA(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bA}}class AU extends GA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Pg&&(this.sharedClientState.syncEngine={no:wU.bind(null,t),ro:TU.bind(null,t),io:SU.bind(null,t),Qi:EU.bind(null,t),eo:vU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await IU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=NA();if(!Pg.D(t))throw new X(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=xy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gU.bind(null,this.syncEngine),await __(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XM}()}createDatastore(e){const t=dd(e.databaseInfo.databaseId),r=function(o){return new VM(o)}(e.databaseInfo);return function(o,l,c,h){return new UM(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new BM(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>NT(this.syncEngine,t,0),function(){return RT.D()?new RT:new xM}())}createSyncEngine(e,t){return function(i,o,l,c,h,p,y){const v=new sU(i,o,l,c,h,p);return y&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=ce(i);ee("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Hl(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zc.provider={build:()=>new zc};function DT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new sn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new tU(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new X(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,o){const l=ce(i),c={documents:o.map(v=>Bc(l.serializer,v))},h=await l.Lo("BatchGetDocuments",l.serializer.databaseId,Ue.emptyPath(),c,o.length),p=new Map;h.forEach(v=>{const E=zL(l.serializer,v);p.set(E.key.toString(),E)});const y=[];return o.forEach(v=>{const E=p.get(v.toString());ve(!!E),y.push(E)}),y}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=le.fromPath(r);this.mutations.push(new Iy(i,this.precondition(i)))}),await async function(r,i){const o=ce(r),l={writes:i.map(c=>jc(o.serializer,c))};await o.Mo("Commit",o.serializer.databaseId,Ue.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pe();t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new X(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?ft.exists(!1):ft.updateTime(t):ft.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new X(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(t)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Vy(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new kU(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!id(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!KR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=uR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ee("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ee("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Jl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(n,e){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function OT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Qy(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>AT(e.remoteStore,i)),n._onlineComponents=e}async function Qy(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qr("Error using user provided cache. Falling back to memory cache: "+t),await Cg(n,new $c)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Cg(n,new $c);return n._offlineComponents}async function yp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await OT(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await OT(n,new zc))),n._onlineComponents}function HA(n){return Qy(n).then(e=>e.persistence)}function Jy(n){return Qy(n).then(e=>e.localStore)}function KA(n){return yp(n).then(e=>e.remoteStore)}function Yy(n){return yp(n).then(e=>e.syncEngine)}function NU(n){return yp(n).then(e=>e.datastore)}async function Ol(n){const e=await yp(n),t=e.eventManager;return t.onListen=oU.bind(null,e.syncEngine),t.onUnlisten=lU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uU.bind(null,e.syncEngine),t}function xU(n){return n.asyncQueue.enqueue(async()=>{const e=await HA(n),t=await KA(n);return e.setNetworkEnabled(!0),function(i){const o=ce(i);return o.L_.delete(0),hd(o)}(t)})}function DU(n){return n.asyncQueue.enqueue(async()=>{const e=await HA(n),t=await KA(n);return e.setNetworkEnabled(!1),async function(i){const o=ce(i);o.L_.add(0),await Hl(o),o.q_.set("Offline")}(t)})}function OU(n,e){const t=new sn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,o,l){try{const c=await function(p,y){const v=ce(p);return v.persistence.runTransaction("read document","readonly",E=>v.localDocuments.getDocument(E,y))}(i,o);c.isFoundDocument()?l.resolve(c):c.isNoDocument()?l.resolve(null):l.reject(new X(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=Jl(c,`Failed to get document '${o} from cache`);l.reject(h)}}(await Jy(n),e,t)),t.promise}function QA(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const y=new _p({next:E=>{y.Za(),l.enqueueAndForget(()=>jy(o,v));const A=E.docs.has(c);!A&&E.fromCache?p.reject(new X(G.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&h&&h.source==="server"?p.reject(new X(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new zy(ql(c.path),y,{includeMetadataChanges:!0,_a:!0});return By(o,v)}(await Ol(n),n.asyncQueue,e,t,r)),r.promise}function VU(n,e){const t=new sn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,o,l){try{const c=await bf(i,o,!0),h=new jA(o,c.Ts),p=h.ma(c.documents),y=h.applyChanges(p,!1);l.resolve(y.snapshot)}catch(c){const h=Jl(c,`Failed to execute query '${o} against cache`);l.reject(h)}}(await Jy(n),e,t)),t.promise}function JA(n,e,t={}){const r=new sn;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const y=new _p({next:E=>{y.Za(),l.enqueueAndForget(()=>jy(o,v)),E.fromCache&&h.source==="server"?p.reject(new X(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new zy(c,y,{includeMetadataChanges:!0,_a:!0});return By(o,v)}(await Ol(n),n.asyncQueue,e,t,r)),r.promise}function LU(n,e){const t=new _p(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,o){ce(i).Y_.add(o),o.next()}(await Ol(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,o){ce(i).Y_.delete(o)}(await Ol(n),t))}}function MU(n,e,t,r){const i=function(l,c){let h;return h=typeof l=="string"?JR().encode(l):l,function(y,v){return new PU(y,v)}(function(y,v){if(y instanceof Uint8Array)return DT(y,v);if(y instanceof ArrayBuffer)return DT(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),c)}(t,dd(e));n.asyncQueue.enqueueAndForget(async()=>{RU(await Yy(n),i,r)})}function UU(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const o=ce(r);return o.persistence.runTransaction("Get named query","readonly",l=>o.Gr.getNamedQuery(l,i))}(await Jy(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e,t){if(!t)throw new X(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XA(n,e,t,r){if(e===!0&&r===!0)throw new X(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LT(n){if(!le.isDocumentKey(n))throw new X(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MT(n){if(le.isDocumentKey(n))throw new X(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe()}function He(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vp(n);throw new X(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZA(n,e){if(e<=0)throw new X(G.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new X(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new X(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new X(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xV;switch(r.type){case"firstParty":return new LV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=VT.get(t);r&&(ee("ComponentProvider","Removing Datastore"),VT.delete(t),r.terminate())}(this),Promise.resolve()}}function eP(n,e,t,r={}){var i;const o=(n=He(n,fd))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Qt.MOCK_USER;else{c=FS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new X(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qt(p)}n._authCredentials=new DV(new lR(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class tP{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tP(this.firestore,e,this._query)}},_t=class nP{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nP(this.firestore,e,this._key)}},Ts=class rP extends Rn{constructor(e,t,r){super(e,t,ql(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new le(e))}withConverter(e){return new rP(this.firestore,e,this._path)}};function iP(n,e,...t){if(n=me(n),Xy("collection","path",e),n instanceof fd){const r=Ue.fromString(e,...t);return MT(r),new Ts(n,null,r)}{if(!(n instanceof _t||n instanceof Ts))throw new X(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ue.fromString(e,...t));return MT(r),new Ts(n.firestore,null,r)}}function FU(n,e){if(n=He(n,fd),Xy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rn(n,null,function(r){return new xi(Ue.emptyPath(),r)}(e))}function qc(n,e,...t){if(n=me(n),arguments.length===1&&(e=uR.newId()),Xy("doc","path",e),n instanceof fd){const r=Ue.fromString(e,...t);return LT(r),new _t(n,null,new le(r))}{if(!(n instanceof _t||n instanceof Ts))throw new X(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ue.fromString(e,...t));return LT(r),new _t(n.firestore,n instanceof Ts?n.converter:null,new le(r))}}function sP(n,e){return n=me(n),e=me(e),(n instanceof _t||n instanceof Ts)&&(e instanceof _t||e instanceof Ts)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oP(n,e){return n=me(n),e=me(e),n instanceof Rn&&e instanceof Rn&&n.firestore===e.firestore&&od(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vy(this,"async_queue_retry"),this.Vu=()=>{const r=uf();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ls(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Pt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Fy.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function w_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class BU{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=-1;let Ct=class extends fd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new FT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FT(e),this._firestoreClient=void 0,await e}}};function $U(n,e){const t=q_(),r="(default)",i=Jc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Yb("firestore");o&&eP(i,...o)}return i}function fn(n){if(n._terminated)throw new X(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aP(n),n._firestoreClient}function aP(n){var e,t,r;const i=n._freezeSettings(),o=function(c,h,p,y){return new hL(c,h,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,YA(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new bU(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c?._online.build();return{_offline:c?._offline.build(h),_online:h}}(n._componentsProvider))}function zU(n,e){Qr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return lP(n,zc.provider,{build:r=>new GA(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function qU(n){Qr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();lP(n,zc.provider,{build:t=>new AU(t,e.cacheSizeBytes)})}function lP(n,e,t){if((n=He(n,Ct))._firestoreClient||n._terminated)throw new X(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new X(G.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},aP(n)}function WU(n){if(n._initialized&&!n._terminated)throw new X(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!qr.D())return Promise.resolve();const i=r+"main";await qr.delete(i)}(xy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function GU(n){return function(t){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>pU(await Yy(t),r)),r.promise}(fn(n=He(n,Ct)))}function HU(n){return xU(fn(n=He(n,Ct)))}function KU(n){return DU(fn(n=He(n,Ct)))}function QU(n,e){const t=fn(n=He(n,Ct)),r=new BU;return MU(t,n._databaseId,e,r),r}function JU(n,e){return UU(fn(n=He(n,Ct)),e).then(t=>t?new Rn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(It.fromBase64String(e))}catch(t){throw new X(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=/^__.*__$/;class XU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class uP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Ip{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cP(this.Cu)&&YU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dd(e)}Qu(e,t,r,i=!1){return new Ip({Cu:e,methodName:t,qu:r,path:ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yo(n){const e=n._freezeSettings(),t=dd(n._databaseId);return new ZU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ep(n,e,t,r,i,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);ov("Data must be an object, but it was:",l,r);const c=fP(r,l);let h,p;if(o.merge)h=new Mn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=I_(e,v,t);if(!l.contains(E))throw new X(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);mP(y,E)||y.push(E)}h=new Mn(y),p=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=l.fieldTransforms;return new XU(new rn(c),h,p)}class pd extends Jo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pd}}function dP(n,e,t){return new Ip({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ev extends Jo{_toFieldTransform(e){return new ld(e.path,new Al)}isEqual(e){return e instanceof ev}}class tv extends Jo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=dP(this,e,!0),r=this.Ku.map(o=>Xo(o,t)),i=new Uo(r);return new ld(e.path,i)}isEqual(e){return e instanceof tv&&yl(this.Ku,e.Ku)}}class nv extends Jo{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=dP(this,e,!0),r=this.Ku.map(o=>Xo(o,t)),i=new Fo(r);return new ld(e.path,i)}isEqual(e){return e instanceof nv&&yl(this.Ku,e.Ku)}}class rv extends Jo{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Pl(e.serializer,jR(e.serializer,this.$u));return new ld(e.path,t)}isEqual(e){return e instanceof rv&&this.$u===e.$u}}function iv(n,e,t,r){const i=n.Qu(1,e,t);ov("Data must be an object, but it was:",i,r);const o=[],l=rn.empty();Qo(r,(h,p)=>{const y=av(e,h,t);p=me(p);const v=i.Nu(y);if(p instanceof pd)o.push(y);else{const E=Xo(p,v);E!=null&&(o.push(y),l.set(y,E))}});const c=new Mn(o);return new uP(l,c,i.fieldTransforms)}function sv(n,e,t,r,i,o){const l=n.Qu(1,e,t),c=[I_(e,r,t)],h=[i];if(o.length%2!=0)throw new X(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(I_(e,o[E])),h.push(o[E+1]);const p=[],y=rn.empty();for(let E=c.length-1;E>=0;--E)if(!mP(p,c[E])){const A=c[E];let D=h[E];D=me(D);const V=l.Nu(A);if(D instanceof pd)p.push(A);else{const k=Xo(D,V);k!=null&&(p.push(A),y.set(A,k))}}const v=new Mn(p);return new uP(y,v,l.fieldTransforms)}function hP(n,e,t,r=!1){return Xo(t,n.Qu(r?4:3,e))}function Xo(n,e){if(pP(n=me(n)))return ov("Unsupported field value:",e,n),fP(n,e);if(n instanceof Jo)return function(r,i){if(!cP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=Xo(c,i.Lu(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=pt.fromDate(r);return{timestampValue:kl(i.serializer,o)}}if(r instanceof pt){const o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kl(i.serializer,o)}}if(r instanceof wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:ZR(i.serializer,r._byteString)};if(r instanceof _t){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ay(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zy)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return wy(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vp(r)}`)}(n,e)}function fP(n,e){const t={};return IR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(n,(r,i)=>{const o=Xo(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof wp||n instanceof Yr||n instanceof _t||n instanceof Jo||n instanceof Zy)}function ov(n,e,t){if(!pP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=vp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function I_(n,e,t){if((e=me(e))instanceof xs)return e._internalPath;if(typeof e=="string")return av(n,e);throw Of("Field path arguments must be of type string or ",n,!1,void 0,t)}const eF=new RegExp("[~\\*/\\[\\]]");function av(n,e,t){if(e.search(eF)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xs(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Of(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new X(G.INVALID_ARGUMENT,c+n+h)}function mP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tF extends Wc{data(){return super.data()}}function Tp(n,e){return typeof e=="string"?av(n,e):e instanceof xs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lv{}class md extends lv{}function cs(n,e,...t){let r=[];e instanceof lv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof uv).length,c=o.filter(h=>h instanceof Sp).length;if(l>1||l>0&&c>0)throw new X(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Sp extends md{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sp(e,t,r)}_apply(e){const t=this._parse(e);return yP(e._query,t),new Rn(e.firestore,e.converter,l_(e._query,t))}_parse(e){const t=Yo(e.firestore);return function(o,l,c,h,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new X(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){jT(v,y);const A=[];for(const D of v)A.push(BT(h,o,D));E={arrayValue:{values:A}}}else E=BT(h,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||jT(v,y),E=hP(c,l,v,y==="in"||y==="not-in");return Fe.create(p,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nF(n,e,t){const r=e,i=Tp("where",n);return Sp._create(i,r,t)}class uv extends lv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)yP(l,h),l=l_(l,h)}(e._query,t),new Rn(e.firestore,e.converter,l_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cv extends md{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cv(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new X(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fc(o,l)}(e._query,this._field,this._direction);return new Rn(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new xi(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function rF(n,e="asc"){const t=e,r=Tp("orderBy",n);return cv._create(r,t)}class Rp extends md{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){return new Rn(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function iF(n){return ZA("limit",n),Rp._create("limit",n,"F")}function sF(n){return ZA("limitToLast",n),Rp._create("limitToLast",n,"L")}class Ap extends md{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ap(e,t,r)}_apply(e){const t=_P(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(i,o){return new xi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}}function oF(...n){return Ap._create("startAt",n,!0)}function aF(...n){return Ap._create("startAfter",n,!1)}class Pp extends md{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){const t=_P(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(i,o){return new xi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}}function lF(...n){return Pp._create("endBefore",n,!1)}function uF(...n){return Pp._create("endAt",n,!0)}function _P(n,e,t,r){if(t[0]=me(t[0]),t[0]instanceof Wc)return function(o,l,c,h,p){if(!h)throw new X(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const v of hl(o))if(v.field.isKeyField())y.push(Lo(l,h.key));else{const E=h.data.field(v.field);if(lp(E))throw new X(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=v.field.canonicalString();throw new X(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new bs(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Yo(n.firestore);return function(l,c,h,p,y,v){const E=l.explicitOrderBy;if(y.length>E.length)throw new X(G.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let D=0;D<y.length;D++){const V=y[D];if(E[D].field.isKeyField()){if(typeof V!="string")throw new X(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof V}`);if(!yy(l)&&V.indexOf("/")!==-1)throw new X(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${V}' contains a slash.`);const k=l.path.child(Ue.fromString(V));if(!le.isDocumentKey(k))throw new X(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const Y=new le(k);A.push(Lo(c,Y))}else{const k=hP(h,p,V);A.push(k)}}return new bs(A,v)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BT(n,e,t){if(typeof(t=me(t))=="string"){if(t==="")throw new X(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yy(e)&&t.indexOf("/")!==-1)throw new X(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ue.fromString(t));if(!le.isDocumentKey(r))throw new X(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lo(n,new le(r))}if(t instanceof _t)return Lo(n,t._key);throw new X(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vp(t)}.`)}function jT(n,e){if(!Array.isArray(n)||n.length===0)throw new X(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yP(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new X(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dv{convertValue(e,t="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>dt(l.doubleValue));return new Zy(o)}convertGeoPoint(e){return new wp(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ue.fromString(e);ve(cA(r));const i=new ks(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(t)||Pt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class cF extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Pi=class extends Wc{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},wc=class extends Pi{data(e={}){return super.data(e)}},Ds=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new So(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wc(this._firestore,this._userDataWriter,r.key,r,new So(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new wc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new So(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new wc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new So(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:dF(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function vP(n,e){return n instanceof Pi&&e instanceof Pi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ds&&e instanceof Ds&&n._firestore===e._firestore&&oP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(n){n=He(n,_t);const e=He(n.firestore,Ct);return QA(fn(e),n._key).then(t=>hv(e,n,t))}class Zo extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function fF(n){n=He(n,_t);const e=He(n.firestore,Ct),t=fn(e),r=new Zo(e);return OU(t,n._key).then(i=>new Pi(e,r,n._key,i,new So(i!==null&&i.hasLocalMutations,!0),n.converter))}function pF(n){n=He(n,_t);const e=He(n.firestore,Ct);return QA(fn(e),n._key,{source:"server"}).then(t=>hv(e,n,t))}function mF(n){n=He(n,Rn);const e=He(n.firestore,Ct),t=fn(e),r=new Zo(e);return gP(n._query),JA(t,n._query).then(i=>new Ds(e,r,n,i))}function gF(n){n=He(n,Rn);const e=He(n.firestore,Ct),t=fn(e),r=new Zo(e);return VU(t,n._query).then(i=>new Ds(e,r,n,i))}function _F(n){n=He(n,Rn);const e=He(n.firestore,Ct),t=fn(e),r=new Zo(e);return JA(t,n._query,{source:"server"}).then(i=>new Ds(e,r,n,i))}function E_(n,e,t){n=He(n,_t);const r=He(n.firestore,Ct),i=kp(n.converter,e,t);return gd(r,[Ep(Yo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ft.none())])}function $T(n,e,t,...r){n=He(n,_t);const i=He(n.firestore,Ct),o=Yo(i);let l;return l=typeof(e=me(e))=="string"||e instanceof xs?sv(o,"updateDoc",n._key,e,t,r):iv(o,"updateDoc",n._key,e),gd(i,[l.toMutation(n._key,ft.exists(!0))])}function yF(n){return gd(He(n.firestore,Ct),[new Gl(n._key,ft.none())])}function vF(n,e){const t=He(n.firestore,Ct),r=qc(n),i=kp(n.converter,e);return gd(t,[Ep(Yo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function wP(n,...e){var t,r,i;n=me(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||w_(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(w_(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let h,p,y;if(n instanceof _t)p=He(n.firestore,Ct),y=ql(n._key.path),h={next:v=>{e[l]&&e[l](hv(p,n,v))},error:e[l+1],complete:e[l+2]};else{const v=He(n,Rn);p=He(v.firestore,Ct),y=v._query;const E=new Zo(p);h={next:A=>{e[l]&&e[l](new Ds(p,E,v,A))},error:e[l+1],complete:e[l+2]},gP(n._query)}return function(E,A,D,V){const k=new _p(V),Y=new zy(A,k,D);return E.asyncQueue.enqueueAndForget(async()=>By(await Ol(E),Y)),()=>{k.Za(),E.asyncQueue.enqueueAndForget(async()=>jy(await Ol(E),Y))}}(fn(p),y,c,h)}function wF(n,e){return LU(fn(n=He(n,Ct)),w_(e)?e:{next:e})}function gd(n,e){return function(r,i){const o=new sn;return r.asyncQueue.enqueueAndForget(async()=>cU(await Yy(r),i,o)),o.promise}(fn(n),e)}function hv(n,e,t){const r=t.docs.get(e._key),i=new Zo(n);return new Pi(n,i,e._key,r,new So(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EF=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yo(e)}set(e,t,r){this._verifyNotCommitted();const i=fs(e,this._firestore),o=kp(i.converter,t,r),l=Ep(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ft.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=fs(e,this._firestore);let l;return l=typeof(t=me(t))=="string"||t instanceof xs?sv(this._dataReader,"WriteBatch.update",o._key,t,r,i):iv(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fs(e,this._firestore);return this._mutations=this._mutations.concat(new Gl(t._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function fs(n,e){if((n=me(n)).firestore!==e)throw new X(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TF=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Yo(t)}get(t){const r=fs(t,this._firestore),i=new cF(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return pe();const l=o[0];if(l.isFoundDocument())return new Wc(this._firestore,i,l.key,l,r.converter);if(l.isNoDocument())return new Wc(this._firestore,i,r._key,null,r.converter);throw pe()})}set(t,r,i){const o=fs(t,this._firestore),l=kp(o.converter,r,i),c=Ep(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,i);return this._transaction.set(o._key,c),this}update(t,r,i,...o){const l=fs(t,this._firestore);let c;return c=typeof(r=me(r))=="string"||r instanceof xs?sv(this._dataReader,"Transaction.update",l._key,r,i,o):iv(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,c),this}delete(t){const r=fs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fs(e,this._firestore),r=new Zo(this._firestore);return super.get(e).then(i=>new Pi(this._firestore,r,t._key,i._document,new So(!1,!1),t.converter))}};function SF(n,e,t){n=He(n,Ct);const r=Object.assign(Object.assign({},IF),t);return function(o){if(o.maxAttempts<1)throw new X(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,l,c){const h=new sn;return o.asyncQueue.enqueueAndForget(async()=>{const p=await NU(o);new CU(o.asyncQueue,p,c,l,h).au()}),h.promise}(fn(n),i=>e(new TF(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(){return new pd("deleteField")}function AF(){return new ev("serverTimestamp")}function PF(...n){return new tv("arrayUnion",n)}function kF(...n){return new nv("arrayRemove",n)}function CF(n){return new rv("increment",n)}(function(e,t=!0){(function(i){zl=i})(Bn),Ar(new Fn("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Ct(new OV(r.getProvider("auth-internal")),new UV(r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new X(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(p.options.projectId,y)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),En(xE,"4.7.3",e),En(xE,"4.7.3","esm2017")})();const bF="@firebase/firestore-compat",NF="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new X("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function qT(){if(!cL())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}let IP=class T_{constructor(e){this._delegate=e}static fromBase64String(e){return qT(),new T_(Yr.fromBase64String(e))}static fromUint8Array(e){return zT(),new T_(Yr.fromUint8Array(e))}toBase64(){return qT(),this._delegate.toBase64()}toUint8Array(){return zT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){return xF(n,["next","error","complete"])}function xF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{enableIndexedDbPersistence(e,t){return zU(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return qU(e._delegate)}clearIndexedDbPersistence(e){return WU(e._delegate)}}class EP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){eP(this._delegate,e,t,r)}enableNetwork(){return HU(this._delegate)}disableNetwork(){return KU(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GU(this._delegate)}onSnapshotsInSync(e){return wF(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vl(this,iP(this._delegate,e))}catch(t){throw wn(t,"collection()","Firestore.collection()")}}doc(e){try{return new ar(this,qc(this._delegate,e))}catch(t){throw wn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vn(this,FU(this._delegate,e))}catch(t){throw wn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return SF(this._delegate,t=>e(new TP(this,t)))}batch(){return fn(this._delegate),new SP(new EF(this._delegate,e=>gd(this._delegate,e)))}loadBundle(e){return QU(this._delegate,e)}namedQuery(e){return JU(this._delegate,e).then(t=>t?new vn(this,t):null)}}class Cp extends dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new IP(new Yr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ar.forKey(t,this.firestore,null)}}function OF(n){bV(n)}class TP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}get(e){const t=Ro(e);return this._delegate.get(t).then(r=>new Gc(this._firestore,new Pi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ro(e);return r?(fv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ro(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ro(e);return this._delegate.delete(t),this}}class SP{constructor(e){this._delegate=e}set(e,t,r){const i=Ro(e);return r?(fv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ro(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ro(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new zo(e,new Cp(e),t),i.set(t,o)),o}}zo.INSTANCES=new WeakMap;class ar{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ar(t,new _t(t._delegate,r,new le(e)))}static forKey(e,t,r){return new ar(t,new _t(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vl(this.firestore,iP(this._delegate,e))}catch(t){throw wn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=me(e),e instanceof _t?sP(this._delegate,e):!1}set(e,t){t=fv("DocumentReference.set",t);try{return t?E_(this._delegate,e,t):E_(this._delegate,e)}catch(r){throw wn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$T(this._delegate,e):$T(this._delegate,e,t,...r)}catch(i){throw wn(i,"updateDoc()","DocumentReference.update()")}}delete(){return yF(this._delegate)}onSnapshot(...e){const t=RP(e),r=AP(e,i=>new Gc(this.firestore,new Pi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wP(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=fF(this._delegate):e?.source==="server"?t=pF(this._delegate):t=hF(this._delegate),t.then(r=>new Gc(this.firestore,new Pi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ar(this.firestore,e?this._delegate.withConverter(zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wn(n,e,t){return n.message=n.message.replace(e,t),n}function RP(n){for(const e of n)if(typeof e=="object"&&!S_(e))return e;return{}}function AP(n,e){var t,r;let i;return S_(n[0])?i=n[0]:S_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Gc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ar(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vP(this._delegate,e._delegate)}}class Hc extends Gc{data(e){const t=this._delegate.data(e);return this._delegate._converter||NV(t!==void 0),t}}class vn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}where(e,t,r){try{return new vn(this.firestore,cs(this._delegate,nF(e,t,r)))}catch(i){throw wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vn(this.firestore,cs(this._delegate,rF(e,t)))}catch(r){throw wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vn(this.firestore,cs(this._delegate,iF(e)))}catch(t){throw wn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vn(this.firestore,cs(this._delegate,sF(e)))}catch(t){throw wn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vn(this.firestore,cs(this._delegate,oF(...e)))}catch(t){throw wn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vn(this.firestore,cs(this._delegate,aF(...e)))}catch(t){throw wn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vn(this.firestore,cs(this._delegate,lF(...e)))}catch(t){throw wn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vn(this.firestore,cs(this._delegate,uF(...e)))}catch(t){throw wn(t,"endAt()","Query.endAt()")}}isEqual(e){return oP(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=gF(this._delegate):e?.source==="server"?t=_F(this._delegate):t=mF(this._delegate),t.then(r=>new R_(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RP(e),r=AP(e,i=>new R_(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wP(this._delegate,t,r)}withConverter(e){return new vn(this.firestore,e?this._delegate.withConverter(zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class VF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class R_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Hc(this._firestore,r))})}isEqual(e){return vP(this._delegate,e._delegate)}}class Vl extends vn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ar(this.firestore,e):null}doc(e){try{return e===void 0?new ar(this.firestore,qc(this._delegate)):new ar(this.firestore,qc(this._delegate,e))}catch(t){throw wn(t,"doc()","CollectionReference.doc()")}}add(e){return vF(this._delegate,e).then(t=>new ar(this.firestore,t))}isEqual(e){return sP(this._delegate,e._delegate)}withConverter(e){return new Vl(this.firestore,e?this._delegate.withConverter(zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ro(n){return He(n,_t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(...e){this._delegate=new xs(...e)}static documentId(){return new pv(ht.keyField().canonicalString())}isEqual(e){return e=me(e),e instanceof xs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._delegate=e}static serverTimestamp(){const e=AF();return e._methodName="FieldValue.serverTimestamp",new Eo(e)}static delete(){const e=RF();return e._methodName="FieldValue.delete",new Eo(e)}static arrayUnion(...e){const t=PF(...e);return t._methodName="FieldValue.arrayUnion",new Eo(t)}static arrayRemove(...e){const t=kF(...e);return t._methodName="FieldValue.arrayRemove",new Eo(t)}static increment(e){const t=CF(e);return t._methodName="FieldValue.increment",new Eo(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={Firestore:EP,GeoPoint:wp,Timestamp:pt,Blob:IP,Transaction:TP,WriteBatch:SP,DocumentReference:ar,DocumentSnapshot:Gc,Query:vn,QueryDocumentSnapshot:Hc,QuerySnapshot:R_,CollectionReference:Vl,FieldPath:pv,FieldValue:Eo,setLogLevel:OF,CACHE_SIZE_UNLIMITED:jU};function MF(n,e){n.INTERNAL.registerComponent(new Fn("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(n){MF(n,(e,t)=>new EP(e,t,new DF)),n.registerVersion(bF,NF)}UF(Ne);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="firebasestorage.googleapis.com",kP="storageBucket",FF=120*1e3,BF=600*1e3,jF=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends Bt{constructor(e,t,r=0){super(bg(e),`Firebase Storage: ${t} (${bg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function bg(n){return"storage/"+n}function mv(){const n="An unknown error occurred, please check the error payload for server response.";return new yt(lt.UNKNOWN,n)}function $F(n){return new yt(lt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function zF(n){return new yt(lt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(lt.UNAUTHENTICATED,n)}function WF(){return new yt(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GF(n){return new yt(lt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function CP(){return new yt(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bP(){return new yt(lt.CANCELED,"User canceled the upload/download.")}function HF(n){return new yt(lt.INVALID_URL,"Invalid URL '"+n+"'.")}function KF(n){return new yt(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function QF(){return new yt(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kP+"' property when initializing the app?")}function NP(){return new yt(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JF(){return new yt(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function YF(){return new yt(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XF(n){return new yt(lt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pl(n){return new yt(lt.INVALID_ARGUMENT,n)}function xP(){return new yt(lt.APP_DELETED,"The Firebase app was deleted.")}function DP(n){return new yt(lt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ic(n,e){return new yt(lt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function tc(n){throw new yt(lt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=hn.makeFromUrl(e,t)}catch{return new hn(e,"")}if(r.path==="")return r;throw KF(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function p(ne){ne.path_=decodeURIComponent(ne.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${v}/${y}/b/${i}/o${E}`,"i"),D={bucket:1,path:3},V=t===PP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",Y=new RegExp(`^https?://${V}/${i}/${k}`,"i"),K=[{regex:c,indices:h,postModify:o},{regex:A,indices:D,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let ne=0;ne<K.length;ne++){const he=K[ne],ue=he.regex.exec(e);if(ue){const b=ue[he.indices.bucket];let R=ue[he.indices.path];R||(R=""),r=new hn(b,R),he.postModify(r);break}}if(r==null)throw HF(e);return r}}class ZF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function y(...k){p||(p=!0,e.apply(null,k))}function v(k){i=setTimeout(()=>{i=null,n(A,h())},k)}function E(){o&&clearTimeout(o)}function A(k,...Y){if(p){E();return}if(k){E(),y.call(null,k,...Y);return}if(h()||l){E(),y.call(null,k,...Y);return}r<64&&(r*=2);let K;c===1?(c=2,K=0):K=(r+Math.random())*1e3,v(K)}let D=!1;function V(k){D||(D=!0,E(),!p&&(i!==null?(k||(c=2),clearTimeout(i),v(0)):k||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,V(!0)},t),V}function t2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){return n!==void 0}function r2(n){return typeof n=="function"}function i2(n){return typeof n=="object"&&!Array.isArray(n)}function bp(n){return typeof n=="string"||n instanceof String}function WT(n){return gv()&&n instanceof Blob}function gv(){return typeof Blob<"u"}function A_(n,e,t,r){if(r<e)throw pl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw pl(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function OP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Co;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t,r,i,o,l,c,h,p,y,v,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,D)=>{this.resolve_=A,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Wh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Co.NO_ERROR,h=o.getStatus();if(!c||VP(h,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Co.ABORT;r(!1,new Wh(!1,null,y));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Wh(p,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());n2(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=mv();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?xP():bP();l(h)}else{const h=CP();l(h)}};this.canceled_?t(!1,new Wh(!1,null,!0)):this.backoffId_=e2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function o2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function a2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function u2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function c2(n,e,t,r,i,o,l=!0){const c=OP(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return l2(p,e),o2(p,t),a2(p,o),u2(p,r),new s2(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h2(...n){const e=d2();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(gv())return new Blob(n);throw new yt(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){if(typeof atob>"u")throw XF("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ng{constructor(e,t){this.data=e,this.contentType=t||null}}function LP(n,e){switch(n){case lr.RAW:return new Ng(MP(e));case lr.BASE64:case lr.BASE64URL:return new Ng(UP(n,e));case lr.DATA_URL:return new Ng(g2(e),_2(e))}throw mv()}function MP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function m2(n){let e;try{e=decodeURIComponent(n)}catch{throw Ic(lr.DATA_URL,"Malformed data URL.")}return MP(e)}function UP(n,e){switch(n){case lr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ic(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case lr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ic(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=p2(e)}catch(i){throw i.message.includes("polyfill")?i:Ic(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class FP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ic(lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=y2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function g2(n){const e=new FP(n);return e.base64?UP(lr.BASE64,e.rest):m2(e.rest)}function _2(n){return new FP(n).contentType}function y2(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){let r=0,i="";WT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(WT(this.data_)){const r=this.data_,i=f2(r,e,t);return i===null?null:new Br(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Br(r,!0)}}static getBlob(...e){if(gv()){const t=e.map(r=>r instanceof Br?r.data_:r);return new Br(h2.apply(null,t))}else{const t=e.map(l=>bp(l)?LP(lr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new Br(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n){let e;try{e=JSON.parse(n)}catch{return null}return i2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function w2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function BP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n,e){return e}class yn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||I2}}let Gh=null;function E2(n){return!bp(n)||n.length<2?n:BP(n)}function _d(){if(Gh)return Gh;const n=[];n.push(new yn("bucket")),n.push(new yn("generation")),n.push(new yn("metageneration")),n.push(new yn("name","fullPath",!0));function e(o,l){return E2(l)}const t=new yn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new yn("size");return i.xform=r,n.push(i),n.push(new yn("timeCreated")),n.push(new yn("updated")),n.push(new yn("md5Hash",null,!0)),n.push(new yn("cacheControl",null,!0)),n.push(new yn("contentDisposition",null,!0)),n.push(new yn("contentEncoding",null,!0)),n.push(new yn("contentLanguage",null,!0)),n.push(new yn("contentType",null,!0)),n.push(new yn("metadata","customMetadata",!0)),Gh=n,Gh}function T2(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new hn(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function S2(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return T2(r,n),r}function jP(n,e,t){const r=_v(e);return r===null?null:S2(n,r,t)}function R2(n,e,t,r){const i=_v(e);if(i===null||!bp(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const y=n.bucket,v=n.fullPath,E="/b/"+l(y)+"/o/"+l(v),A=Fs(E,t,r),D=OP({alt:"media",token:p});return A+D})[0]}function yv(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="prefixes",HT="items";function A2(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[GT])for(const i of t[GT]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new hn(e,o));r.prefixes.push(l)}if(t[HT])for(const i of t[HT]){const o=n._makeStorageReference(new hn(e,i.name));r.items.push(o)}return r}function P2(n,e,t){const r=_v(t);return r===null?null:A2(n,e,r)}class Vi{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n){if(!n)throw mv()}function Np(n,e){function t(r,i){const o=jP(n,i,e);return Gr(o!==null),o}return t}function k2(n,e){function t(r,i){const o=P2(n,e,i);return Gr(o!==null),o}return t}function C2(n,e){function t(r,i){const o=jP(n,i,e);return Gr(o!==null),R2(o,i,n.host,n._protocol)}return t}function Yl(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=WF():i=qF():t.getStatus()===402?i=zF(n.bucket):t.getStatus()===403?i=GF(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function xp(n){const e=Yl(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=$F(n.path)),o.serverResponse=i.serverResponse,o}return t}function $P(n,e,t){const r=e.fullServerUrl(),i=Fs(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Vi(i,o,Np(n,t),l);return c.errorHandler=xp(e),c}function b2(n,e,t,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const l=e.bucketOnlyServerUrl(),c=Fs(l,n.host,n._protocol),h="GET",p=n.maxOperationRetryTime,y=new Vi(c,h,k2(n,e.bucket),p);return y.urlParams=o,y.errorHandler=Yl(e),y}function N2(n,e,t){const r=e.fullServerUrl(),i=Fs(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Vi(i,o,C2(n,t),l);return c.errorHandler=xp(e),c}function x2(n,e,t,r){const i=e.fullServerUrl(),o=Fs(i,n.host,n._protocol),l="PATCH",c=yv(t,r),h={"Content-Type":"application/json; charset=utf-8"},p=n.maxOperationRetryTime,y=new Vi(o,l,Np(n,r),p);return y.headers=h,y.body=c,y.errorHandler=xp(e),y}function D2(n,e){const t=e.fullServerUrl(),r=Fs(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function l(h,p){}const c=new Vi(r,i,l,o);return c.successCodes=[200,204],c.errorHandler=xp(e),c}function O2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function zP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=O2(null,e)),r}function qP(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let K="";for(let ne=0;ne<2;ne++)K=K+Math.random().toString().slice(2);return K}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=zP(e,r,i),y=yv(p,t),v="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+h+"--",A=Br.getBlob(v,r,E);if(A===null)throw NP();const D={name:p.fullPath},V=Fs(o,n.host,n._protocol),k="POST",Y=n.maxUploadRetryTime,q=new Vi(V,k,Np(n,t),Y);return q.urlParams=D,q.headers=l,q.body=A.uploadData(),q.errorHandler=Yl(e),q}class Vf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function vv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Gr(!1)}return Gr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function V2(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=zP(e,r,i),c={name:l.fullPath},h=Fs(o,n.host,n._protocol),p="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},v=yv(l,t),E=n.maxUploadRetryTime;function A(V){vv(V);let k;try{k=V.getResponseHeader("X-Goog-Upload-URL")}catch{Gr(!1)}return Gr(bp(k)),k}const D=new Vi(h,p,A,E);return D.urlParams=c,D.headers=y,D.body=v,D.errorHandler=Yl(e),D}function L2(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function o(p){const y=vv(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Gr(!1)}v||Gr(!1);const E=Number(v);return Gr(!isNaN(E)),new Vf(E,r.size(),y==="final")}const l="POST",c=n.maxUploadRetryTime,h=new Vi(t,l,o,c);return h.headers=i,h.errorHandler=Yl(e),h}const KT=256*1024;function M2(n,e,t,r,i,o,l,c){const h=new Vf(0,0);if(l?(h.current=l.current,h.total=l.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw JF();const p=h.total-h.current;let y=p;i>0&&(y=Math.min(y,i));const v=h.current,E=v+y;let A="";y===0?A="finalize":p===y?A="upload, finalize":A="upload";const D={"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":`${h.current}`},V=r.slice(v,E);if(V===null)throw NP();function k(ne,he){const ue=vv(ne,["active","final"]),b=h.current+y,R=r.size();let C;return ue==="final"?C=Np(e,o)(ne,he):C=null,new Vf(b,R,ue==="final",C)}const Y="POST",q=e.maxUploadRetryTime,K=new Vi(t,Y,k,q);return K.headers=D,K.body=V.uploadData(),K.progressCallback=c||null,K.errorHandler=Yl(n),K}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={STATE_CHANGED:"state_changed"},In={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xg(n){switch(n){case"running":case"pausing":case"canceling":return In.RUNNING;case"paused":return In.PAUSED;case"success":return In.SUCCESS;case"canceled":return In.CANCELED;case"error":return In.ERROR;default:return In.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t,r){if(r2(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class B2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j2 extends B2{initXhr(){this.xhr_.responseType="text"}}function Rr(){return new j2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_d(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(VP(i.status,[]))if(o)i=CP();else{this.sleepTime=Math.max(this.sleepTime*2,jF),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=V2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=L2(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Rr,t,r);this._request=o,o.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=KT*this._chunkMultiplier,t=new Vf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=M2(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const c=this._ref.storage._makeRequest(l,Rr,i,o,!1);this._request=c,c.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){KT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$P(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=qP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=xg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new F2(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(xg(this._state)){case In.SUCCESS:Xa(this._resolve.bind(null,this.snapshot))();break;case In.CANCELED:case In.ERROR:const t=this._reject;Xa(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(xg(this._state)){case In.RUNNING:case In.PAUSED:e.next&&Xa(e.next.bind(e,this.snapshot))();break;case In.SUCCESS:e.complete&&Xa(e.complete.bind(e))();break;case In.CANCELED:case In.ERROR:e.error&&Xa(e.error.bind(e,this._error))();break;default:e.error&&Xa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this._service=e,t instanceof hn?this._location=t:this._location=hn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qo(e,t)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BP(this._location.path)}get storage(){return this._service}get parent(){const e=v2(this._location.path);if(e===null)return null;const t=new hn(this._location.bucket,e);return new qo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DP(e)}}function $2(n,e,t){n._throwIfRoot("uploadBytes");const r=qP(n.storage,n._location,_d(),new Br(e,!0),t);return n.storage.makeRequestWithTokens(r,Rr).then(i=>({metadata:i,ref:n}))}function z2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WP(n,new Br(e),t)}function q2(n){const e={prefixes:[],items:[]};return GP(n,e).then(()=>e)}async function GP(n,e,t){const i=await HP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await GP(n,e,i.nextPageToken)}function HP(n,e){e!=null&&typeof e.maxResults=="number"&&A_("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=b2(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Rr)}function W2(n){n._throwIfRoot("getMetadata");const e=$P(n.storage,n._location,_d());return n.storage.makeRequestWithTokens(e,Rr)}function G2(n,e){n._throwIfRoot("updateMetadata");const t=x2(n.storage,n._location,e,_d());return n.storage.makeRequestWithTokens(t,Rr)}function H2(n){n._throwIfRoot("getDownloadURL");const e=N2(n.storage,n._location,_d());return n.storage.makeRequestWithTokens(e,Rr).then(t=>{if(t===null)throw YF();return t})}function K2(n){n._throwIfRoot("deleteObject");const e=D2(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rr)}function KP(n,e){const t=w2(n._location.path,e),r=new hn(n._location.bucket,t);return new qo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n){return/^[A-Za-z]+:\/\//.test(n)}function J2(n,e){return new qo(n,e)}function QP(n,e){if(n instanceof wv){const t=n;if(t._bucket==null)throw QF();const r=new qo(t,t._bucket);return e!=null?QP(r,e):r}else return e!==void 0?KP(n,e):n}function Y2(n,e){if(e&&Q2(e)){if(n instanceof wv)return J2(n,e);throw pl("To use ref(service, url), the first argument must be a Storage instance.")}else return QP(n,e)}function QT(n,e){const t=e?.[kP];return t==null?null:hn.makeFromBucketSpec(t,n)}function X2(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:FS(i,n.app.options.projectId))}class wv{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=PP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FF,this._maxUploadRetryTime=BF,this._requests=new Set,i!=null?this._bucket=hn.makeFromBucketSpec(i,this._host):this._bucket=QT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=QT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){A_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){A_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qo(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new ZF(xP());{const l=c2(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const JT="@firebase/storage",YT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="storage";function eB(n,e,t){return n=me(n),$2(n,e,t)}function tB(n,e,t){return n=me(n),z2(n,e,t)}function nB(n){return n=me(n),W2(n)}function rB(n,e){return n=me(n),G2(n,e)}function iB(n,e){return n=me(n),HP(n,e)}function sB(n){return n=me(n),q2(n)}function JP(n){return n=me(n),H2(n)}function oB(n){return n=me(n),K2(n)}function P_(n,e){return n=me(n),Y2(n,e)}function aB(n,e){return KP(n,e)}function lB(n,e,t,r={}){X2(n,e,t,r)}function uB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wv(t,r,i,e,Bn)}function cB(){Ar(new Fn(Z2,uB,"PUBLIC").setMultipleInstances(!0)),En(JT,YT,""),En(JT,YT,"esm2017")}cB();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Hh(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Hh(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=l=>t(new Hh(l,this,this._ref)):o={next:t.next?l=>t.next(new Hh(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class ZT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ei(e,this._service))}get items(){return this._delegate.items.map(e=>new Ei(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=aB(this._delegate,e);return new Ei(t,this.storage)}get root(){return new Ei(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ei(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new XT(tB(this._delegate,e,t),this)}putString(e,t=lr.RAW,r){this._throwIfRoot("putString");const i=LP(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new XT(new WP(this._delegate,new Br(i.data,!0),o),this)}listAll(){return sB(this._delegate).then(e=>new ZT(e,this.storage))}list(e){return iB(this._delegate,e||void 0).then(t=>new ZT(t,this.storage))}getMetadata(){return nB(this._delegate)}updateMetadata(e){return rB(this._delegate,e)}getDownloadURL(){return JP(this._delegate)}delete(){return this._throwIfRoot("delete"),oB(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw DP(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eS(e))throw pl("ref() expected a child path but got a URL, use refFromURL instead.");return new Ei(P_(this._delegate,e),this)}refFromURL(e){if(!eS(e))throw pl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{hn.makeFromUrl(e,this._delegate.host)}catch{throw pl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ei(P_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){lB(this._delegate,e,t,r)}}function eS(n){return/^[A-Za-z]+:\/\//.test(n)}const dB="@firebase/storage-compat",hB="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="storage-compat";function pB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new YP(t,r)}function mB(n){const e={TaskState:In,TaskEvent:U2,StringFormat:lr,Storage:YP,Reference:Ei};n.INTERNAL.registerComponent(new Fn(fB,pB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(dB,hB)}mB(Ne);const gB={apiKey:"AIzaSyBK5lfBxpaULA44SROM0GH5Yfk5JFzQRZg",authDomain:"glucide-aide.firebaseapp.com",projectId:"glucide-aide",storageBucket:"glucide-aide.appspot.com",messagingSenderId:"1054736299280",appId:"1:1054736299280:web:915fbb15466dfc556de195",measurementId:"G-QWFL4ZE8M1"};Ne.apps.length||Ne.initializeApp(gB);Ne.firestore();const _B=()=>{const[n,e]=Q.useState(""),[t,r]=Q.useState(""),[i,o]=Q.useState(""),[l,c]=Q.useState(""),[h,p]=Q.useState(""),[y,v]=Q.useState(null),[E,A]=Q.useState(""),[D,V]=Q.useState(!1),k=async()=>{if(A(""),t!==i){A("Les mots de passe ne correspondent pas.");return}V(!0);try{const q=await Ne.auth().createUserWithEmailAndPassword(n,t);if(y){const ne=Ne.storage().ref().child(`profiles/${q.user.uid}`);await ne.put(y);const he=await ne.getDownloadURL();await q.user.updateProfile({displayName:`${l} ${h}`,photoURL:he}),await Ne.firestore().collection("users").doc(q.user.uid).set({firstName:l,lastName:h,email:n,photoURL:he}),console.log("Profil utilisateur mis à jour avec succès.")}else await q.user.updateProfile({displayName:`${l} ${h}`}),await Ne.firestore().collection("users").doc(q.user.uid).set({firstName:l,lastName:h,email:n});console.log("Inscription réussie !"),window.location.href="/"}catch(q){A(q.message),console.error(q.message)}finally{V(!1)}},Y=async()=>{V(!0);try{const q=new Ne.auth.GoogleAuthProvider,K=await Ne.auth().signInWithPopup(q),ne=K.user.email,{given_name:he,family_name:ue}=K.additionalUserInfo.profile,b=K.user.photoURL||"https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c";await Ne.firestore().collection("users").doc(K.user.uid).set({firstName:he,lastName:ue,email:ne,photoURL:b}),console.log("Inscription avec Google réussie !"),window.location.href="/glucide_aide/"}catch(q){A(q.message),console.error(q.message)}finally{V(!1)}};return U.jsxs("div",{className:"sign-in",children:[E&&U.jsx("p",{className:"error",style:{color:"red"},children:E}),U.jsx("input",{type:"text",placeholder:"Prénom",value:l,className:"prénom",onChange:q=>c(q.target.value)}),U.jsx("input",{type:"text",placeholder:"Nom",value:h,className:"nom",onChange:q=>p(q.target.value)}),U.jsx("input",{type:"email",placeholder:"Adresse email",value:n,className:"mail1",onChange:q=>e(q.target.value)}),U.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,className:"password1",onChange:q=>r(q.target.value)}),U.jsx("input",{type:"password",placeholder:"Confirmer le mot de passe",value:i,className:"passwordconfirm",onChange:q=>o(q.target.value)}),U.jsx("input",{type:"file",accept:"image/*",className:"file",onChange:q=>v(q.target.files[0])}),U.jsx("button",{className:"se-connecter",onClick:k,disabled:D,children:"S'inscrire"}),U.jsx("button",{className:"sign-google",onClick:Y,disabled:D,children:"S'inscrire avec Google"})]})},yB=()=>{const[n,e]=Q.useState(""),[t,r]=Q.useState(""),[i,o]=Q.useState(""),[l,c]=Q.useState(!1),h=async()=>{o(""),c(!0);try{await Ne.auth().signInWithEmailAndPassword(n,t),console.log("Connexion réussie !"),window.location.href="/"}catch(y){o(y.message),console.error(y.message)}finally{c(!1)}},p=async()=>{o(""),c(!0);try{const y=new Ne.auth.GoogleAuthProvider;await Ne.auth().signInWithPopup(y),console.log("Connexion réussie avec Google !"),window.location.href="/"}catch(y){o(y.message),console.error(y.message)}finally{c(!1)}};return U.jsxs("div",{className:"login",children:[i&&U.jsx("p",{style:{color:"red"},children:i}),U.jsx("input",{type:"email",placeholder:"Adresse email",value:n,className:"mail2",onChange:y=>e(y.target.value)}),U.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,className:"password2",onChange:y=>r(y.target.value)}),U.jsx("button",{className:"se-connecter1",onClick:h,disabled:l,children:"Se connecter"}),U.jsx("button",{className:"sign-google1",onClick:p,disabled:l,children:"Se connecter avec Google"})]})};var tn=[];for(var Dg=0;Dg<256;++Dg)tn.push((Dg+256).toString(16).slice(1));function vB(n,e=0){return(tn[n[e+0]]+tn[n[e+1]]+tn[n[e+2]]+tn[n[e+3]]+"-"+tn[n[e+4]]+tn[n[e+5]]+"-"+tn[n[e+6]]+tn[n[e+7]]+"-"+tn[n[e+8]]+tn[n[e+9]]+"-"+tn[n[e+10]]+tn[n[e+11]]+tn[n[e+12]]+tn[n[e+13]]+tn[n[e+14]]+tn[n[e+15]]).toLowerCase()}var Kh,wB=new Uint8Array(16);function IB(){if(!Kh&&(Kh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Kh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kh(wB)}var EB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const tS={randomUUID:EB};function TB(n,e,t){if(tS.randomUUID&&!n)return tS.randomUUID();n=n||{};var r=n.random||(n.rng||IB)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,vB(r)}function XP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SB=XP,ZP=new Xr("auth","Firebase",XP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Qc("@firebase/auth");function RB(n,...e){Lf.logLevel<=Oe.WARN&&Lf.warn(`Auth (${Bn}): ${n}`,...e)}function cf(n,...e){Lf.logLevel<=Oe.ERROR&&Lf.error(`Auth (${Bn}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,...e){throw Iv(n,...e)}function Hr(n,...e){return Iv(n,...e)}function ek(n,e,t){const r=Object.assign(Object.assign({},SB()),{[e]:t});return new Xr("auth","Firebase",r).create(e,{appName:n.name})}function bo(n){return ek(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ZP.create(n,...e)}function Ce(n,e,...t){if(!n)throw Iv(e,...t)}function yi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cf(e),new Error(e)}function Ci(n,e){n||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AB(){return nS()==="http:"||nS()==="https:"}function nS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AB()||U_()||"connection"in navigator)?navigator.onLine:!0}function kB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ci(t>e,"Short delay should be less than long delay!"),this.isMobile=BS()||Wf()}get(){return PB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){Ci(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new yd(3e4,6e4);function Tv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ea(n,e,t,r,i={}){return nk(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=kr(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return $S()||(p.referrerPolicy="no-referrer"),tk.fetch()(rk(n,n.config.apiHost,t,c),p)})}async function nk(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},CB),e);try{const i=new xB(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Qh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Qh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Qh(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ek(n,y,p);ki(n,y)}}catch(i){if(i instanceof Bt)throw i;ki(n,"network-request-failed",{message:String(i)})}}async function NB(n,e,t,r,i={}){const o=await ea(n,e,t,r,i);return"mfaPendingCredential"in o&&ki(n,"multi-factor-auth-required",{_serverResponse:o}),o}function rk(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Ev(n.config,i):`${n.config.apiScheme}://${i}`}class xB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),bB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Hr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(n,e){return ea(n,"POST","/v1/accounts:delete",e)}async function ik(n,e){return ea(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OB(n,e=!1){const t=me(n),r=await t.getIdToken(e),i=Sv(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Ec(Og(i.auth_time)),issuedAtTime:Ec(Og(i.iat)),expirationTime:Ec(Og(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Og(n){return Number(n)*1e3}function Sv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const i=V_(t);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rS(n){const e=Sv(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Bt&&VB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function VB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ll(n,ik(t,{idToken:r}));Ce(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?sk(o.providerUserInfo):[],c=UB(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!c?.length,y=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new C_(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function MB(n){const e=me(n);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sk(n){return n.map(e=>{var{providerId:t}=e,r=Fl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(n,e){const t=await nk(n,{},async()=>{const r=kr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=rk(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",tk.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BB(n,e){return ea(n,"POST","/v2/accounts:revokeToken",Tv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=rS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await FB(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new ml;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Fl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new C_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OB(this,e)}reload(){return MB(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(bo(this.auth));const e=await this.getIdToken();return await Ll(this,DB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,h,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=t.photoURL)!==null&&l!==void 0?l:void 0,V=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Y=(p=t.createdAt)!==null&&p!==void 0?p:void 0,q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:ne,isAnonymous:he,providerData:ue,stsTokenManager:b}=t;Ce(K&&b,e,"internal-error");const R=ml.fromJSON(this.name,b);Ce(typeof K=="string",e,"internal-error"),ds(v,e.name),ds(E,e.name),Ce(typeof ne=="boolean",e,"internal-error"),Ce(typeof he=="boolean",e,"internal-error"),ds(A,e.name),ds(D,e.name),ds(V,e.name),ds(k,e.name),ds(Y,e.name),ds(q,e.name);const C=new vi({uid:K,auth:e,email:E,emailVerified:ne,displayName:v,isAnonymous:he,photoURL:D,phoneNumber:A,tenantId:V,stsTokenManager:R,createdAt:Y,lastLoginAt:q});return ue&&Array.isArray(ue)&&(C.providerData=ue.map(N=>Object.assign({},N))),k&&(C._redirectEventId=k),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new ml;i.updateFromServerResponse(t);const o=new vi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?sk(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new ml;c.updateFromIdToken(r);const h=new vi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new C_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new Map;function wi(n){Ci(n instanceof Function,"Expected a class definition");let e=iS.get(n);return e?(Ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ok.type="NONE";const sS=ok;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n,e,t){return`firebase:${n}:${e}:${t}`}class gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=df(this.userKey,i.apiKey,o),this.fullPersistenceKey=df("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new gl(wi(sS),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||wi(sS);const l=df(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const y=await p._get(l);if(y){const v=vi._fromJSON(e,y);p!==o&&(c=v),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new gl(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new gl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ck(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ak(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hk(e))return"Blackberry";if(fk(e))return"Webos";if(lk(e))return"Safari";if((e.includes("chrome/")||uk(e))&&!e.includes("edge/"))return"Chrome";if(dk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ak(n=Be()){return/firefox\//i.test(n)}function lk(n=Be()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uk(n=Be()){return/crios\//i.test(n)}function ck(n=Be()){return/iemobile/i.test(n)}function dk(n=Be()){return/android/i.test(n)}function hk(n=Be()){return/blackberry/i.test(n)}function fk(n=Be()){return/webos/i.test(n)}function Rv(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jB(n=Be()){var e;return Rv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $B(){return F_()&&document.documentMode===10}function pk(n=Be()){return Rv(n)||dk(n)||fk(n)||hk(n)||/windows phone/i.test(n)||ck(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(n,e=[]){let t;switch(n){case"Browser":t=oS(Be());break;case"Worker":t=`${oS(Be())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(n,e={}){return ea(n,"GET","/v2/passwordPolicy",Tv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=6;class GB{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:WB,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aS(this),this.idTokenSubscription=new aS(this),this.beforeStateQueue=new zB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ik(this,{idToken:e}),r=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Je(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(bo(this));const t=e?me(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qB(this),t=new GB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await BB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wi(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[wi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&RB(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Av(n){return me(n)}class aS{constructor(e){this.auth=e,this.observer=null,this.addObserver=B_(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KB(n){Pv=n}function QB(n){return Pv.loadJS(n)}function JB(){return Pv.gapiScript}function YB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(n,e){const t=Jc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(yl(o,e??{}))return i;ki(i,"already-initialized")}return t.initialize({options:e})}function ZB(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ej(n,e,t){const r=Av(n);Ce(r._canInitEmulator,r,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=gk(e),{host:l,port:c}=tj(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),nj()}function gk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tj(n){const e=gk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:lS(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:lS(l)}}}function lS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,t){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n,e){return NB(n,"POST","/v1/accounts:signInWithIdp",Tv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="http://localhost";class Wo extends _k{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Fl(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Wo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return _l(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_l(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_l(e,t)}buildRequest(){const e={requestUri:rj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends yk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends vd{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends vd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends vd{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends vd{constructor(){super("twitter.com")}static credential(e,t){return Wo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return _s.credential(t,r)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await vi._fromIdTokenResponse(e,r,i),l=uS(r);return new Ml({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=uS(r);return new Ml({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function uS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Bt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Uf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Uf(e,t,r,i)}}function vk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Uf._fromErrorAndOperation(n,o,e,r):o})}async function ij(n,e,t=!1){const r=await Ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ml._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n,e,t=!1){const{auth:r}=n;if(Je(r.app))return Promise.reject(bo(r));const i="reauthenticate";try{const o=await Ll(n,vk(r,i,e,n),t);Ce(o.idToken,r,"internal-error");const l=Sv(o.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Ml._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ki(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(n,e,t=!1){if(Je(n.app))return Promise.reject(bo(n));const r="signIn",i=await vk(n,r,e),o=await Ml._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(n,e){return ea(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=me(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ll(r,aj(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function uj(n,e,t,r){return me(n).onIdTokenChanged(e,t,r)}function cj(n,e,t){return me(n).beforeAuthStateChanged(e,t)}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=1e3,hj=10;class Ik extends wk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);$B()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hj):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ik.type="LOCAL";const fj=Ik;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends wk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ek.type="SESSION";const Tk=Ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await pj(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=kv("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(y),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function gj(n){Kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function _j(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yj(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vj(){return Sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="firebaseLocalStorageDb",wj=1,Bf="firebaseLocalStorage",Ak="fbase_key";class wd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Op(n,e){return n.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function Ij(){const n=indexedDB.deleteDatabase(Rk);return new wd(n).toPromise()}function b_(){const n=indexedDB.open(Rk,wj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Bf,{keyPath:Ak})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Bf)?e(r):(r.close(),await Ij(),e(await b_()))})})}async function cS(n,e,t){const r=Op(n,!0).put({[Ak]:e,value:t});return new wd(r).toPromise()}async function Ej(n,e){const t=Op(n,!1).get(e),r=await new wd(t).toPromise();return r===void 0?null:r.value}function dS(n,e){const t=Op(n,!0).delete(e);return new wd(t).toPromise()}const Tj=800,Sj=3;class Pk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Sj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(vj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _j(),!this.activeServiceWorker)return;this.sender=new mj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b_();return await cS(e,Ff,"1"),await dS(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Ej(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Op(i,!1).getAll();return new wd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pk.type="LOCAL";const Rj=Pk;new yd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(n,e){return e?wi(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends _k{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _l(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _l(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _l(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pj(n){return oj(n.auth,new Cv(n),n.bypassAuthState)}function kj(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),sj(t,new Cv(n),n.bypassAuthState)}async function Cj(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),ij(t,new Cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pj;case"linkViaPopup":case"linkViaRedirect":return Cj;case"reauthViaPopup":case"reauthViaRedirect":return kj;default:ki(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new yd(2e3,1e4);class ul extends kk{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bj.get())};e()}}ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="pendingRedirect",hf=new Map;class xj extends kk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const r=await Dj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dj(n,e){const t=Lj(e),r=Vj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Oj(n,e){hf.set(n._key(),e)}function Vj(n){return wi(n._redirectPersistence)}function Lj(n){return df(Nj,n.config.apiKey,n.name)}async function Mj(n,e,t=!1){if(Je(n.app))return Promise.reject(bo(n));const r=Av(n),i=Aj(r,e),l=await new xj(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=600*1e3;class Fj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ck(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Hr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(hS(e))}saveEventToCache(e){this.cachedEventUids.add(hS(e)),this.lastProcessedEventTime=Date.now()}}function hS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ck({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Bj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ck(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jj(n,e={}){return ea(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zj=/^https?/;async function qj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jj(n);for(const t of e)try{if(Wj(t))return}catch{}ki(n,"unauthorized-domain")}function Wj(n){const e=k_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!zj.test(t))return!1;if($j.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new yd(3e4,6e4);function fS(){const n=Kr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Hj(n){return new Promise((e,t)=>{var r,i,o;function l(){fS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fS(),t(Hr(n,"network-request-failed"))},timeout:Gj.get()})}if(!((i=(r=Kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Kr().gapi)===null||o===void 0)&&o.load)l();else{const c=YB("iframefcb");return Kr()[c]=()=>{gapi.load?l():t(Hr(n,"network-request-failed"))},QB(`${JB()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw ff=null,e})}let ff=null;function Kj(n){return ff=ff||Hj(n),ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new yd(5e3,15e3),Jj="__/auth/iframe",Yj="emulator/auth/iframe",Xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e$(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ev(e,Yj):`https://${n.config.authDomain}/${Jj}`,r={apiKey:e.apiKey,appName:n.name,v:Bn},i=Zj.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${kr(r).slice(1)}`}async function t$(n){const e=await Kj(n),t=Kr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:e$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Hr(n,"network-request-failed"),c=Kr().setTimeout(()=>{o(l)},Qj.get());function h(){Kr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r$=500,i$=600,s$="_blank",o$="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a$(n,e,t,r=r$,i=i$){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},n$),{width:r.toString(),height:i.toString(),top:o,left:l}),p=Be().toLowerCase();t&&(c=uk(p)?s$:t),ak(p)&&(e=e||o$,h.scrollbars="yes");const y=Object.entries(h).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(jB(p)&&c!=="_self")return l$(e||"",c),new pS(null);const v=window.open(e||"",c,y);Ce(v,n,"popup-blocked");try{v.focus()}catch{}return new pS(v)}function l$(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$="__/auth/handler",c$="emulator/auth/handler",d$=encodeURIComponent("fac");async function mS(n,e,t,r,i,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bn,eventId:i};if(e instanceof yk){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",qS(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof vd){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),p=h?`#${d$}=${encodeURIComponent(h)}`:"";return`${h$(n)}?${kr(c).slice(1)}${p}`}function h$({config:n}){return n.emulator?Ev(n,c$):`https://${n.authDomain}/${u$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="webStorageSupport";class f${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tk,this._completeRedirectFn=Mj,this._overrideRedirectResult=Oj}async _openPopup(e,t,r,i){var o;Ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await mS(e,t,r,k_(),i);return a$(e,l,kv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await mS(e,t,r,k_(),i);return gj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ci(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await t$(e),r=new Fj(e);return t.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vg,{type:Vg},i=>{var o;const l=(o=i?.[0])===null||o===void 0?void 0:o[Vg];l!==void 0&&t(!!l),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pk()||lk()||Rv()}}const p$=f$;var gS="@firebase/auth",_S="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _$(n){Ar(new Fn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mk(n)},p=new HB(r,i,o,h);return ZB(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ar(new Fn("auth-internal",e=>{const t=Av(e.getProvider("auth").getImmediate());return(r=>new m$(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(gS,_S,g$(n)),En(gS,_S,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=300,v$=L_("authIdTokenMaxAge")||y$;let yS=null;const w$=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>v$)return;const i=t?.token;yS!==i&&(yS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I$(n=q_()){const e=Jc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XB(n,{popupRedirectResolver:p$,persistence:[Rj,fj,Tk]}),r=L_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=w$(o.toString());cj(t,l,()=>l(t.currentUser)),uj(t,c=>l(c))}}const i=MS("auth");return i&&ej(t,`http://${i}`),t}function E$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KB({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Hr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",E$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_$("Browser");const T$=()=>{const[n,e]=Q.useState(null),[t,r]=Q.useState(""),[i,o]=Q.useState(""),[l,c]=Q.useState(""),[h,p]=Q.useState(""),[y,v]=Q.useState(""),[E,A]=Q.useState(null),[D,V]=Q.useState(!1),[k,Y]=Q.useState(null),[q,K]=Q.useState(null),ne=O_();Q.useEffect(()=>{const S=Ne.auth().onAuthStateChanged(Re=>{Re?(e(Re),V(Re.providerData.some(Te=>Te.providerId==="google.com"))):(e(""),ne("/nationglorycomu/Auth"))});return()=>S()},[ne]);const he=async()=>{try{const S=new Ne.auth.GoogleAuthProvider;await Ne.auth().currentUser.linkWithPopup(S),console.log("Compte Google lié avec succès !"),V(!0),location.reload()}catch(S){A(S.message),console.error(S.message)}},ue=async()=>{try{await Ne.auth().currentUser.updateEmail(t),console.log("Adresse email mise à jour avec succès !"),location.reload()}catch(S){A(S.message),console.error(S.message)}},b=async()=>{try{if(i!==l){A("Les mots de passe doivent correspondre.");return}await Ne.auth().currentUser.updatePassword(i),console.log("Mot de passe mis à jour avec succès !"),location.reload()}catch(S){A(S.message),console.error(S.message)}},R=async()=>{try{await Ne.auth().currentUser.updateProfile({displayName:`${h} ${y}`}),console.log("Nom mis à jour avec succès !"),location.reload()}catch(S){A(S.message),console.error(S.message)}},C=S=>{K(S.target.files[0])},N=async()=>{try{if(q){const S=P_(Ne.storage(),`profiles/${TB()}`),Re=await eB(S,q);console.log(Re);const Te=await JP(Re.ref);Y(Te);const Me=I$().currentUser;if(Me){await lj(Me,{photoURL:Te});const ae=$U();await E_(qc(ae,"users",Me.uid),{photoURL:Te},{merge:!0}),location.reload()}else console.error("Utilisateur non connecté")}}catch(S){console.error("Erreur lors du téléchargement de l'image de profil :",S)}},x="https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c",L=n?.photoURL;return Q.useEffect(()=>{const S=document.getElementById("titre-infoutilisateur");if(S){const Re=()=>{var Te=document.getElementById("infoutilisateur");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-assogoogle");if(S){const Re=()=>{var Te=document.getElementById("assogoogle");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-adressemail");if(S){const Re=()=>{var Te=document.getElementById("adressemail");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-mdp");if(S){const Re=()=>{var Te=document.getElementById("mdp");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-mnom");if(S){const Re=()=>{var Te=document.getElementById("mnom");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-mprofil");if(S){const Re=()=>{var Te=document.getElementById("mprofil");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-delete");if(S){const Re=()=>{var Te=document.getElementById("delete");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),Q.useEffect(()=>{const S=document.getElementById("titre-deconnexion");if(S){const Re=()=>{var Te=document.getElementById("deconnexion");Te.style.display==="flex"?Te.style.display="none":Te.style.display="flex"};return S.addEventListener("click",Re),()=>{S.removeEventListener("click",Re)}}},[]),U.jsxs("div",{className:"profil",children:[E&&U.jsx("p",{style:{color:"red"},children:E}),U.jsx("h2",{id:"titre-infoutilisateur",className:"titre-infoutilisateur",children:U.jsx("p",{children:"Informations de l'utilisateur"})}),U.jsx("div",{id:"infoutilisateur",className:"infoutilisateur",children:U.jsxs("p",{className:"infoutilisateur1",style:{display:"grid"},children:[U.jsx("div",{className:"infoutilisateurimg",children:U.jsx("img",{src:L||x})}),U.jsxs("div",{className:"infoutilisateurautre",children:["Nom:",U.jsx("br",{}),n?.displayName?.split(" ")[0]," ",n?.displayName?.split(" ")[1],U.jsx("br",{}),U.jsx("br",{}),"Email:",U.jsx("br",{})," ",n?.email]})]})}),U.jsx("h2",{id:"titre-assogoogle",className:"titre-assogoogle",children:U.jsx("p",{children:"connection a google"})}),U.jsx("div",{id:"assogoogle",className:"assogoogle",children:D?U.jsx("p",{children:"Connecté avec Google"}):U.jsx("p",{children:U.jsx("button",{onClick:he,children:"Lier un compte Google"})})}),U.jsx("h2",{id:"titre-adressemail",className:"titre-adressemail",children:U.jsx("p",{children:"Modifier l'adresse email"})}),U.jsx("div",{id:"adressemail",className:"adressemail",children:U.jsxs("p",{children:[U.jsx("input",{type:"email",placeholder:"Nouvelle adresse email",value:t,onChange:S=>r(S.target.value)}),U.jsx("button",{onClick:ue,children:"Mettre à jour l'email"})]})}),U.jsx("h2",{id:"titre-mdp",className:"titre-mdp",children:U.jsx("p",{children:"Modifier le mot de passe"})}),U.jsx("div",{id:"mdp",className:"mdp",children:U.jsxs("p",{children:[U.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:i,onChange:S=>o(S.target.value)}),U.jsx("input",{type:"password",placeholder:"Confirmer le nouveau mot de passe",value:l,onChange:S=>c(S.target.value)}),U.jsx("button",{onClick:b,children:"Mettre à jour le mot de passe"})]})}),U.jsx("h2",{id:"titre-mnom",className:"titre-mnom",children:U.jsx("p",{children:"Modifier le nom"})}),U.jsx("div",{id:"mnom",className:"mnom",children:U.jsxs("p",{children:[U.jsx("input",{type:"text",placeholder:"Nouveau prénom",value:h,onChange:S=>p(S.target.value)}),U.jsx("input",{type:"text",placeholder:"Nouveau nom de famille",value:y,onChange:S=>v(S.target.value)}),U.jsx("button",{onClick:R,children:"Mettre à jour le nom"})]})}),U.jsx("h2",{id:"titre-mprofil",className:"titre-mprofil",children:U.jsx("p",{children:"Modifier l'image de profil"})}),U.jsx("div",{id:"mprofil",className:"mprofil",children:U.jsxs("p",{children:[U.jsx("input",{type:"file",onChange:C}),U.jsx("button",{onClick:N,children:"Télécharger l'image de profil"})]})}),U.jsx("h2",{id:"titre-delete",className:"titre-delete",children:U.jsx("p",{children:"Supprimer le compte"})}),U.jsx("div",{id:"delete",className:"delete",children:U.jsx("p",{children:U.jsx("button",{onClick:()=>{window.confirm("Voulez-vous vraiment supprimer votre compte ?")&&(Ne.firestore().collection("users").doc(n.uid).delete().then(()=>{console.log(n.uid),console.log("Document utilisateur supprimé avec succès !")}).catch(S=>{A(S.message),console.error(S.message)}),Ne.auth().currentUser.delete().then(()=>{console.log("Compte supprimé avec succès !"),ne("/")}).catch(S=>{A(S.message),console.error(S.message)}))},children:"Supprimer le compte"})})}),U.jsx("h2",{id:"titre-deconnexion",className:"titre-deconnexion",children:U.jsx("p",{children:"Déconnexion"})}),U.jsx("div",{id:"deconnexion",className:"deconnexion",children:U.jsx("p",{children:U.jsx("button",{onClick:()=>{Ne.auth().signOut().then(()=>{console.log("Déconnexion réussie !"),ne("/")}).catch(S=>{A(S.message),console.error(S.message)})},children:"Déconnexion"})})})]})};function S$(){const[n,e]=Q.useState(!0),[t,r]=Q.useState(null);return Q.useEffect(()=>{const i=Ne.auth().onAuthStateChanged(o=>{r(!!o)});return()=>i()},[]),t===null?U.jsx("div",{children:"Chargement..."}):U.jsxs("div",{className:"home",children:[U.jsx(zf,{}),U.jsx("h1",{className:"titre-home",children:"Home"}),U.jsx("div",{className:"sign",children:t?U.jsx(T$,{}):U.jsxs(U.Fragment,{children:[n?U.jsx(yB,{}):U.jsx(_B,{}),U.jsx("div",{className:"connection",children:U.jsx("button",{onClick:()=>e(!n),children:n?"S'inscrire":"Se connecter"})})]})})]})}function R$(){const n=O_(),[e,t]=Q.useState(""),[r,i]=Q.useState(""),[o,l]=Q.useState(""),[c,h]=Q.useState(""),[p,y]=Q.useState({});Q.useEffect(()=>{const A=Ne.auth().onAuthStateChanged(D=>{D?v(D.uid):n("/")});return()=>A()},[]);const v=async A=>{try{const D=await Ne.firestore().collection("ratio").doc(A).get();if(D.exists){const V=D.data();y(V)}}catch(D){console.error("Error fetching data: ",D)}},E=async()=>{const A=Ne.auth().currentUser;if(!A){console.error("User is not authenticated");return}const D={};if(e!==p.bolusma&&(D.bolusma=e),r!==p.bolusmi&&(D.bolusmi=r),o!==p.bolusgo&&(D.bolusgo=o),c!==p.bolusso&&(D.bolusso=c),Object.keys(D).length>0)try{const V=Ne.firestore().collection("ratio").doc(A.uid);(await V.get()).exists?await V.update(D):await V.set(D),await v(A.uid),t(""),i(""),l(""),h("")}catch(V){console.error("Error saving document: ",V)}};return U.jsxs("div",{className:"ratio-container",children:[U.jsx(zf,{}),U.jsx("h1",{className:"titre-ratio",children:"Ratio"}),U.jsxs("div",{className:"ratio",children:[U.jsxs("p",{className:"ratio-group",children:[U.jsx("label",{className:"ratio-label",htmlFor:"bolusma",children:"Ratio Matin :"}),U.jsx("input",{className:"ratio-input",type:"text",id:"bolusma",pattern:"[0-9]+(\\.[0-9]+)?",title:"Veuillez entrer un nombre valide (chiffres et point décimal)",placeholder:"Bolus Matin",value:e,onChange:A=>t(A.target.value)}),U.jsxs("div",{className:"ratio-value",id:"bolusmatin",children:["ratio matin : ",p.bolusma," ml/dl"]})]}),U.jsxs("p",{className:"ratio-group",children:[U.jsx("label",{className:"ratio-label",htmlFor:"bolusmi",children:"Ratio Midi :"}),U.jsx("input",{className:"ratio-input",type:"text",id:"bolusmi",pattern:"[0-9]+(\\.[0-9]+)?",title:"Veuillez entrer un nombre valide (chiffres et point décimal)",placeholder:"Bolus Midi",value:r,onChange:A=>i(A.target.value)}),U.jsxs("div",{className:"ratio-value",id:"bolusmidi",children:["ratio midi : ",p.bolusmi," ml/dl"]})]}),U.jsxs("p",{className:"ratio-group",children:[U.jsx("label",{className:"ratio-label",htmlFor:"bolusgo",children:"Ratio Goûter :"}),U.jsx("input",{className:"ratio-input",type:"text",id:"bolusgo",pattern:"[0-9]+(\\.[0-9]+)?",title:"Veuillez entrer un nombre valide (chiffres et point décimal)",placeholder:"Bolus Goûter",value:o,onChange:A=>l(A.target.value)}),U.jsxs("div",{className:"ratio-value",id:"bolusgouter",children:["ratio goûter : ",p.bolusgo," ml/dl"]})]}),U.jsxs("p",{className:"ratio-group",children:[U.jsx("label",{className:"ratio-label",htmlFor:"bolusso",children:"Ratio Soir :"}),U.jsx("input",{className:"ratio-input",type:"text",id:"bolusso",pattern:"[0-9]+(\\.[0-9]+)?",title:"Veuillez entrer un nombre valide (chiffres et point décimal)",placeholder:"Bolus Soir",value:c,onChange:A=>h(A.target.value)}),U.jsxs("div",{className:"ratio-value",id:"bolussoir",children:["ratio soir : ",p.bolusso," ml/dl"]})]})]}),U.jsx("center",{children:U.jsx("button",{onClick:E,id:"submit-btn",className:"submit-button",children:"Enregistrer"})})]})}function A$(){const[n,e]=Q.useState(""),[t,r]=Q.useState(""),[i,o]=Q.useState(""),[l,c]=Q.useState(""),[h,p]=Q.useState(""),[y,v]=Q.useState(""),[E,A]=Q.useState(!1),[D,V]=Q.useState(!1),[k,Y]=Q.useState(!1),[q,K]=Q.useState(!1),[ne,he]=Q.useState(""),[ue,b]=Q.useState("");Q.useEffect(()=>{const N=Ne.auth().onAuthStateChanged(async x=>{x?await R(x.uid):window.location.href="/glucide_aide/"});return()=>N()},[]);const R=async N=>{try{const x=await Ne.firestore().collection("ratio").doc(N).get();if(x.exists){const L=x.data();e(L.bolusma||""),r(L.bolusmi||""),o(L.bolusgo||""),c(L.bolusso||"")}}catch(x){console.error("Error fetching data: ",x)}},C=async()=>{const N=parseFloat(h),x=parseFloat(y);if(isNaN(N)||isNaN(x)){he("Veuillez entrer des valeurs valides pour glycémie et glucide.");return}let L="";N<170?(E&&(L=(x/parseFloat(n)).toFixed(2)),D&&(L=(x/parseFloat(t)).toFixed(2)),k&&(L=(x/parseFloat(i)).toFixed(2)),q&&(L=(x/parseFloat(l)).toFixed(2))):N>=170&&N<220?(E&&(L=(x/parseFloat(n)+1).toFixed(2)),D&&(L=(x/parseFloat(t)+1).toFixed(2)),k&&(L=(x/parseFloat(i)+1).toFixed(2)),q&&(L=(x/parseFloat(l)+1).toFixed(2))):N>=220&&N<270?(E&&(L=(x/parseFloat(n)+2).toFixed(2)),D&&(L=(x/parseFloat(t)+2).toFixed(2)),k&&(L=(x/parseFloat(i)+2).toFixed(2)),q&&(L=(x/parseFloat(l)+2).toFixed(2))):N>=270&&N<320?(E&&(L=(x/parseFloat(n)+3).toFixed(2)),D&&(L=(x/parseFloat(t)+3).toFixed(2)),k&&(L=(x/parseFloat(i)+3).toFixed(2)),q&&(L=(x/parseFloat(l)+3).toFixed(2))):N>=320&&(E&&(L=(x/parseFloat(n)+4).toFixed(2)),D&&(L=(x/parseFloat(t)+4).toFixed(2)),k&&(L=(x/parseFloat(i)+4).toFixed(2)),q&&(L=(x/parseFloat(l)+4).toFixed(2))),he(L);const S=Ne.firestore(),Re=Ne.auth().currentUser,Te=new Date,St=new Date;let Me=St.getDate();const ae=St.getFullYear();let we=St.getMonth()+1,de="";if(E&&(de="Matin"),D&&(de="Midi"),k&&(de="Goûter"),q&&(de="Soir"),!y||!h||!de){b("Veuillez remplir tous les champs et sélectionner un moment.");return}we===13&&(we=1),we<10&&(we="0"+we),Me<10&&(Me="0"+Me);const F=`${Me}-${we}-${ae}`;try{const J=await S.collection("cookies").doc(Re.uid).get(),De="cookie_"+((J.exists?Object.keys(J.data()).length:0)+1);await S.collection("cookies").doc(Re.uid).set({[De]:`${y}g ${h}mg/dl ${de} ${L}ui ${Te.getHours()}:${Te.getMinutes()} ${F}`},{merge:!0}),b("Enregistré !")}catch(J){console.error("Error saving data: ",J),b("Erreur lors de l'enregistrement !")}};return U.jsxs("div",{className:"calculette",children:[U.jsx(zf,{}),U.jsx("h1",{className:"titre-calculette",children:"Calculette"}),U.jsxs("div",{className:"calcul",children:[U.jsx("input",{type:"text",value:h,onChange:N=>p(N.target.value),placeholder:"Glycémie",className:"input-glycemie"}),U.jsx("br",{}),U.jsx("input",{type:"text",value:y,onChange:N=>v(N.target.value),placeholder:"Glucides",className:"input-glucide"}),U.jsx("br",{}),U.jsx("input",{type:"checkbox",checked:E,onChange:()=>A(!E),id:"Matin",className:"checkbox-matin"}),U.jsx("label",{htmlFor:"Matin",className:"label-matin",children:"Matin"}),U.jsx("br",{}),U.jsx("input",{type:"checkbox",checked:D,onChange:()=>V(!D),id:"Midi",className:"checkbox-midi"}),U.jsx("label",{htmlFor:"Midi",className:"label-midi",children:"Midi"}),U.jsx("br",{}),U.jsx("input",{type:"checkbox",checked:k,onChange:()=>Y(!k),id:"Goûter",className:"checkbox-gouter"}),U.jsx("label",{htmlFor:"Goûter",className:"label-gouter",children:"Goûter"}),U.jsx("br",{}),U.jsx("input",{type:"checkbox",checked:q,onChange:()=>K(!q),id:"Soir",className:"checkbox-soir"}),U.jsx("label",{htmlFor:"Soir",className:"label-soir",children:"Soir"}),U.jsx("br",{}),U.jsx("button",{onClick:C,id:"submit-btn",className:"btn-submit",children:"Calculer"}),U.jsx("div",{id:"resultats",className:"result result1",children:ne}),U.jsx("div",{id:"resultats2",className:"result result2",children:ue})]})]})}function P$(){const[n,e]=Q.useState([]),[t,r]=Q.useState(null),[i,o]=Q.useState("");Q.useEffect(()=>{const D=Ne.auth().onAuthStateChanged(V=>{V?l(V.uid):window.location.href="/"});return()=>D()},[]);const l=async D=>{try{const V=await Ne.firestore().collection("cookies").doc(D).get();if(V.exists){const k=V.data(),Y=Object.keys(k).map(q=>{const[K,ne,he,ue,b,R,C]=k[q].split(" ");return{cookieName:q,quantite:K,glycemie:parseFloat(ne),moment:he,resultat:ue,heure:b,date:R,posteRepas:parseFloat(C)||""}});e(Y)}}catch(V){console.error("Error fetching historique: ",V)}},c=D=>{o(D.target.value)},h=D=>{r(D.cookieName),o(D.posteRepas)},p=async D=>{const{cookieName:V,quantite:k,glycemie:Y,moment:q,resultat:K,heure:ne,date:he}=D;try{const ue=`${k} ${Y} ${q} ${K} ${ne} ${he} ${i}mg/dl`,b=Ne.firestore(),R=Ne.auth().currentUser;await b.collection("cookies").doc(R.uid).set({[V]:ue},{merge:!0}),e(n.map(C=>C.cookieName===V?{...C,posteRepas:parseFloat(i)}:C)),r(null)}catch(ue){console.error("Error updating poste repas: ",ue)}},y=D=>{const V=D.match(/[\d.]+/);return V?parseFloat(V[0]):NaN},v=D=>{const V=String(D).trim().toLowerCase(),k=y(V);return V===""||V==="rien"||isNaN(k)?"glycemie-empty":k<=70?"glycemie-low":k>70&&k<170?"glycemie-normal":k>=170&&k<=250?"glycemie-high":"glycemie-very-high"},E=D=>{const V=String(D).trim().toLowerCase(),k=y(V);return V===""||V==="rien"||isNaN(k)?"poste-repas-empty":k<=70?"poste-repas-low":k>70&&k<170?"poste-repas-normal":k>=170&&k<=250?"poste-repas-high":"poste-repas-very-high"},A=()=>{if(!n.length)return U.jsx("div",{children:"No historical data found."});const D=n.reduce((k,Y)=>(k[Y.date]||(k[Y.date]=[]),k[Y.date].push(Y),k),{});return Object.keys(D).sort((k,Y)=>new Date(Y.split("-").reverse().join("-"))-new Date(k.split("-").reverse().join("-"))).map(k=>{const Y=D[k].sort((q,K)=>{const[ne,he]=q.heure.split(":").map(Number),[ue,b]=K.heure.split(":").map(Number);return ue-ne||b-he});return U.jsxs("div",{className:"cookie-item",children:[U.jsx("div",{className:"nom-item",onClick:()=>{const q=document.getElementById(k);q.style.display=q.style.display==="none"?"table":"none"},children:k}),U.jsxs("table",{id:k,className:"table-cookies",style:{display:"none"},children:[U.jsx("thead",{children:U.jsxs("tr",{children:[U.jsx("th",{children:"Moment"}),U.jsx("th",{children:"Quantité"}),U.jsx("th",{children:"Glycémie"}),U.jsx("th",{children:"Unité"}),U.jsx("th",{children:"Poste repas"})]})}),U.jsx("tbody",{children:Y.map(q=>U.jsxs("tr",{children:[U.jsx("td",{children:q.moment}),U.jsx("td",{children:q.quantite}),U.jsxs("td",{className:v(q.glycemie),children:[q.glycemie," mg/dl"]}),U.jsx("td",{children:q.resultat}),U.jsx("td",{className:E(q.posteRepas),children:t===q.cookieName?U.jsxs(U.Fragment,{children:[U.jsx("input",{type:"text",placeholder:"Poste repas",value:i,onChange:c}),U.jsx("button",{onClick:()=>p(q),children:"Save"})]}):U.jsxs(U.Fragment,{children:[U.jsx("span",{onClick:()=>h(q),children:q.posteRepas||"Click to edit"}),q.posteRepas&&" mg/dl"]})})]},q.cookieName))})]})]},k)})};return U.jsxs("div",{className:"historique",children:[U.jsx(zf,{}),U.jsx("h1",{className:"titre-historique",children:"Historique"}),U.jsx("div",{id:"cookie-list",children:A()})]})}function k$(){return U.jsx(Bb,{children:U.jsx("div",{children:U.jsxs(Db,{children:[U.jsx(nc,{path:"/",element:U.jsx(S$,{})}),U.jsx(nc,{path:"/Ratio",element:U.jsx(R$,{})}),U.jsx(nc,{path:"/Calculette",element:U.jsx(A$,{})}),U.jsx(nc,{path:"/Historique",element:U.jsx(P$,{})})]})})})}zC.createRoot(document.getElementById("root")).render(U.jsx(wS.StrictMode,{children:U.jsx(k$,{})}));
